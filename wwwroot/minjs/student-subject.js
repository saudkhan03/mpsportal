var adminmodule=angular.module("app-mps",[]);adminmodule.controller("student-subject",["$scope","$http",function(d,a){var t=[];d.wait=!0,a.get("/Students/getSubjectList").then(function(e){d.SubjectFullList=e.data,d.SubjectList=d.SubjectFullList,d.Type="0",d.subjectButtonText="Add Subject";d.subject={id:"",active:!0},d.wait=!1},function(e){alert(e.statusText),d.wait=!1}),d.changed=function(){d.SubjectList=d.searchtext?performfilter(d.searchtext):t},performfilter=function(e){return filterby=e.toLocaleLowerCase(),t.filter(function(e){return-1!=e.AcademicEntityName.toLocaleLowerCase().indexOf(filterby)})},d.getSubject=function(e,t,a,c,i,s){var u,n;switch(a){case"Subject":u="0";break;case"Attendance":u="1";break;case"Text":u="2";break;case"Value":u="3";break;case"Character_Social":u="4";break;case"Character_Residential":u="5"}switch(c){case"Marks":n="0";break;case"Grade":n="1";break;case"Attendance":n="2";break;case"Text":n="3";break;case"Value":n="4"}var r={id:e,academicEntityName:t,academicEntityType:u,academicEntityValueType:n,academicEntityGrade:i,active:s};d.subject=r,d.subjectButtonText="Update Subject","1"==u||"4"==u||"5"==u?$("#ValueList").attr("disabled","disabled"):$("#ValueList").removeAttr("disabled")},d.clearSubjectForm=function(){d.subject.id="",d.subject.academicEntityName="",d.subject.academicEntityType="",d.subject.academicEntityValueType="",d.subject.academicEntityGrade="",d.subjectButtonText="Add Subject"},d.getActiveClass=function(e){return e?"fa fa-circle-o activesubject":"fa fa-circle-o inactiveUser"},d.updateSubject=function(){var e,t;switch(d.subject.academicEntityType){case"0":e="Subject";break;case"1":e="Attendance";break;case"2":e="Text";break;case"3":e="Value";break;case"4":e="Character_Social";break;case"5":e="Character_Residential"}switch(d.subject.academicEntityValueType){case"0":t="Marks";break;case"1":t="Grade";break;case"2":t="Attendance";break;case"3":t="Text";break;case"4":t="Value"}d.subject.academicEntityType=e,d.subject.academicEntityValueType=t,d.subject.id?a.post("/Students/UpdateSubject",d.subject).then(function(e){e.data.res?(d.wait=!1,alert(e.data.status),window.location.reload(!0)):(d.wait=!1,alert(e.data.status))},function(e){d.wait=!1,alert(e.statusText)}):a.post("/Students/SaveSubject",d.subject).then(function(e){e.data.res?(d.wait=!1,alert(e.data.status),window.location.reload(!0)):(d.wait=!1,alert(e.data.status))},function(e){d.wait=!1,alert(e.statusText)})},d.changeTypeDropDown=function(){"4"==d.subject.academicEntityType||"5"==d.subject.academicEntityType?(d.subject.academicEntityValueType="1",$("#ValueList").attr("disabled","disabled")):"1"==d.subject.academicEntityType?(d.subject.academicEntityValueType="2",$("#ValueList").attr("disabled","disabled")):(d.subject.academicEntityValueType="",$("#ValueList").removeAttr("disabled"))}}]);