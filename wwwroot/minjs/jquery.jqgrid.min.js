var $jscomp={scope:{},findInternal:function(e,t,r){e instanceof String&&(e=String(e));for(var i=e.length,a=0;a<i;a++){var o=e[a];if(t.call(r,o,a,e))return{i:a,v:o}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){if(r.get||r.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,r,i){if(t){for(r=$jscomp.global,e=e.split("."),i=0;i<e.length-1;i++){var a=e[i];a in r||(r[a]={}),r=r[a]}(t=t(i=r[e=e[e.length-1]]))!=i&&null!=t&&$jscomp.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.find",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}},"es6-impl","es3"),$jscomp.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.startsWith",function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"startsWith");e+="";for(var i=r.length,a=e.length,o=Math.max(0,Math.min(0|t,r.length)),l=0;l<a&&o<i;)if(r[o++]!=e[l++])return!1;return a<=l}},"es6-impl","es3"),$jscomp.polyfill("String.prototype.endsWith",function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=r.length);for(var i=Math.max(0,Math.min(0|t,r.length)),a=e.length;0<a&&0<i;)if(r[--i]!=e[--a])return!1;return a<=0}},"es6-impl","es3"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(e){var t=0;return $jscomp.iteratorPrototype(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})},$jscomp.iteratorPrototype=function(e){return $jscomp.initSymbolIterator(),(e={next:e})[$jscomp.global.Symbol.iterator]=function(){return this},e},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(t,r){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var i=0,a={next:function(){if(i<t.length){var e=i++;return{value:r(e,t[e]),done:!1}}return a.next=function(){return{done:!0,value:void 0}},a.next()}};return a[Symbol.iterator]=function(){return a},a},$jscomp.polyfill("Array.prototype.keys",function(e){return e||function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3"),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(b){function P(e,t,r){if(!(this instanceof P))return new P(e);this.aggregator=e,this.finilized=!1,this.context=t,this.pivotOptions=r}function K(e,t,r,i,a){var o=i.length,l=function(e,t){var r=e,i=t;if(null==r&&(r=""),null==i&&(i=""),r=String(r),i=String(i),this.caseSensitive||(r=r.toUpperCase(),i=i.toUpperCase()),r===i){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;if(null===e)return-1;if(null===t)return 1}return r<i?-1:1},n=function(e,t){return(e=Number(e))===(t=Number(t))?0:e<t?-1:1},s=function(e,t){return(e=Math.floor(Number(e)))===(t=Math.floor(Number(t)))?0:e<t?-1:1};for(this.items=[],this.indexesOfSourceData=[],this.trimByCollect=e,this.caseSensitive=t,this.skipSort=r,this.fieldLength=o,this.fieldNames=Array(o),this.fieldSortDirection=Array(o),this.fieldCompare=Array(o),e=0;e<o;e++){switch(t=i[e],this.fieldNames[e]=t[a||"dataName"],t.sorttype){case"integer":case"int":this.fieldCompare[e]=s;break;case"number":case"currency":case"float":this.fieldCompare[e]=n;break;default:this.fieldCompare[e]=b.isFunction(t.compare)?t.compare:l}this.fieldSortDirection[e]="desc"===t.sortorder?-1:1}}var Q={name:"English (United States)",nameEnglish:"English (United States)",isRTL:!1,defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid",savetext:"Saving..."},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],addGroupTitle:"Add subgroup",deleteGroupTitle:"Delete group",addRuleTitle:"Add rule",deleteRuleTitle:"Delete rule",operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row",savetext:"",savetitle:"Save row",canceltext:"",canceltitle:"Cancel row editing"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:"Sun Mon Tue Wed Thr Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" "),AmPm:["am","pm","AM","PM"],S:function(e){return e<11||13<e?["st","nd","rd","th"][Math.min((e-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}};b.jgrid=b.jgrid||{};var t=b.jgrid;t.locales=t.locales||{};var ba=t.locales;(null==t.defaults||b.isEmptyObject(ba)||void 0===ba["en-US"])&&(void 0===ba["en-US"]&&b.extend(!0,t,{locales:{"en-US":Q}}),t.defaults=t.defaults||{},void 0===t.defaults.locale&&(t.defaults.locale="en-US")),t.defaults=t.defaults||{};var la=t.defaults;b.extend(!0,t,{version:"4.13.5",productName:"free jqGrid",defaults:{},search:{},edit:{},view:{},del:{},nav:{},col:{},errors:{},formatter:{unused:""},icons:{jQueryUI:{common:"ui-icon",pager:{first:"ui-icon-seek-first",prev:"ui-icon-seek-prev",next:"ui-icon-seek-next",last:"ui-icon-seek-end"},sort:{asc:"ui-icon-triangle-1-n",desc:"ui-icon-triangle-1-s"},gridMinimize:{visible:"ui-icon-circle-triangle-n",hidden:"ui-icon-circle-triangle-s"},nav:{edit:"ui-icon-pencil",add:"ui-icon-plus",del:"ui-icon-trash",search:"ui-icon-search",refresh:"ui-icon-refresh",view:"ui-icon-document",save:"ui-icon-disk",cancel:"ui-icon-cancel",newbutton:"ui-icon-newwin"},actions:{edit:"ui-icon-pencil",del:"ui-icon-trash",save:"ui-icon-disk",cancel:"ui-icon-cancel"},form:{close:"ui-icon-closethick",prev:"ui-icon-triangle-1-w",next:"ui-icon-triangle-1-e",save:"ui-icon-disk",undo:"ui-icon-close",del:"ui-icon-scissors",cancel:"ui-icon-cancel",resizableLtr:"ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se"},search:{search:"ui-icon-search",reset:"ui-icon-arrowreturnthick-1-w",query:"ui-icon-comment"},subgrid:{plus:"ui-icon-plus",minus:"ui-icon-minus",openLtr:"ui-icon-carat-1-sw",openRtl:"ui-icon-carat-1-se"},grouping:{plus:"ui-icon-circlesmall-plus",minus:"ui-icon-circlesmall-minus"},treeGrid:{minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off",plusLtr:"ui-icon-triangle-1-e",plusRtl:"ui-icon-triangle-1-w"}},fontAwesome:{common:"fa",pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-asc",desc:"fa-sort-desc"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil",add:"fa-plus",del:"fa-trash-o",search:"fa-search",refresh:"fa-refresh",view:"fa-file-o",save:"fa-floppy-o",cancel:"fa-ban",newbutton:"fa-external-link"},actions:{common:"fa-fw",edit:"fa-pencil",del:"fa-trash-o",save:"fa-floppy-o",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-floppy-o",undo:"fa-undo",del:"fa-trash-o",cancel:"fa-ban",resizableLtr:"fa-rss fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments-o"},subgrid:{common:"fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square-o",minus:"fa-minus-square-o"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-desc",leaf:"fa-dot-circle-o",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"}},glyph:{common:"glyphicon",pager:{common:"",first:"glyphicon-step-backward",prev:"glyphicon-backward",next:"glyphicon-forward",last:"glyphicon-step-forward"},sort:{common:"",asc:"glyphicon-triangle-top",desc:"glyphicon-triangle-bottom"},gridMinimize:{visible:"glyphicon-circle-arrow-up",hidden:"glyphicon-circle-arrow-down"},nav:{common:"",edit:"glyphicon-edit",add:"glyphicon-plus",del:"glyphicon-trash",search:"glyphicon-search",refresh:"glyphicon-refresh",view:"glyphicon-file",save:"glyphicon-save",cancel:"glyphicon-ban-circle",newbutton:"glyphicon-new-window"},actions:{common:"",edit:"glyphicon-edit",del:"glyphicon-trash",save:"glyphicon-save",cancel:"glyphicon-ban-circle"},form:{close:"glyphicon-remove-circle",prev:"glyphicon-step-backward",next:"glyphicon-step-forward",save:"glyphicon-save",undo:"glyphicon-repeat",del:"glyphicon-trash",cancel:"glyphicon-ban-circle",resizableLtr:"glyphicon-import"},search:{search:"glyphicon-search",reset:"glyphicon-repeat",query:"glyphicon-cog"},subgrid:{common:"",plus:"glyphicon-zoom-in",minus:"glyphicon-zoom-out",openLtr:"glyphicon-indent-left",openRtl:"glyphicon-indent-left"},grouping:{common:"",plus:"glyphicon-expand",minus:"glyphicon-collapse-down"},treeGrid:{common:"",minus:"glyphicon-triangle-bottom",leaf:"glyphicon-record",plusLtr:"glyphicon-triangle-right",plusRtl:"glyphicon-triangle-left"}}},guiStyles:{jQueryUI:{gBox:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all",gView:"",overlay:"ui-widget-overlay",loading:"ui-state-default ui-state-active",hDiv:"ui-state-default ui-corner-top",hTable:"",colHeaders:"ui-state-default",states:{select:"ui-state-highlight",disabled:"ui-state-disabled ui-jqgrid-disablePointerEvents",hover:"ui-state-hover",error:"ui-state-error",active:"ui-state-active",textOfClickable:"ui-state-default"},dialog:{header:"ui-widget-header ui-dialog-titlebar ui-corner-all ui-helper-clearfix",window:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all ui-front",document:"",subdocument:"",body:"",footer:"",content:"ui-widget-content",hr:"ui-widget-content",closeButton:"ui-corner-all",fmButton:"ui-state-default",dataField:"ui-widget-content ui-corner-all",viewLabel:"ui-widget-content",viewData:"ui-widget-content",leftCorner:"ui-corner-left",rightCorner:"ui-corner-right",defaultCorner:"ui-corner-all"},filterToolbar:{dataField:"ui-widget-content"},subgrid:{thSubgrid:"ui-state-default",rowSubTable:"ui-widget-content",row:"ui-widget-content",tdStart:"",tdWithIcon:"ui-widget-content",buttonDiv:"",button:"",tdData:"ui-widget-content",legacyTable:""},grid:"",gridRow:"ui-widget-content",rowNum:"ui-state-default",gridFooter:"",rowFooter:"ui-widget-content",gridTitle:"ui-widget-header ui-corner-top",gridError:"ui-state-error",gridErrorText:"",titleButton:"ui-corner-all",toolbarUpper:"ui-state-default",toolbarBottom:"ui-state-default",actionsDiv:"ui-widget-content",actionsButton:"ui-corner-all",pager:{pager:"ui-state-default",pagerButton:"ui-corner-all",pagerInput:"ui-widget-content",pagerSelect:"ui-widget-content"},navButton:"ui-corner-all",searchDialog:{operator:"ui-corner-all",label:"ui-corner-all",elem:"ui-corner-all",operationGroup:"",addRuleButton:"ui-corner-all",deleteRuleButton:"ui-corner-all",operationSelect:"ui-corner-all",addGroupButton:"ui-corner-all",deleteGroupButton:"ui-corner-all"},searchToolbar:{menu:"ui-menu-jqueryui",operButton:"ui-corner-all",clearButton:"ui-corner-all"},top:"ui-corner-top",bottom:"ui-corner-bottom",resizer:"ui-widget-header"},bootstrap:{gBox:"ui-jqgrid-bootstrap",gView:"panel-info",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-condensed table-bordered",colHeaders:"",states:{select:"success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"hidden",closeButton:"btn btn-xs btn-default",fmButton:"btn btn-default",dataField:"form-control",viewLabel:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-default",actionsDiv:"",actionsButton:"btn btn-xs btn-default",toolbarUpper:"",toolbarBottom:"",pager:{pager:"panel-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",operButton:"btn btn-xs btn-default",clearButton:"btn btn-xs btn-default"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"},bootstrapPrimary:{baseGuiStyle:"bootstrap",dialog:{closeButton:"btn btn-xs close",fmButton:"btn btn-primary"},searchDialog:{addRuleButton:"btn btn-xs btn-primary",deleteRuleButton:"btn btn-xs btn-primary",addGroupButton:"btn btn-xs btn-primary",deleteGroupButton:"btn btn-xs btn-primary"}}},htmlDecode:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").replace(/&#39;/g,"'").replace(/&#47;/g,"/").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},htmlEncode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\//g,"&#47;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},oldEncodePostedData:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},oldDecodePostedData:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},clearArray:function(e){for(;0<e.length;)e.pop()},format:function(e){var r=b.makeArray(arguments).slice(1);return null==e&&(e=""),e.replace(/\{(\d+)\}/g,function(e,t){return r[t]})},template:function(e){var a,o=b.makeArray(arguments).slice(1),l=o.length;return null==e&&(e=""),e.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((\.*?)?\))?)?\}/g,function(e,t){var r,i;if(!isNaN(parseInt(t,10)))return o[parseInt(t,10)];for(a=0;a<l;a++)if(b.isArray(o[a]))for(i=(r=o[a]).length;i--;)if(t===r[i].nm)return r[i].v})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var e=-1,t=/(MSIE) ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent);return null!=t&&3===t.length&&(e=parseFloat(t[2]||-1)),e},fixMaxHeightOfDiv:function(e){return"Microsoft Internet Explorer"===navigator.appName?Math.min(e,1533917):null!=/(Firefox)/.exec(navigator.userAgent)?Math.min(e,17895696):e},getCellIndex:function(e){return(e=b(e)).is("tr")?-1:null==(e=(e.is("td")||e.is("th")?e:e.closest("td,th"))[0])?-1:t.msie?b.inArray(e,e.parentNode.cells):e.cellIndex},stripHtml:function(e){return(e=String(e))?(e=e.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""))&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/\"/g,"'"):"":e},stripPref:function(e,t){var r=b.type(e);return"string"!==r&&"number"!==r||(t=""!==(e=String(e))?String(t).replace(String(e),""):t),t},getRes:function(e,t){var r,i=t.split("."),a=i.length;if(null!=e){for(r=0;r<a;r++){if(!i[r])return null;if(void 0===(e=e[i[r]]))break;if("string"==typeof e)break}return e}},parseDate:function(e,r,i,a){var o,l,n,s=0,d=0;o="string"==typeof r?r.match(/^\/Date\((([\-+])?[0-9]+)(([\-+])([0-9]{2})([0-9]{2}))?\)\/$/):null;var c=function(e,t){for(e=String(e),t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},u=(s={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},function(e,t){return 0===e?12===t&&(t=0):12!==t&&(t+=12),t});if(void 0===(a=function(e,r){var i,a,o="AmPm dayNames masks monthNames userLocalTime parseRe S srcformat".split(" "),l=r||{},n=(t.formatter||{}).date||{},s=null==e||null==e.locale?{}:((ba[e.locale]||{}).formatter||{}).date,d=o.length,c={};for(i=0;i<d;i++)void 0!==l[a=o[i]]?c[a]=l[a]:void 0!==n[a]?c[a]=n[a]:void 0!==s[a]&&(c[a]=s[a]);return c}(this.p,a)).parseRe&&(a.parseRe=/[#%\\\/:_;.,\t\s\-]/),a.masks.hasOwnProperty(e)&&(e=a.masks[e]),r&&null!=r)if(isNaN(r)||"u"!==String(e).toLowerCase())if(isNaN(r)||"u1000"!==String(e).toLowerCase())if(r.constructor===Date)s=r;else if(null!==o)s=new Date(parseInt(o[1],10)),o[3]&&(d=60*Number(o[5])+Number(o[6]),d*="-"===o[4]?1:-1,d-=s.getTimezoneOffset(),s.setTime(Number(Number(s)+6e4*d)));else{for("ISO8601Long"===a.srcformat&&"Z"===r.charAt(r.length-1)&&(d-=(new Date).getTimezoneOffset()),r=String(r).replace(/\T/g,"#").replace(/\t/,"%").split(a.parseRe),e=e.replace(/\T/g,"#").replace(/\t/,"%").split(a.parseRe),l=0,n=Math.min(e.length,r.length);l<n;l++){switch(e[l]){case"M":-1!==(o=b.inArray(r[l],a.monthNames))&&o<12&&(r[l]=o+1,s.m=r[l]);break;case"F":-1!==(o=b.inArray(r[l],a.monthNames,12))&&11<o&&(r[l]=o+1-12,s.m=r[l]);break;case"n":s.m=parseInt(r[l],10);break;case"j":s.d=parseInt(r[l],10);break;case"g":s.h=parseInt(r[l],10);break;case"a":-1!==(o=b.inArray(r[l],a.AmPm))&&o<2&&r[l]===a.AmPm[o]&&(r[l]=o,s.h=u(r[l],s.h));break;case"A":-1!==(o=b.inArray(r[l],a.AmPm))&&1<o&&r[l]===a.AmPm[o]&&(r[l]=o-2,s.h=u(r[l],s.h))}void 0!==r[l]&&(s[e[l].toLowerCase()]=parseInt(r[l],10))}if(s.f&&(s.m=s.f),0===s.m&&0===s.y&&0===s.d)return"&#160;";s.m=parseInt(s.m,10)-1,70<=(e=s.y)&&e<=99?s.y=1900+s.y:0<=e&&e<=69&&(s.y=2e3+s.y),s=new Date(s.y,s.m,s.d,s.h,s.i,s.s,s.u),0<d&&s.setTime(Number(Number(s)+6e4*d))}else s=new Date(parseFloat(r));else s=new Date(1e3*parseFloat(r));else s=new Date(s.y,s.m,s.d,s.h,s.i,s.s,s.u);if(a.userLocalTime&&0===d&&(0<(d-=(new Date).getTimezoneOffset())&&s.setTime(Number(Number(s)+6e4*d))),void 0===i)return s;a.masks.hasOwnProperty(i)?i=a.masks[i]:i||(i="Y-m-d"),d=s.getHours(),e=s.getMinutes(),r=s.getDate(),u=s.getMonth()+1,o=s.getTimezoneOffset(),l=s.getSeconds(),n=s.getMilliseconds();var p=s.getDay(),h=s.getFullYear(),f=(p+6)%7+1,g=(new Date(h,u-1,r)-new Date(h,0,1))/864e5,m=f<5?Math.floor((g+f-1)/7)+1:Math.floor((g+f-1)/7)||((new Date(h-1,0,1).getDay()+6)%7<4?53:52),v={d:c(r),D:a.dayNames[p],j:r,l:a.dayNames[p+7],N:f,S:a.S(r),w:p,z:g,W:m,F:a.monthNames[u-1+12],m:c(u),M:a.monthNames[u-1],n:u,t:"?",L:"?",o:"?",Y:h,y:String(h).substring(2),a:d<12?a.AmPm[0]:a.AmPm[1],A:d<12?a.AmPm[2]:a.AmPm[3],B:"?",g:d%12||12,G:d,h:c(d%12||12),H:c(d),i:c(e),s:c(l),u:n,e:"?",I:"?",O:(0<o?"-":"+")+c(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60,4),P:"?",T:(String(s).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\-+]\d{4})?)\b/g)||[""]).pop().replace(/[^\-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(s/1e3)};return i.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(e){return v.hasOwnProperty(e)?v[e]:e.substring(1)})},parseDateToNumber:function(e,r){var i=t.parseDate.call(this,e,r);return i instanceof Date?i.getTime():0},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},getGridComponentId:function(e){if(null==this.p||!this.p.id)return"";var t=this.p.id;switch(e){case 21:return t;case 0:return"gbox_"+t;case 8:return"gview_"+t;case 3:return"alertmod_"+t;case 43:return"rs_m"+t;case 45:return"cb_"+t;case 46:return"sopt_menu";default:return""}},getGridComponentIdSelector:function(e){return(e=t.getGridComponentId.call(this,e))?"#"+t.jqID(e):""},isHTMLElement:function(e){return"object"==typeof HTMLElement||"function"==typeof HTMLElement?e instanceof HTMLElement:null!=e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},getGridComponent:function(e,r){var i;if(r instanceof b||0<r.length)i=r[0];else{if(!t.isHTMLElement(r))return b();r=b(i=r)}switch(e){case 21:return r.hasClass("ui-jqgrid-bdiv")?r.children("div").children(".ui-jqgrid-btable"):b();case 14:return r.hasClass("ui-jqgrid-hdiv")?r.children("div").children(".ui-jqgrid-htable"):b();case 27:return r.hasClass("ui-jqgrid-sdiv")?r.children("div").children(".ui-jqgrid-ftable"):b();case 31:return r.hasClass("ui-jqgrid-hdiv")?r.children(".ui-jqgrid-htable"):b();case 36:return r.hasClass("ui-jqgrid-sdiv")?r.children(".ui-jqgrid-ftable"):b();case 18:return r.hasClass("ui-jqgrid-btable")&&null!=i.grid?b(i.grid.bDiv):b();case 12:return r.hasClass("ui-jqgrid-btable")&&null!=i.grid?b(i.grid.hDiv):b();case 25:return r.hasClass("ui-jqgrid-btable")&&null!=i.grid?b(i.grid.sDiv):b();default:return b()}},fixScrollOffsetAndhBoxPadding:function(){var e=this.grid;if(e){var r=this.p,i=e.bDiv,t=function(e){var t=b(e).children("div").first();t.css(t.hasClass("ui-jqgrid-hbox-rtl")?"padding-left":"padding-right",r.scrollOffset),e.scrollLeft=i.scrollLeft};0<b(i).width()&&(r.scrollOffset=i.offsetWidth-i.clientWidth,t(e.hDiv),e.sDiv&&t(e.sDiv))}},mergeCssClasses:function(){var e,t,r,i,a=b.makeArray(arguments),o={},l=[];for(e=0;e<a.length;e++)for(r=String(a[e]).replace(/[\t\r\n\f]/g," ").split(" "),t=0;t<r.length;t++)""===(i=r[t])||o.hasOwnProperty(i)||(o[i]=!0,l.push(i));return l.join(" ")},hasOneFromClasses:function(e,t){var r,i=b(e),a=String(t).replace(/[\t\r\n\f]/g," ").split(" "),o=a.length;for(r=0;r<o;r++)if(i.hasClass(a[r]))return!0;return!1},hasAllClasses:function(e,t){var r,i=b(e),a=String(t).replace(/[\t\r\n\f]/g," ").split(" "),o=a.length;for(r=0;r<o;r++)if(!i.hasClass(a[r]))return!1;return!0},detectRowEditing:function(e){var t,r,i,a=this.rows,o=this.p,l=b.isFunction;if(!this.grid||null==a||null==o||void 0===o.savedRow||0===o.savedRow.length)return null;for(t=0;t<o.savedRow.length;t++)if("number"==typeof(r=o.savedRow[t]).id&&"number"==typeof r.ic&&void 0!==r.name&&void 0!==r.v&&null!=a[r.id]&&a[r.id].id===e&&l(b.fn.jqGrid.restoreCell)){if(null!=(i=a[r.id])&&i.id===e)return{mode:"cellEditing",savedRow:r}}else if(r.id===e&&l(b.fn.jqGrid.restoreRow))return{mode:"inlineEditing",savedRow:r};return null},getCell:function(e,t){var r=this.grid,i=this.p;return r&&i?((e instanceof b||0<e.length)&&(e=e[0]),("object"==typeof HTMLTableRowElement||"function"==typeof HTMLTableRowElement)&&e instanceof HTMLTableRowElement&&null!=e.cells?(i=b(e.cells[t]),null!=(r=r.fbRows)&&t<r[0].cells.length?i.add(r[e.rowIndex].cells[t]):i):b()):b()},getDataFieldOfCell:function(e,r){var i=this.p,a=t.getCell.call(this,e,r);return i.treeGrid&&0<a.children("div.tree-wrap").length&&(a=a.children("span.cell-wrapperleaf,span.cell-wrapper")),i.colModel[r].autoResizable?a.children("span."+i.autoResizing.wrapperClassName):a},enumEditableCells:function(e,t,r){var i=this.grid,a=this.rows,o=this.p;if(null==i||null==a||null==o||null==e||null==e.rowIndex||!e.id||!b.isFunction(r))return null;var l,n,s,d,c,u,p=(a=o.colModel).length,h=e.rowIndex,f=(i=null!=(l=i.fbRows))?l[h]:null;for(i&&(e=this.rows[h]),l=0;l<p&&("cb"===(s=(n=a[l]).name)||"subgrid"===s||"rn"===s||(i&&!n.frozen&&(i=!1),d=(i?f:e).cells[l],(c=b(d)).hasClass("not-editable-cell")||(u=c.width(),!0===o.treeGrid&&s===o.ExpandColumn?(u-=c.children("div.tree-wrap").outerWidth(),c=c.children("span.cell-wrapperleaf,span.cell-wrapper").first()):u=0,s={rowid:e.id,iCol:l,iRow:h,cmName:s,cm:n,mode:t,td:d,tr:e,trFrozen:f,dataElement:c[0],dataWidth:u},n.edittype||(n.edittype="text"),n=n.editable,!0!==(n=b.isFunction(n)?n.call(this,s):n)&&"hidden"!==n))||(s.editable=n,!1!==r.call(this,s)));l++);},getEditedValue:function(r,e,i,a){var o,l,n,s,d,c=e.formatoptions||{},u=(l=e.editoptions||{}).custom_value,p="[name="+t.jqID(e.name)+"]",h=b(this);if("hidden"===a||"readonly"===a)return b(this).jqGrid("getCell",r.closest("tr.jqgrow").attr("id"),e.name);switch(e.edittype){case"checkbox":o=["Yes","No"],"string"==typeof l.value&&(o=l.value.split(":")),o=r.find("input[type=checkbox]").is(":checked")?o[0]:o[1];break;case"text":case"password":case"textarea":case"button":o=(n=r.find("input"+p+",textarea"+p)).val(),"date"===n.prop("type")&&3===String(o).split("-").length&&(l=c.newformat||h.jqGrid("getGridRes","formatter.date.newformat"),o=t.parseDate.call(this,"Y-m-d",o,l));break;case"select":n=r.find("select option:selected"),l.multiple?(s=[],d=[],n.each(function(){s.push(b(this).val()),d.push(b(this).text())}),o=s.join(","),i.text=d.join(",")):(o=n.val(),i.text=n.text()),i.value=o;break;case"custom":try{if(!b.isFunction(u))throw"e1";if(void 0===(o=u.call(this,r.find(".customelement"),"get")))throw"e2"}catch(e){switch(l=t.info_dialog,r=function(e){h.jqGrid("getGridRes",e)},String(e)){case"e1":n="function 'custom_value' "+r("edit.msg.nodefined");break;case"e2":break;default:n=e.message}l&&b.isFunction(l)?l.call(this,r("errors.errcap"),n,r("edit.bClose")):(b.isFunction(la.fatalError)?la.fatalError:alert)(n)}break;default:o=r.find("*"+p).text()}return o},guid:1,uidPref:"jqg",randId:function(e){return(e||t.uidPref)+t.guid++},getAccessor:function(e,t){var r,i,a=[];if(b.isFunction(t))return t(e);if(void 0===(r=e[t]))try{if("string"==typeof t&&(a=t.split(".")),i=a.length)for(r=e;r&&i--;)r=r[a.shift()]}catch(e){}return r},getXmlData:function(e,t,r){var i="string"==typeof t?t.match(/^(.*)\[(\w+)\]$/):null;return b.isFunction(t)?t(e):i&&i[2]?i[1]?b(i[1],e).attr(i[2]):b(e).attr(i[2]):void 0!==e?(e=b(e).find(t),r?e:0<e.length?b(e).text():void 0):void 0},cellWidth:function(){var e=b("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div></div></div>"),t=e.appendTo("body").find("td").width();return e.remove(),.1<Math.abs(t-5)},isCellClassHidden:function(e){var t=(e=b("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;' class='"+(e||"")+"'></td></tr></table></div></div></div>")).appendTo("body").find("td").is(":hidden");return e.remove(),t},cell_width:!0,ajaxOptions:{},from:function(a){var c=this;return new function(a,e){var d=this,g=a,k=!0,m=!1,l=e,n=/[\$,%]/g,p=null,q=null,r=0,v=!1,B="",z=[],w=Object.prototype.toString,x=!0;if("object"!=typeof a||!a.push)throw"data provides is not an array";return 0<a.length&&(x="object"==typeof a[0]),this._hasData=function(){return null!==g&&0!==g.length},this._getStr=function(e){var t=[];return m&&t.push("jQuery.trim("),t.push("String("+e+")"),m&&t.push(")"),k||t.push(".toUpperCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(e){return m&&(e=b.trim(e)),e=e.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),k?e:e.toUpperCase()},this._funcLoop=function(r){var i=[];return b.each(g,function(e,t){i.push(r(t))}),i},this._append=function(e){var t;for(l=null===l?"":l+(""===B?" && ":B),t=0;t<r;t++)l+="(";v&&(l+="!"),l+="("+e+")",v=!1,B="",r=0},this._setCommand=function(e,t){p=e,q=t},this._resetNegate=function(){v=!1},this._repeatCommand=function(e,t){return null===p?d:null!==e&&null!==t?p(e,t):null!==q&&x?p(q,e):p(e)},this._equals=function(e,t){return 0===d._compare(e,t,1)},this._compare=function(e,t,r){return void 0===r&&(r=1),void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:("[object Date]"===w.call(e)&&"[object Date]"===w.call(t)||k||"number"==typeof e||"number"==typeof t||(e=String(e),t=String(t)),e<t?-r:t<e?r:0)},this._performSort=function(){0!==z.length&&(g=d._doSort(g,0))},this._doSort=function(e,t){var r=z[t].by,i=z[t].dir,a=z[t].type,o=z[t].datefmt,l=z[t].sfunc;if(t===z.length-1)return d._getOrder(e,r,i,a,o,l);for(t++,r=d._getGroup(e,r,i,a,o),i=[],a=0;a<r.length;a++)for(l=d._doSort(r[a].items,t),o=0;o<l.length;o++)i.push(l[o]);return i},this._getOrder=function(e,i,r,a,o,l){var s,u,p=[],h=[],f="a"===r?1:-1;void 0===a&&(a="text"),u="float"===a||"number"===a||"currency"===a||"numeric"===a?function(e){return e=parseFloat(String(e).replace(n,"")),isNaN(e)?Number.NEGATIVE_INFINITY:e}:"int"===a||"integer"===a?function(e){return e?parseFloat(String(e).replace(n,"")):Number.NEGATIVE_INFINITY}:"date"===a||"datetime"===a?function(e){return t.parseDateToNumber.call(c,o,e)}:b.isFunction(a)?a:function(e){return e=null!=e?b.trim(String(e)):"",k?e:e.toUpperCase()},b.each(e,function(e,r){void 0===(s=""!==i?t.getAccessor(r,i):r)&&(s=""),s=u(s,r),h.push({vSort:s,data:r,index:e})}),b.isFunction(l)?h.sort(function(e,t){return l.call(c,e.vSort,t.vSort,f,e.data,t.data)}):h.sort(function(e,t){return d._compare(e.vSort,t.vSort,f)}),a=0;for(var g=e.length;a<g;)r=h[a].index,p.push(e[r]),a++;return p},this._getGroup=function(e,a,r,i,o){var l=[],n=null,s=null;return b.each(d._getOrder(e,a,r,i,o),function(e,r){var i=t.getAccessor(r,a);null==i&&(i=""),d._equals(s,i)||(s=i,null!==n&&l.push(n),n=d._group(a,i)),n.items.push(r)}),null!==n&&l.push(n),l},this.ignoreCase=function(){return k=!1,d},this.useCase=function(){return k=!0,d},this.trim=function(){return m=!0,d},this.noTrim=function(){return m=!1,d},this.execute=function(){var a=l,e=[];return null===a||(b.each(g,function(){(function(){eval("(function (context) { var intFunc = function (jQuery, self) { return "+a+"; }; return intFunc.call(context.item, context.jQuery, context.context); }(this))")&&e.push(this.item)}).call({item:this,jQuery:b,context:c})}),g=e),d},this.data=function(){return g},this.select=function(r){if(d.execute(),b.isFunction(r)){var i=[];return b.each(g,function(e,t){i.push(r(t))}),i}return d._hasData()?(d._performSort(),g):[]},this.hasMatch=function(){return!!d._hasData()&&(d.execute(),0<g.length)},this.andNot=function(e,t,r){return v=!v,d.and(e,t,r)},this.orNot=function(e,t,r){return v=!v,d.or(e,t,r)},this.not=function(e,t,r){return d.andNot(e,t,r)},this.and=function(e,t,r){return B=" && ",void 0===e?d:d._repeatCommand(e,t,r)},this.or=function(e,t,r){return B=" || ",void 0===e?d:d._repeatCommand(e,t,r)},this.orBegin=function(){return r++,d},this.orEnd=function(){return null!==l&&(l+=")"),d},this.isNot=function(e){return v=!v,d.is(e)},this.is=function(e){return d._append("this."+e),d._resetNegate(),d},this._compareValues=function(e,r,i,a,o){var l;l=x?r:"this",void 0===i&&(i=null);var s=i,u=void 0===o.stype?"text":o.stype;if(null!==i)switch(u){case"int":case"integer":s=String(s).replace(n,""),s=isNaN(Number(s))||""===s?"0":Number(s),l="parseInt("+l+"||0,10)",s=String(parseInt(s,10));break;case"float":case"number":case"currency":case"numeric":s=String(s).replace(n,""),s=isNaN(Number(s))||""===s?"0":Number(s),l="parseFloat("+l+"||0)",s=String(s);break;case"date":case"datetime":s=String(t.parseDateToNumber.call(c,o.newfmt||"Y-m-d",s)),l='jQuery.jgrid.parseDateToNumber.call(self,"'+o.srcfmt+'",'+l+")";break;default:l=d._getStr(l),s=d._getStr('"'+d._toStr(s)+'"')}return d._append(l+" "+a+" "+s),d._setCommand(e,r),d._resetNegate(),d},this.equals=function(e,t,r){return d._compareValues(d.equals,e,t,"==",r)},this.notEquals=function(e,t,r){return d._compareValues(d.equals,e,t,"!==",r)},this.isNull=function(e,t,r){return d._compareValues(d.equals,e,null,"===",r)},this.greater=function(e,t,r){return d._compareValues(d.greater,e,t,">",r)},this.less=function(e,t,r){return d._compareValues(d.less,e,t,"<",r)},this.greaterOrEquals=function(e,t,r){return d._compareValues(d.greaterOrEquals,e,t,">=",r)},this.lessOrEquals=function(e,t,r){return d._compareValues(d.lessOrEquals,e,t,"<=",r)},this.startsWith=function(e,t){var r=null==t?e:t;r=m?b.trim(r.toString()).length:r.toString().length;return x?d._append(d._getStr(e)+".substr(0,"+r+") == "+d._getStr('"'+d._toStr(t)+'"')):(null!=t&&(r=m?b.trim(t.toString()).length:t.toString().length),d._append(d._getStr("this")+".substr(0,"+r+") == "+d._getStr('"'+d._toStr(e)+'"'))),d._setCommand(d.startsWith,e),d._resetNegate(),d},this.endsWith=function(e,t){var r=null==t?e:t;r=m?b.trim(r.toString()).length:r.toString().length;return x?d._append(d._getStr(e)+".substr("+d._getStr(e)+".length-"+r+","+r+') == "'+d._toStr(t)+'"'):d._append(d._getStr("this")+".substr("+d._getStr("this")+'.length-"'+d._toStr(e)+'".length,"'+d._toStr(e)+'".length) == "'+d._toStr(e)+'"'),d._setCommand(d.endsWith,e),d._resetNegate(),d},this.contains=function(e,t){return x?d._append(d._getStr(e)+'.indexOf("'+d._toStr(t)+'",0) > -1'):d._append(d._getStr("this")+'.indexOf("'+d._toStr(e)+'",0) > -1'),d._setCommand(d.contains,e),d._resetNegate(),d},this.groupBy=function(e,t,r,i){return d._hasData()?d._getGroup(g,e,t,r,i):null},this.orderBy=function(e,t,r,i,a){return null==r&&(r="text"),null==i&&(i="Y-m-d"),null==a&&(a=!1),"desc"!==(t=null==t?"a":b.trim(t.toString().toLowerCase()))&&"descending"!==t||(t="d"),"asc"!==t&&"ascending"!==t||(t="a"),z.push({by:e,dir:t,type:r,datefmt:i,sfunc:a}),d},this.inSet=function(e,t,r){var i,a=void 0===r.stype?"text":r.stype;return i=d._getStr('"'+d._toStr(void 0===t?null:t)+'"'),"text"!==a?d._compareValues(d.equals,e,t,"==",r):(d._append("jQuery.inArray("+d._getStr(e)+","+i+".split(',')) >= 0"),d._setCommand(d.inSet,e),d._resetNegate(),d)},this.custom=function(e,t,r){return d._append("self.p.customSortOperations."+e+'.filter.call(self,{item:this,cmName:"'+t+'",searchValue:"'+r+'"})'),d._setCommand(d.custom,t),d._resetNegate(),d},d}("string"==typeof a?b.data(a):a,null)},serializeFeedback:function(e,t,r){var i=this;return i instanceof b&&0<i.length&&(i=i[0]),"string"==typeof r?r:"string"==typeof(t=b(i).triggerHandler(t,r))?t:(null!=t&&"object"==typeof t||(t=r),b.isFunction(e)?e.call(i,t):t)},fullBoolFeedback:function(e,t){var r=b.makeArray(arguments).slice(2),i=!1!==(i=b(this).triggerHandler(t,r))&&"stop"!==i;return b.isFunction(e)&&(!1===(r=e.apply(this,r))||"stop"===r)&&(i=!1),i},feedback:function(e,r,i,a){var o=this;if(o instanceof b&&0<o.length&&(o=o[0]),null==e||"string"!=typeof a||a.length<2)return null;var l="on"===a.substring(0,2)?"jqGrid"+r+a.charAt(2).toUpperCase()+a.substring(3):"jqGrid"+r+a.charAt(0).toUpperCase()+a.substring(1),n=b.makeArray(arguments).slice(4),s=e[a+i];return n.unshift(l),n.unshift(s),t.fullBoolFeedback.apply(o,n)},builderSortIcons:function(){var r=this,i=r.p,a=b(this).jqGrid("getGuiStyles","states.disabled"),e=function(e){return t.mergeCssClasses("ui-grid-ico-sort","ui-icon-"+e,"horizontal"===i.viewsortcols[1]?"ui-i-"+e:"",a,b(r).jqGrid("getIconRes","sort."+e),"ui-sort-"+i.direction)};return"<span class='s-ico"+(i.sortIconsBeforeText?" jqgrid-icons-first":"")+"' style='display:none'><span class='"+e("asc")+"'></span><span class='"+e("desc")+"'></span></span>"},builderFmButon:function(e,r,i,a,o){var l=this.p,n=b(this);return null==l?"":"<a id='"+e+"' class='"+t.mergeCssClasses("fm-button",n.jqGrid("getGuiStyles","dialog.fmButton"),n.jqGrid("getGuiStyles","dialog."+("right"===o?"rightCorner":"left"===o?"leftCorner":"defaultCorner")),"right"===a?"fm-button-icon-right":"left"===a?"fm-button-icon-left":"")+"' role='button' tabindex='0'>"+(i?"<span class='fm-button-icon "+(n.jqGrid("getIconRes",i)||i)+"'></span>":"")+(r?"<span class='fm-button-text'>"+r+"</span>":"")+"</a>"},convertOnSaveLocally:function(e,t,r,i,a,o){return null==this.p?e:b.isFunction(t.convertOnSave)?t.convertOnSave.call(this,{newValue:e,cm:t,oldValue:r,id:i,item:a,iCol:o}):("boolean"!=typeof r&&"number"!=typeof r||("boolean"!=typeof r||"checkbox"!==t.edittype&&"checkbox"!==t.formatter?"number"!=typeof r||isNaN(e)||("number"===t.formatter||"currency"===t.formatter?e=parseFloat(e):"integer"===t.formatter&&(e=parseInt(e,10))):(r=String(e).toLowerCase(),t=null!=t.editoptions&&"string"==typeof t.editoptions.value?t.editoptions.value.split(":"):["yes","no"],0<=b.inArray(r,["1","true",t[0].toLowerCase()])?e=!0:0<=b.inArray(r,["0","false",t[1].toLowerCase()])&&(e=!1))),e)},parseDataToHtml:function(e,r,i,a,o,l,n){var s,d,c,u,p,h,f,g,m,v,w,y,x,C,j,S,q,D,R,G,F,k,_,O,I,N=this,T=N.p,A=b(N),E=!1,M=[],z=[],P=!0!==T.altRows||A.jqGrid("isBootstrapGuiStyle")?"":T.altclass,B=!!T.grouping&&!0===T.groupingView.groupCollapse,H=parseInt(T.rowNum,10),V=b.fn.jqGrid,L=!0===T.treeGrid&&-1<T.treeANode?N.rows[T.treeANode].rowIndex+1:N.rows.length,W=N.formatCol;for(L<=1&&(T.rowIndexes={}),("local"===T.datatype&&!T.deselectAfterSort||T.multiPageSelection)&&(E=!0),l&&(H*=l+1),l=0;l<Math.min(e,H);l++){for(u=r[l],p=i[l],h=null!=a?a[l]:p,d=1==((s=1===o?0:o)+l)%2?P:"",E?T.multiselect?(c=-1!==b.inArray(u,T.selarrrow))&&null===T.selrow&&(T.selrow=u):c=u===T.selrow:c=!1,f=M.length,M.push(""),s=0;s<T.colModel.length;s++)switch(g=T.colModel[s].name,g){case"rn":M.push((k=s,_=l,O=T.page,I=T.rowNum,O=(parseInt(O,10)-1)*parseInt(I,10)+1+_,"<td role='gridcell' class='"+V.getGuiStyles.call(A,"rowNum","jqgrid-rownum")+"' "+W(k,_,O,null,_,!0)+">"+O+"</td>"));break;case"cb":M.push((G=void 0,G="&nbsp;",F=!(F=void 0),R={rowid:j=u,iRow:q=l,iCol:S=s,data:R=p,checked:D=c},b.isFunction(T.hasMultiselectCheckBox)&&(F=T.hasMultiselectCheckBox.call(N,R)),F&&(G=b.isFunction(T.checkboxHtml)?T.checkboxHtml.call(N,R):"<input type='checkbox' id='jqg_"+T.id+"_"+j+"' class='cbox' name='jqg_"+T.id+"_"+j+"'"+(D?" checked='checked' aria-checked='true'":" aria-checked='false'")+"/>"),"<td role='gridcell' "+W(S,q,"",null,j,!0)+">"+G+"</td>"));break;case"subgrid":M.push(V.addSubGridCell.call(A,s,l+o,u,p));break;default:M.push((m=u,v=p[g],w=s,y=l+o,x=h,C=p,v=N.formatter(m,v,w,x,"add",C),"<td role='gridcell' "+W(w,y,v,x,m,C)+">"+v+"</td>"))}T.grouping&&V.groupingPrepare&&!T.groupingView._locgr&&(V.groupingPrepare.call(A,p,l),b.isFunction(T.groupingView.groupCollapse)&&(B=T.groupingView.groupCollapse.call(N,{group:T.groupingView.groups[T.groupingView.groups.length-1],rowid:u,data:p}))),M[f]=N.constructTr(u,B,d,p,h,c),M.push("</tr>"),T.rowIndexes[u]=L,L++,T.grouping&&(z.push(M),M=[]),M.length>T.maxItemsToJoin&&(M=[M.join("")])}return T.grouping&&V.groupingRender&&(n&&(T.groupingView._locgr=!0),M=[V.groupingRender.call(A,z,H)],t.clearArray(z)),M},fillSelectOptions:function(e,t,r,i,a,o){var l,n,s,d=[],c=!1;if(s=function(e,t){if(0<t)return e},t){if("function"==typeof t&&(t=t()),"string"==typeof t)for(i=t.split(i),t=0;t<i.length;t++)2<(l=i[t].split(r)).length&&(l[1]=b.map(l,s).join(r)),d.push({value:l[0],innerHtml:l[1],selectValue:b.trim(l[0]),selectText:b.trim(l[1]),selected:!1}),""===l[0]&&(c=!0);else if("object"==typeof t)for(l in t)t.hasOwnProperty(l)&&d.push({value:l,innerHtml:t[l],selectValue:b.trim(l),selectText:b.trim(t[l]),selected:!1}),""===l&&(c=!0);if("string"==typeof o){for(s=a?b.map(o.split(","),function(e){return b.trim(e)}):[b.trim(o)],o=b.trim(o),t=0;t<d.length;t++)r=d[t],a||r.selectValue!==o||(n=r.selected=!0),a&&-1<b.inArray(r.selectValue,s)&&(n=r.selected=!0);if(!n)for(t=0;t<d.length;t++)r=d[t],a||r.selectText!==o||(r.selected=!0),a&&-1<b.inArray(r.selectText,s)&&(r.selected=!0)}for(t=0;t<d.length;t++)r=d[t],(a=document.createElement("option")).value=r.value,a.innerHTML=r.innerHtml,r.selected&&(a.selected=!0),e.appendChild(a);return c}},getMethod:function(e){return this.getAccessor(b.fn.jqGrid,e)},extend:function(e){b.extend(b.fn.jqGrid,e),this.no_legacy_api||b.fn.extend(e)}});var X=t.clearArray,H=t.jqID,Xa=t.getGridComponentIdSelector,Ya=t.getGridComponentId,Ha=t.getGridComponent,Aa=t.stripPref,wa=t.randId,pa=t.getAccessor,hb=t.convertOnSaveLocally,ib=t.stripHtml,pb=t.htmlEncode,La=t.htmlDecode,ra=t.mergeCssClasses,Y=t.hasOneFromClasses,R=function(){var e=b.makeArray(arguments);return e.unshift(""),e.unshift(""),e.unshift(this.p),t.feedback.apply(this,e)};b.fn.jqGrid=function(Re){var e,Ge=b.fn.jqGrid;if("string"==typeof Re){if(!(e=Ge[Re]))throw"jqGrid - No such method: "+Re;return e.apply(this,b.makeArray(arguments).slice(1))}return this.each(function(){if(!this.grid){var e,r,q=this,D=b(q),M=b.isFunction,z=b.isArray,S=b.extend,s=b.inArray,i=b.trim,G=b.each,c=Ge.setSelection,F=Ge.getGridRes,k=M(la.fatalError)?la.fatalError:alert,a=Re.locale||la.locale||"en-US",o=null!=ba[a]&&"boolean"==typeof ba[a].isRTL&&ba[a].isRTL?"rtl":"ltr",l=Re.iconSet||la.iconSet||("bootstrap"===(Re.guiStyle||la.guiStyle)||"bootstrapPrimary"===(Re.guiStyle||la.guiStyle)?"glyph":"jQueryUI"),n=Re.guiStyle||la.guiStyle||"jQueryUI",y=function(e){return Ge.getIconRes.call(q,e)},_=function(e,t){return D.jqGrid("getGuiStyles",e,t)};null==Re&&(Re={datatype:"local"}),void 0!==Re.datastr&&z(Re.datastr)&&(r=Re.datastr,Re.datastr=[]),void 0!==Re.data&&(e=Re.data,Re.data=[]),null!=t.formatter&&null!=t.formatter.unused||k("CRITICAL ERROR!!!\n\n\nOne uses probably\n\n\t$.extend($.jgrid.defaults, {...});\n\nto set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):\n\n\t$.extend(true, $.jgrid.defaults, {...});\n\nOne other possible reason:\n\nyou included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.\n\n\nSome options of jqGrid could still work, but another one will be broken."),void 0===Re.datatype&&void 0!==Re.dataType&&(Re.datatype=Re.dataType,delete Re.dataType),void 0===Re.mtype&&void 0!==Re.type&&(Re.mtype=Re.type,delete Re.type),q.p={iconSet:l};var P=S(!0,{height:"auto",page:1,rowNum:20,maxRowNum:1e4,autoresizeOnLoad:!1,columnsToReResizing:[],autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",minColWidth:33,maxColWidth:300,adjustGridWidth:!0,compact:!1,fixWidthOnShrink:!1},doubleClickSensitivity:250,minResizingWidth:10,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],additionalProperties:[],arrayReader:[],rowList:[],colNames:[],sortorder:"asc",threeStateSort:!1,sortname:"",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,singleSelectClickMode:"toggle",beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:function(e,t,r){if("abort"!==t&&"abort"!==r){var i=e.getResponseHeader("Content-Type"),a=e.responseText||"",o=function(e){try{var t,r=b.parseJSON(e),i=[];for(t in r)r.hasOwnProperty(t)&&"StackTrace"!==t&&i.push(t+": "+r[t]);e=i.join("<br />")}catch(e){}return e};"text/html"===i?a=function(e){var t,r=document.createElement("div");for(t=/<body[^>]*>([\s\S]*)<\/body\s*>/gim.exec(e),r.innerHTML=null!=t&&2===t.length?t[1]:e,t=(e=r.getElementsByTagName("script")).length;t--;)e[t].parentNode.removeChild(e[t]);e=r.innerHTML;try{""===b.trim(b(e).text())&&(e="")}catch(e){}return e}(a):"application/json"===i?a=o(a):"text/plain"===i&&(a=o(a)),500!==e.status&&0!==e.status&&(a=(t||r)+(r&&r!==t?": "+r:"")+" "+e.status+" "+e.statusText+(""!==a?"<hr />":"")+a),D.jqGrid("displayErrorMessage",a||t||r)}},loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,forceClientSorting:!1,multiselect:!1,multikey:!1,editurl:"clientArray",search:!1,caption:"",hidegrid:!0,hiddengrid:!1,useUnformattedDataForCellAttr:!0,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,iCol:-1,iRow:-1,nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,multiPageSelection:!1,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:16,multiselectWidth:16,multiselectPosition:"left",gridview:!0,rownumWidth:25,rownumbers:!1,pagerpos:"center",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,autoEncodeOnEdit:!1,remapColumns:[],cmNamesInputOrder:[],ajaxGridOptions:{},direction:o,toppager:!1,headertitles:!1,scrollTimeout:40,maxItemsToJoin:32768,data:[],lastSelectedData:[],quickEmpty:"quickest",_index:{},iColByName:{},iPropByName:{},reservedColumnNames:["rn","cb","subgrid"],grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1,commonIconClass:y("grouping.common"),plusicon:y("grouping.plus"),minusicon:y("grouping.minus")},ignoreCase:!0,cmTemplate:{},idPrefix:"",iconSet:l,guiStyle:n,locale:a,multiSort:!1,treeIcons:{commonIconClass:y("treeGrid.common"),plusLtr:y("treeGrid.plusLtr"),plusRtl:y("treeGrid.plusRtl"),minus:y("treeGrid.minus"),leaf:y("treeGrid.leaf")},subGridOptions:{commonIconClass:y("subgrid.common"),plusicon:y("subgrid.plus"),minusicon:y("subgrid.minus")}},la,{navOptions:S(!0,{commonIconClass:y("nav.common"),editicon:y("nav.edit"),addicon:y("nav.add"),delicon:y("nav.del"),searchicon:y("nav.search"),refreshicon:y("nav.refresh"),viewicon:y("nav.view"),saveicon:y("nav.save"),cancelicon:y("nav.cancel"),buttonicon:y("nav.newbutton")},t.nav||{}),actionsNavOptions:S(!0,{commonIconClass:y("actions.common"),editicon:y("actions.edit"),delicon:y("actions.del"),saveicon:y("actions.save"),cancelicon:y("actions.cancel")},t.actionsNav||{}),formEditing:S(!0,{commonIconClass:y("form.common"),prevIcon:y("form.prev"),nextIcon:y("form.next"),saveicon:[!0,"left",y("form.save")],closeicon:[!0,"left",y("form.undo")]},t.edit||{}),searching:S(!0,{commonIconClass:y("search.common"),findDialogIcon:y("search.search"),resetDialogIcon:y("search.reset"),queryDialogIcon:y("search.query")},t.search||{}),formViewing:S(!0,{commonIconClass:y("form.common"),prevIcon:y("form.prev"),nextIcon:y("form.next"),closeicon:[!0,"left",y("form.cancel")]},t.view||{}),formDeleting:S(!0,{commonIconClass:y("form.common"),delicon:[!0,"left",y("form.del")],cancelicon:[!0,"left",y("form.cancel")]},t.del||{})},Re||{}),x=function(e){var r=t.getRes(P,e);return void 0!==r?r:F.call(D,"defaults."+e)};if(P.recordpos=P.recordpos||("rtl"===P.direction?"left":"right"),P.subGridOptions.openicon="rtl"===P.direction?y("subgrid.openRtl"):y("subgrid.openLtr"),P.autoResizing.widthOfVisiblePartOfSortIcon=void 0!==P.autoResizing.widthOfVisiblePartOfSortIcon?P.autoResizing.widthOfVisiblePartOfSortIcon:"fontAwesome"===P.iconSet?13:12,P.datatype=void 0!==P.datatype?P.datatype:void 0!==e||null==P.url?"local":null!=P.jsonReader&&"object"==typeof P.jsonReader?"json":"xml",P.jsonReader=P.jsonReader||{},P.url=P.url||"",P.cellsubmit=void 0!==P.cellsubmit?P.cellsubmit:void 0===P.cellurl?"clientArray":"remote",P.gridview=void 0!==P.gridview?P.gridview:null==P.afterInsertRow,void 0!==e&&(P.data=e,Re.data=e),void 0!==r&&(P.datastr=r,Re.datastr=r),"TABLE"!==q.tagName.toUpperCase())k("Element is not a table!");else if(""===q.id&&D.attr("id",wa()),void 0!==document.documentMode&&document.documentMode<=5)k("Grid can not be used in this ('quirks') mode!");else{D.empty().attr("tabindex","0"),(q.p=P).id=q.id,P.idSel="#"+H(q.id),P.gBoxId=Ya.call(q,0),P.gBox=Xa.call(q,0),P.gViewId=Ya.call(q,8),P.gView=Xa.call(q,8),P.rsId=Ya.call(q,43),P.rs=Xa.call(q,43),P.cbId=Ya.call(q,45),P.cb=Xa.call(q,45);var O=t.fixScrollOffsetAndhBoxPadding,d=function(e){var t,r={},i=e.length;for(t=0;t<i;t++)r[e[t].name]=t;return r},u=function(e){var t,r,i={},a=e.length;for(t=0;t<a;t++)i["string"==typeof(r=e[t])?r:r.name]=t;return i},B=function(){var e,t,r={};for(this.p.rowIndexes=r,t=0;t<this.rows.length;t++)e=this.rows[t],b(e).hasClass("jqgrow")&&(r[e.id]=e.rowIndex)},p=function(e){var t=b(this).data("pageX");t?(t=(t=String(t).split(";"))[t.length-1],b(this).data("pageX",t+";"+e.pageX)):b(this).data("pageX",e.pageX)},V=function(e,t){return e=parseInt(e,10),isNaN(e)?t||0:e},L={headers:[],cols:[],footers:[],dragStart:function(e,r,i,a){var o=b(this.bDiv),l=o.closest(P.gBox).offset();a=a.offset().left+("rtl"===P.direction?0:this.headers[e].width+(t.cell_width?0:V(P.cellLayout,0))-2),this.resizing={idx:e,startX:a,sOL:a,moved:!1,delta:a-r.pageX},this.curGbox=b(P.rs),this.curGbox.prependTo("body"),this.curGbox.css({display:"block",left:a,top:i[1]+l.top+1,height:i[2]}),this.curGbox.css("height",i[2]-(this.curGbox.outerHeight()-this.curGbox.height())+"px"),this.curGbox.data("idx",e),this.curGbox.data("delta",a-r.pageX),p.call(this.curGbox,r),R.call(Ha(21,o)[0],"resizeStart",r,e),document.onselectstart=function(){return!1},b(document).on("mousemove.jqGrid",function(e){if(L.resizing)return L.dragMove(e),!1}).on("mouseup.jqGrid"+P.id,function(){if(L.resizing)return L.dragEnd(),!1})},dragMove:function(e){var t=this.resizing;if(t){var r=e.pageX+t.delta-t.startX,i=this.headers;e=i[t.idx];var a="ltr"===P.direction?e.width+r:e.width-r,o=((P.colModel[t.idx]||{}).autoResizing||{}).minColWidth||P.minResizingWidth;t.moved=!0,o<a&&(null==this.curGbox&&(this.curGbox=b(P.rs)),this.curGbox.css({left:t.sOL+r}),!0===P.forceFit?(t=i[t.idx+P.nv],(r="ltr"===P.direction?t.width-r:t.width+r)>P.autoResizing.minColWidth&&(e.newWidth=a,t.newWidth=r)):(this.newWidth="ltr"===P.direction?P.tblwidth+r:P.tblwidth-r,e.newWidth=a))}},resizeColumn:function(e,t,r){var i=this.headers,a=this.footers,o=i[e],l=o.newWidth||o.width,n=Ha(21,this.bDiv),s=Ha(14,this.hDiv).children("thead").children("tr").first()[0].cells;l=parseInt(l,10);P.colModel[e].width=l,o.width=l,s[e].style.width=l+"px",this.cols[e].style.width=l+"px",this.fbRows&&(b(this.fbRows[0].cells[e]).css("width",l),b(Ha(31,this.fhDiv)[0].rows[0].cells[e]).css("width",l),P.footerrow&&b(Ha(36,this.fsDiv)[0].rows[0].cells[e]).css("width",l)),0<a.length&&(a[e].style.width=l+"px"),!0!==r&&O.call(n[0]),!0===P.forceFit?(l=(i=i[e+P.nv]).newWidth||i.width,i.width=l,s[e+P.nv].style.width=l+"px",this.cols[e+P.nv].style.width=l+"px",0<a.length&&(a[e+P.nv].style.width=l+"px"),P.colModel[e+P.nv].width=l):(P.tblwidth=this.newWidth||P.tblwidth,!0!==r&&(this.hDiv.scrollLeft=this.bDiv.scrollLeft,P.footerrow&&(this.sDiv.scrollLeft=this.bDiv.scrollLeft))),P.autowidth||void 0!==P.widthOrg&&"auto"!==P.widthOrg&&"100%"!==P.widthOrg||!0===r||Ge.setGridWidth.call(n,this.newWidth+P.scrollOffset,!1),t||R.call(n[0],"resizeStop",l,e)},dragEnd:function(){this.hDiv.style.cursor="default",this.resizing&&(null!==this.resizing&&!0===this.resizing.moved&&(b(this.headers[this.resizing.idx].el).removeData("autoResized"),this.resizeColumn(this.resizing.idx,!1)),b(P.rs).removeData("pageX"),this.resizing=!1,setTimeout(function(){b(P.rs).css("display","none").prependTo(P.gBox)},P.doubleClickSensitivity)),this.curGbox=null,document.onselectstart=function(){return!0},b(document).off("mousemove.jqGrid mouseup.jqGrid"+P.id)},populateVisible:function(){var e=this,t=b(e),r=e.grid,i=r.bDiv,a=b(i);if(r.timer&&clearTimeout(r.timer),r.timer=null,a=a.height()){var o,l;if(e.rows.length)try{l=(o=e.rows[1])&&b(o).outerHeight()||r.prevRowHeight}catch(e){l=r.prevRowHeight}if(l){r.prevRowHeight=l,o=P.rowNum,r.scrollTop=i.scrollTop;i=r.scrollTop;var n,s,d,c=Math.round(t.position().top)-i;l*=o,(t=c+t.height())<a&&c<=0&&(void 0===P.lastpage||(parseInt((t+i+l-1)/l,10)||0)<=P.lastpage)&&(s=parseInt((a-t+l-1)/l,10)||1,0<=t||s<2||!0===P.scroll?(n=(Math.round((t+i)/l)||0)+1,c=-1):c=1),0<c&&(n=(parseInt(i/l,10)||0)+1,s=(parseInt((i+a)/l,10)||0)+2-n,d=!0),!s||P.lastpage&&(n>P.lastpage||1===P.lastpage||n===P.page&&n===P.lastpage)||(r.hDiv.loading?r.timer=setTimeout(function(){r.populateVisible.call(e)},P.scrollTimeout):(P.page=n,d&&(r.selectionPreserver.call(e),r.emptyRows.call(e,!1,!1)),r.populate.call(e,s)))}}},scrollGrid:function(){if(P.scroll){var e=this.scrollTop;void 0===L.scrollTop&&(L.scrollTop=0),e!==L.scrollTop&&(L.scrollTop=e,L.timer&&clearTimeout(L.timer),L.timer=setTimeout(function(){L.populateVisible.call(q)},P.scrollTimeout))}return L.hDiv.scrollLeft=this.scrollLeft,P.footerrow&&(L.sDiv.scrollLeft=this.scrollLeft),!1},selectionPreserver:function(){var t=b(this),r=P.selrow,i=P.selarrrow?b.makeArray(P.selarrrow):null,a=this.grid.bDiv,o=a.scrollLeft,l=function(){var e;if(P.selrow=null,!P.multiPageSelection){if(X(P.selarrrow),P.multiselect&&i&&0<i.length)for(e=0;e<i.length;e++)i[e]!==r&&c.call(t,i[e],!1,null);r&&c.call(t,r,!1,null)}a.scrollLeft=o,t.off(".selectionPreserver",l)};t.on("jqGridGridComplete.selectionPreserver",l)}};q.grid=L,R.call(q,"beforeInitGrid"),P.iColByName=d(P.colModel),P.iPropByName=u(P.additionalProperties);var C;o=b("<div class='"+_("gView","ui-jqgrid-view")+"' role='grid' aria-multiselectable='"+!!P.multiselect+"'></div>"),a=t.msie;P.direction=i(P.direction.toLowerCase()),-1===s(P.direction,["ltr","rtl"])&&(P.direction="ltr"),C=P.direction,b(o).insertBefore(q),D.removeClass("scroll").appendTo(o),e=b("<div class='"+_("gBox","ui-jqgrid")+"'></div>"),b(e).attr({id:P.gBoxId,dir:C}).insertBefore(o),b(o).attr("id",P.gViewId).appendTo(e),b("<div class='"+_("overlay","jqgrid-overlay")+"' id='lui_"+P.id+"'></div>").insertBefore(o),b("<div class='"+_("loading","loading")+"' id='load_"+P.id+"'>"+x("loadtext")+"</div>").insertBefore(o),D.attr({role:"presentation","aria-labelledby":"gbox_"+q.id});var h=function(e,r,i,a,o,l){var n,s=P.colModel[e],d=i,c=s.classes,u=s.align?"text-align:"+s.align+";":"",p=function(e){return"string"==typeof e?e.replace(/\'/g,"&#39;"):e},h=" aria-describedby='"+P.id+"_"+s.name+"'";if(!0===s.hidden&&(u+="display:none;"),0===r)u+="width: "+L.headers[e].width+"px;";else if((M(s.cellattr)||"string"==typeof s.cellattr&&null!=t.cellattr&&M(t.cellattr[s.cellattr]))&&(e=M(s.cellattr)?s.cellattr:t.cellattr[s.cellattr],P.useUnformattedDataForCellAttr&&null!=l?d=l[s.name]:s.autoResizable&&(d="<span class='"+P.autoResizing.wrapperClassName+"'>",d=i.substring(d.length,i.length-7)),"string"==typeof(a=e.call(q,o,d,a,s,l))))for(a=a.replace(/\n/g,"&#xA;");;){if(null===(i=/^\s*(\w+[\w|\-]*)\s*=\s*([\"|\'])(.*?)\2(.*)/.exec(a))||i.length<5)return!n&&s.title&&(n=d),h+" style='"+p(u)+"'"+(c?" class='"+p(c)+"'":"")+(n?" title='"+p(n)+"'":"");switch(o=i[3],a=i[4],i[1].toLowerCase()){case"class":c=c?c+" "+o:o;break;case"title":n=o;break;case"style":u+=o;break;default:h+=" "+i[1]+"="+i[2]+o+i[2]}}return(s=(""!==u?"style='"+u+"'":"")+(void 0!==c?" class='"+c+"'":"")+(s.title&&d?" title='"+ib(i).replace(/\'/g,"&apos;")+"'":""))+h},f=function(e){return null==e||""===e?"&#160;":P.autoencode?pb(e):String(e)},W=function(e){var t=(l=P.treeReader).loaded,r=l.leaf_field,i=l.expanded_field,a=function(e){return!0===e||"true"===e||"1"===e};if("nested"===P.treeGridModel&&!e[r]){var o=parseInt(e[l.left_field],10),l=parseInt(e[l.right_field],10);e[r]=l===o+1}void 0!==e[t]&&(e[t]=a(e[t])),e[r]=a(e[r]),e[i]=a(e[i])},g=function(){var e,t,r,i,a,o,l,n,s,d,c=P.data,u=c.length,p=P.localReader,h=P.additionalProperties,f=p.cell,b=P.arrayReaderInfos;if("local"!==P.datatype||!0!==p.repeatitems){if(P.treeGrid)for(e=0;e<u;e++)W(c[e])}else for(i=!1===P.keyName?M(p.id)?p.id.call(q,c):p.id:P.keyName,isNaN(i)?M(i)||null==P.arrayReaderInfos[i]||(a=P.arrayReaderInfos[i].order):a=Number(i),e=0;e<u;e++){for(n in t=c[e],r=f&&pa(t,f)||t,s=z(r),l={},b)b.hasOwnProperty(n)&&(d=b[n],o=pa(r,s?d.order:d.name),1===d.type&&(null!=(d=h[d.index])&&M(d.convert)&&(o=d.convert(o,r))),void 0!==o&&(l[n]=o));void 0!==l[i]?t=void 0!==l[i]?l[i]:wa():(void 0===(t=pa(t,z(t)?a:i))&&(t=pa(r,z(r)?a:i)),void 0===t&&(t=wa())),t=String(t),l[p.id]=t,P.treeGrid&&W(l),S(c[e],l)}},m=function(){var e,t,r,i,a=P.data.length;for(e=!1===P.keyName||P.loadonce?P.localReader.id:P.keyName,P._index={},t=0;t<a;t++)i=P.data[t],void 0===(r=pa(i,e))&&(r=String(wa()),void 0===i[e]&&(i[e]=r)),P._index[r]=t},U=function(e,t){var r,i,a,o=P.colModel,l=o.length,n=function(e){return null==e||""===e?"&#160;":pb(e)},s=function(e){return null==e||""===e?"&#160;":String(e)};for(r=0;r<l;r++)(i=o[r]).cellBuilder=null,e||(a={colModel:i,gid:P.id,pos:r},void 0===i.formatter?i.cellBuilder=P.autoencode?n:s:"string"==typeof i.formatter&&null!=b.fn.fmatter&&M(b.fn.fmatter.getCellBuilder)?i.cellBuilder=b.fn.fmatter.getCellBuilder.call(q,i.formatter,a,t||"add"):M(i.getCellBuilder)&&(i.cellBuilder=i.getCellBuilder.call(q,a,t||"add")))},I=function(e,r,i,a){var o=b(this),l=new Date,n=P.datatype,s="local"!==n&&P.loadonce||"xmlstring"===n||"jsonstring"===n,d=("xmlstring"===n||"xml"===n)&&b.isXMLDoc(e),c=P.localReader,u=pa;if(e&&("xml"!==n||d)){switch(-1!==P.treeANode||P.scroll?r=1<r?r:1:(L.emptyRows.call(this,!1,!0),r=1),s&&(X(P.data),X(P.lastSelectedData),P._index={},P.grouping&&null!=P.groupingView&&(P.groupingView.groups=[],P.groupingView._locgr=!1),P.localReader.id="_id_"),P.reccount=0,n){case"xml":case"xmlstring":c=P.xmlReader,u=t.getXmlData;break;case"json":case"jsonp":case"jsonstring":c=P.jsonReader}var p,h,f,g,m,v,w,y,x,C,j,S={},q=(A=P.colModel).length,D=P.arrayReaderInfos,G={},F=function(t){return function(e){return null!==(e=null!=e&&M(e.getAttribute)?e.getAttribute(t):null)?e:void 0}},k=function(t){return function(){var e=G[t];if(null!=e)return 0<(e=e.childNodes).length?e[0].nodeValue:void 0}};P.page=V(u(e,c.page),P.page),P.lastpage=V(u(e,c.total),1),P.records=V(u(e,c.records)),M(c.userdata)?P.userData=c.userdata.call(this,e)||{}:d?u(e,c.userdata,!0).each(function(){P.userData[this.getAttribute("name")]=b(this).text()}):P.userData=u(e,c.userdata)||{},U();var _={},O=P.additionalProperties,I=function(e,t){d&&"string"==typeof t&&(/^\w+$/.test(t)?_[e]=k(t):/^\[\w+\]$/.test(t)&&(_[e]=F(t.substring(1,t.length-1))))},N=function(e){var t=e.name,r=d?e.xmlmap||t:("local"===n&&!P.dataTypeOrg||"jsonstring"===n||"json"===n||"jsonp"===n)&&e.jsonmap||t;!1!==P.keyName&&!0===e.key&&(P.keyName=t),("string"==typeof r||M(r))&&(_[t]=r),M(r)||I(t,r)};for(p=0;p<q;p++)N(A[p]);for(q=O.length,p=0;p<q;p++)"object"==typeof(y=O[p])&&null!=y?N(y):I(y,y);if(g=!1===P.keyName?M(c.id)?c.id.call(this,e):c.id:P.keyName,isNaN(g)?M(g)||(D[g]&&(m=D[g].order),d&&("string"==typeof g&&/^\[\w+\]$/.test(g)?g=F(g.substring(1,g.length-1)):"string"==typeof g&&/^\w+$/.test(g)&&(g=k(g)))):m=Number(g),f=u(e,c.root,!0),c.row)if(1===f.length&&"string"==typeof c.row&&/^\w+$/.test(c.row)){for(q=[],C=(x=f[0].childNodes).length,y=0;y<C;y++)1===(j=x[y]).nodeType&&j.nodeName===c.row&&q.push(j);f=q}else f=u(f,c.row,!0);null==f&&z(e)&&(f=e),f||(f=[]),0<(e=f.length)&&P.page<=0&&(P.page=1),N=parseInt(P.rowNum,10),a&&(N*=a+1);var T,A=[],E=[];q=[];for(p=0;p<e;p++){if(T=f[p],h=c.repeatitems&&c.cell&&u(T,c.cell,!0)||T,v=c.repeatitems&&(d||z(h)),S={},G={},d&&!v&&null!=h)for(C=(x=h.childNodes).length,y=0;y<C;y++)1===(j=x[y]).nodeType&&(G[j.nodeName]=j);for(w in D)D.hasOwnProperty(w)&&(y=D[w],v?(x=h[y.order],d&&null!=x&&(x=x.textContent||x.text)):x=null!=_[w]&&"string"!=typeof _[w]?_[w](h):u(h,"string"==typeof _[w]?_[w]:y.name),1===y.type&&(null!=(y=O[y.index])&&M(y.convert)&&(x=y.convert(x,h))),void 0!==x&&(S[w]=x));if(void 0!==S[g]?T=void 0!==S[g]?S[g]:wa():(void 0===(T=u(T,z(T)?m:g))&&(T=u(h,z(h)?m:g)),void 0===T&&(T=wa())),void 0===S[g]&&(S[g]=T),T=String(T),v=P.idPrefix+T,P.treeGrid&&W(S),p<N)E.push(v),A.push(h),q.push(S);else if(!s)break;(s||!0===P.treeGrid)&&(S._id_=T,P.data.push(S),P._index[S._id_]=P.data.length-1)}if(!s||!P.forceClientSorting||!0===P.treeGrid){if(r=t.parseDataToHtml.call(this,e,E,q,A,r,a,s),U(!0),a=-1<P.treeANode?P.treeANode:0,c=b(this.tBodies[0]),!0===P.treeGrid&&0<a?b(this.rows[a]).after(r.join("")):P.scroll?c.append(r.join("")):(null==this.firstElementChild||void 0!==document.documentMode&&document.documentMode<=9?c.html(c.html()+r.join("")):this.firstElementChild.innerHTML+=r.join(""),this.grid.cols=this.rows[0].cells),P.grouping&&B.call(this),!0===P.subGrid)try{Ge.addSubGrid.call(o,P.iColByName.subgrid)}catch(e){}if(!1===P.gridview||M(P.afterInsertRow))for(p=0;p<Math.min(e,N);p++)R.call(this,"afterInsertRow",E[p],q[p],A[p]);if(P.totaltime=new Date-l,0<p&&0===P.records&&(P.records=e),X(r),!0===P.treeGrid)try{Ge.setTreeNode.call(o,a+1,p+a+1)}catch(e){}P.reccount=Math.min(e,N),P.treeANode=-1,P.userDataOnFooter&&Ge.footerData.call(o,"set",P.userData,!0),s&&(P.records=e,P.lastpage=Math.ceil(e/N)),i||this.updatepager(!1,!0),function(){var e,t,r=b.fn.fmatter;for(e=0;e<P.colModel.length;e++)"string"==typeof(t=P.colModel[e].formatter)&&null!=r&&M(r[t])&&M(r[t].pageFinalization)&&r[t].pageFinalization.call(this,e)}.call(this)}}},j=function(e){var t=e.outerWidth();return t<=0&&(t=b(this).closest(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",b(document.body).append("<div id='testpg' class='"+_("gBox","ui-jqgrid")+"' style='font-size:"+t+";visibility:hidden;margin:0;padding:0;' ></div>"),b(e).clone().appendTo("#testpg"),t=b("#testpg>.ui-pg-table").width(),b("#testpg").remove()),0<t&&e.parent().width(t),t},N=function(){this.grid.hDiv.loading=!0,P.hiddengrid||Ge.progressBar.call(b(this),{method:"show",loadtype:P.loadui,htmlcontent:x("loadtext")})},T=function(){this.grid.hDiv.loading=!1,Ge.progressBar.call(b(this),{method:"hide",loadtype:P.loadui})},A=function(i){var a=this,o=b(a),r=a.grid;if(!r.hDiv.loading){var e,l=P.scroll&&!1===i,n={},s=P.prmNames;P.page<=0&&(P.page=Math.min(1,P.lastpage)),null!==s.search&&(n[s.search]=P.search),null!==s.nd&&(n[s.nd]=(new Date).getTime()),(isNaN(parseInt(P.rowNum,10))||parseInt(P.rowNum,10)<=0)&&(P.rowNum=P.maxRowNum),null!==s.rows&&(n[s.rows]=P.rowNum),null!==s.page&&(n[s.page]=P.page),null!==s.sort&&(n[s.sort]=P.sortname),null!==s.order&&(n[s.order]=P.sortorder),null!==P.rowTotal&&null!==s.totalrows&&(n[s.totalrows]=P.rowTotal);var d=M(P.loadComplete),c=d?P.loadComplete:null,u=0;if(1<(i=i||1)?null!==s.npage?(n[s.npage]=i,u=i-1,i=1):c=function(e){P.page++,r.hDiv.loading=!1,d&&P.loadComplete.call(a,e),A.call(a,i-1)}:null!==s.npage&&delete P.postData[s.npage],P.grouping&&Ge.groupingSetup){Ge.groupingSetup.call(o);var p,h,f,g,m=P.groupingView,v="";for(p=0;p<m.groupField.length;p++){for(h=m.groupField[p],f=0;f<P.colModel.length;f++)(g=P.colModel[f]).name===h&&g.index&&(h=g.index);v+=h+" "+m.groupOrder[p]+", "}n[s.sort]=v+n[s.sort]}S(P.postData,n);var w=P.scroll?a.rows.length-1:1,y=function(){O.call(a);var e=o.width(),t=o.closest(".ui-jqgrid-view").width(),r=o.css("height");t<e&&0===P.reccount?o.css("height","1px"):"0"!==r&&"0px"!==r&&o.css("height",""),P.autowidth||void 0!==P.widthOrg&&"auto"!==P.widthOrg&&"100%"!==P.widthOrg||Ge.setGridWidth.call(o,P.tblwidth+P.scrollOffset,!1)},x=function(){var e;if(P.autoresizeOnLoad)Ge.autoResizeAllColumns.call(o);else for(e=0;e<P.columnsToReResizing.length;e++)Ge.autoResizeColumn.call(o,P.columnsToReResizing[e]);X(P.columnsToReResizing)},C=(s=function(){R.call(a,"loadComplete",e),x(),o.triggerHandler("jqGridAfterLoadComplete",[e]),T.call(a),P.datatype="local",P.datastr=null,y()},function(e){o.triggerHandler("jqGridLoadComplete",[e]),c&&c.call(a,e),x(),o.triggerHandler("jqGridAfterLoadComplete",[e]),l&&r.populateVisible.call(a),1===i&&T.call(a),y()}),j=function(){var e=function(){var e=b(this),o=P.multiSort?[]:"",r={},l=!1,c={},n=[],s=[],d=F.call(D,"formatter.date.srcformat"),u=F.call(D,"formatter.date.newformat");if(!z(P.data))return{};P.multiSort&&$(o,r);var p,h,f=!!P.grouping&&P.groupingView,i=function(e,t,r){var i=e.index||e.name,a=e.sorttype||"text";if(c[e.name]={reader:P.dataTypeOrg?e.name:e.jsonmap||e.name,iCol:t,stype:a,srcfmt:"",newfmt:"",sfunc:e.sortfunc||null,isAddProp:!0===r},"date"!==a&&"datetime"!==a||(e.formatter&&"string"==typeof e.formatter&&"date"===e.formatter?(t=e.formatoptions&&e.formatoptions.srcformat?e.formatoptions.srcformat:d,r=e.formatoptions&&e.formatoptions.newformat?e.formatoptions.newformat:u):t=r=e.datefmt||"Y-m-d",c[e.name].srcfmt=t,c[e.name].newfmt=r),P.grouping)for(h=0,p=f.groupField.length;h<p;h++)e.name===f.groupField[h]&&(n[h]=c[i],s[h]=i);P.multiSort||l||e.index!==P.sortname&&e.name!==P.sortname||(o=e.name,l=!0)};if(G(P.colModel,function(e){i(this,e)}),G(P.additionalProperties,function(e){i("string"==typeof this?{name:this}:this,e,!0)}),P.treeGrid)return Ge.SortTree.call(e,o,P.sortorder,null!=c[o]&&c[o].stype?c[o].stype:"text",null!=c[o]&&c[o].srcfmt?c[o].srcfmt:""),!1;var g={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return"OR"===t?e.orNot().contains:e.andNot().contains},bw:function(e){return e.startsWith},bn:function(e,t){return"OR"===t?e.orNot().startsWith:e.andNot().startsWith},en:function(e,t){return"OR"===t?e.orNot().endsWith:e.andNot().endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return"OR"===t?e.orNot().inSet:e.andNot().inSet},in:function(e){return e.inSet},nu:function(e){return e.isNull},nn:function(e,t){return"OR"===t?e.orNot().isNull:e.andNot().isNull}},m=t.from.call(this,P.data);if(P.ignoreCase&&(m=m.ignoreCase()),!0===P.search)if(v=P.postData.filters)"string"==typeof v&&(v=b.parseJSON(v)),function e(t){var r,i,a,o,l,n,s,d=0;if(null!=t.groups){for((i=t.groups.length&&"OR"===t.groupOp.toString().toUpperCase())&&m.orBegin(),r=0;r<t.groups.length;r++){0<d&&i&&m.or();try{e(t.groups[r])}catch(e){k(e)}d++}i&&m.orEnd()}if(null!=t.rules)try{for((a=t.rules.length&&"OR"===t.groupOp.toString().toUpperCase())&&m.orBegin(),r=0;r<t.rules.length;r++)l=t.rules[r],o=t.groupOp.toString().toUpperCase(),g[l.op]&&l.field?(0<d&&o&&"OR"===o&&(m=m.or()),null!=(s=c[l.field])&&(n=s.reader,m=g[l.op](m,o)(M(n)?'jQuery.jgrid.getAccessor(this,jQuery("'+P.idSel+'")[0].p.colModel['+s.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+n+"')",l.data,c[l.field]))):null!=P.customSortOperations&&null!=P.customSortOperations[l.op]&&M(P.customSortOperations[l.op].filter)&&(m=m.custom(l.op,l.field,l.data)),d++;a&&m.orEnd()}catch(e){k(e)}}(v);else try{var a=c[P.postData.searchField];m=g[P.postData.searchOper](m)(M(a.reader)?'jQuery.jgrid.getAccessor(this,jQuery("'+P.idSel+'")[0].p.colModel['+a.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+a.reader+"')",P.postData.searchString,c[P.postData.searchField])}catch(e){}if(P.grouping)for(h=0;h<p;h++)m.orderBy(s[h],f.groupOrder[h],n[h].stype,n[h].srcfmt);P.multiSort?G(o,function(){m.orderBy(this,r[this],c[this].stype,c[this].srcfmt,c[this].sfunc)}):o&&P.sortorder&&l&&m.orderBy(P.sortname,"DESC"===P.sortorder.toUpperCase()?"d":"a",c[o].stype,c[o].srcfmt,c[o].sfunc),P.lastSelectedData=m.select();var v=parseInt(P.rowNum,10),w=(a=P.lastSelectedData.length,parseInt(P.page,10)),y=Math.ceil(a/v),x={};if(P.grouping&&P.groupingView._locgr){var C,j,S;if(P.groupingView.groups=[],P.footerrow&&P.userDataOnFooter){for(j in P.userData)P.userData.hasOwnProperty(j)&&(P.userData[j]=0);S=!0}for(C=0;C<a;C++){if(S)for(j in P.userData)P.userData.hasOwnProperty(j)&&(P.userData[j]+=parseFloat(P.lastSelectedData[C][j]||0));Ge.groupingPrepare.call(e,P.lastSelectedData[C],C,v)}}return c=m=null,x[(e=P.localReader).total]=y,x[e.page]=w,x[e.records]=a,x[e.root]=P.lastSelectedData.slice((w-1)*v,w*v),x[e.userdata]=P.userData,x}.call(a);I.call(a,e,w,1<i,u),C(e)};if(R.call(a,"beforeRequest"))if(M(P.datatype))P.datatype.call(a,P.postData,"load_"+P.id,w,i,u);else switch(n=P.datatype.toLowerCase(),b(L.eDiv).hide(),n){case"json":case"jsonp":case"xml":case"script":b.ajax(S({url:P.url,type:P.mtype,dataType:n,data:t.serializeFeedback.call(q,P.serializeGridData,"jqGridSerializeGridData",P.postData),success:function(e,t,r){P.jqXhr=null,b(L.eDiv).hide(),M(P.beforeProcessing)&&!1===P.beforeProcessing.call(a,e,t,r)?T.call(a):(I.call(a,e,w,1<i,u),C(e),(P.loadonce||P.treeGrid)&&(P.dataTypeOrg=P.datatype,P.datatype="local",P.forceClientSorting&&j()))},error:function(e,t,r){P.jqXhr=null,M(P.loadError)&&P.loadError.call(a,e,t,r),1===i&&T.call(a)},beforeSend:function(e,t){var r=!0;if(M(P.loadBeforeSend)&&(r=P.loadBeforeSend.call(a,e,t)),void 0===r&&(r=!0),!1===r)return!1;P.jqXhr=e,N.call(a)}},t.ajaxOptions,P.ajaxGridOptions));break;case"xmlstring":N.call(a),e="string"==typeof P.datastr?b.parseXML(P.datastr):P.datastr,I.call(a,e),s(),P.forceClientSorting&&j();break;case"jsonstring":N.call(a),e=P.datastr&&"string"==typeof P.datastr?b.parseJSON(P.datastr):P.datastr,I.call(a,e),s(),P.forceClientSorting&&j();break;case"local":case"clientside":N.call(a),P.datatype="local",j()}}},E=function(e){var t=this.grid;b(P.cb,t.hDiv).prop("checked",e),P.frozenColumns&&b(P.cb,t.fhDiv).prop("checked",e)};r=function(e,d){var r,i,a,o,l,n,s,c=_("states.hover"),u=_("states.disabled"),p="<td class='ui-pg-button "+u+"'><span class='ui-separator'></span></td>",h="",f="<table style='table-layout:auto;white-space: pre;"+("left"===P.pagerpos?"margin-right:auto;":"right"===P.pagerpos?"margin-left:auto;":"margin-left:auto;margin-right:auto;")+"' class='ui-pg-table'><tbody><tr>",g="",m=function(e,t,r){return!!R.call(q,"onPaging",e,{newPage:t,currentPage:V(P.page,1),lastPage:V(P.lastpage,1),currentRowNum:V(P.rowNum,10),newRowNum:r})&&(P.selrow=null,P.multiselect&&(P.multiPageSelection||X(P.selarrrow),E.call(q,!1)),X(P.savedRow),!0)};if(d+="_"+e,r="pg_"+e,i=e+"_left",a=e+"_center",o=e+"_right",b("#"+H(e)).append("<div id='"+r+"' class='ui-pager-control' role='group'><table class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+i+"' style='text-align:left;"+(void 0!==P.pagerLeftWidth?"width:"+P.pagerLeftWidth+"px;":"")+"'></td><td id='"+a+"' style='text-align:center;white-space:pre;"+(void 0!==P.pagerCenterWidth?"width:"+P.pagerCenterWidth+"px;":"")+"'></td><td id='"+o+"' style='text-align:right;"+(void 0!==P.pagerRightWidth?"width:"+P.pagerRightWidth+"px;":"")+"'></td></tr></tbody></table></div>").attr("dir","ltr"),r="#"+H(r),0<P.rowList.length){for(g="<td dir='"+C+"'>",i=x("pgrecs"),g+="<select class='"+_("pager.pagerSelect","ui-pg-selbox")+"' "+(i?"title='"+i+"'":"")+">",i=0;i<P.rowList.length;i++)1===(a=P.rowList[i].toString().split(":")).length&&(a[1]=a[0]),g+="<option value='"+a[0]+"'"+(V(P.rowNum,0)===V(a[0],0)?" selected='selected'":"")+">"+a[1]+"</option>";g+="</select></td>"}if("rtl"===C&&(f+=g),!0===P.pginput&&(h="<td dir='"+C+"'>"+t.format(x("pgtext")||"","<input aria-label='Page No.' class='"+_("pager.pagerInput","ui-pg-input")+"' type='text' size='2' maxlength='7' value='0'/>","<span id='sp_1_"+e+"'>0</span>")+"</td>"),e="#"+H(e),!0===P.pgbuttons){o=(a=["first","prev","next","last"]).slice();var v=_("pager.pagerButton","ui-pg-button");for("rtl"===C&&a.reverse(),i=0;i<a.length;i++)f+=(l=a[i],n=o[i],void 0,s=x("pg"+l),"<td role='button' tabindex='0' id='"+l+d+"' class='"+v+"' "+(s?"title='"+s+"'":"")+"><span class='"+y("pager."+n)+"'></span></td>"),1===i&&(f+=""!==h?p+h+p:"")}else""!==h&&(f+=h);"ltr"===C&&(f+=g),f+="</tr></tbody></table>",!0===P.viewrecords&&b("td"+e+"_"+P.recordpos,r).append("<span dir='"+C+"' style='text-align:"+P.recordpos+"' class='ui-paging-info'></span>");var w=b("td"+e+"_"+P.pagerpos,r);w.append(f),p=j.call(this,w.children(".ui-pg-table")),P._nvtd=[],P._nvtd[0]=p?Math.floor((P.width-p)/2):Math.floor(P.width/3),P._nvtd[1]=0,f=null,b(".ui-pg-selbox",r).on("change",function(){var e=V(this.value,10),t=Math.round(P.rowNum*(P.page-1)/e-.5)+1;return m("records",t,e)&&(P.page=t,P.rowNum=e,P.pager&&b(".ui-pg-selbox",P.pager).val(e),P.toppager&&b(".ui-pg-selbox",P.toppager).val(e),A.call(q)),!1}),!0===P.pgbuttons&&(b(".ui-pg-button",r).hover(function(){Y(this,u)?this.style.cursor="default":(b(this).addClass(c),this.style.cursor="pointer")},function(){Y(this,u)||(b(this).removeClass(c),this.style.cursor="default")}),b("#first"+H(d)+", #prev"+H(d)+", #next"+H(d)+", #last"+H(d)).click(function(){if(Y(this,u))return!1;var e=V(P.page,1),t=e,r=this.id,i=V(P.lastpage,1),a=!1,o=!0,l=!0,n=!0,s=!0;return 0===i||1===i?(e<=1&&(l=o=!1),s=n=!1):1<i&&1<=e?1===e?l=o=!1:e===i&&(s=n=!1):1<i&&0===e&&(s=n=!1,e=i-1),this.id==="first"+d&&o&&(r="first",t=1,a=!0),this.id==="prev"+d&&l&&(r="prev",t=e-1,a=!0),this.id==="next"+d&&n&&(r="next",t=e+1,a=!0),this.id==="last"+d&&s&&(r="last",t=i,a=!0),m(r,t,V(P.rowNum,10))&&(P.page=t,a&&A.call(q)),!1})),!0===P.pginput&&b("input.ui-pg-input",r).on("keypress.jqGrid",function(e){e=e.charCode||e.keyCode||0;var t=V(b(this).val(),1);return 13===e?(m("user",t,V(P.rowNum,10))&&(b(this).val(t),P.page=0<b(this).val()?b(this).val():P.page,A.call(q)),!1):this}),w.children(".ui-pg-table").on("keydown.jqGrid",function(e){13===e.which&&(0<(e=w.find(":focus")).length&&e.trigger("click"))})};var v,$=function(r,i,e){if(G((P.sortname+" "+P.sortorder).split(","),function(){var e=b.trim(this).split(" ");2===e.length&&r.push(e[0])}),null!=e){var t=b.inArray(e.index||e.name,r);""!==e.lso&&t<0?r.push(e.index||e.name):""===e.lso&&0<=t&&r.splice(t,1)}G(P.colModel,function(){var e,t=this.index||this.name;this.lso&&(e=this.lso.split("-"),b.inArray(t,r)<0&&r.push(t),i[t]=e[e.length-1])})},w=function(e,t,r,i,a){var o,l,n,s,d,c,u,p,h,f,g,m,v,w=this.grid,y=P.colModel[t],x=_("states.disabled");if(null!=y&&y.sortable&&!(0<P.savedRow.length)){if(r||(P.lastsort===t&&""!==P.sortname?(P.sortorder="asc"===P.sortorder?"desc":"desc"===P.sortorder?"asc":y.firstsortorder||"asc",y.lso?"asc"===y.lso?y.lso+="-desc":"desc"===y.lso?y.lso+="-asc":"asc-desc"!==y.lso&&"desc-asc"!==y.lso||!P.threeStateSort&&!P.multiSort||(y.lso=""):y.lso=y.firstsortorder||"asc"):y.lso=P.sortorder=y.firstsortorder||"asc",P.page=1),P.multiSort)o=t,l=a,s="",d=P.colModel[o],c=_("states.disabled"),u=P.frozenColumns?b(l):b(q.grid.headers[o].el),p=(n=u.find("span.s-ico")).children("span.ui-icon-asc"),h=n.children("span.ui-icon-desc"),f=p,g=h,m=[],v={},u.find("span.ui-grid-ico-sort").addClass(c),u.attr("aria-selected","false"),d.lso?(n.show(),"desc"===(n=(n=d.lso.split("-"))[n.length-1])&&(f=h,g=p),f.removeClass(c).css("display",""),P.showOneSortIcon&&g.hide(),u.attr("aria-selected","true")):P.viewsortcols[0]||n.hide(),$(m,v,d),G(m,function(){0<s.length&&(s+=", "),s+=this+" "+v[this],P.sortorder=v[this]}),P.sortname=s.substring(0,s.length-P.sortorder.length-1);else{if(i){if(P.lastsort===t&&P.sortorder===i&&!r)return;P.sortorder=i}y=w.headers,r=w.fhDiv,i=y[P.lastsort]?b(y[P.lastsort].el):b();var C=(a=P.frozenColumns?b(a):b(y[t].el)).find("span.s-ico"),j=C.children("span.ui-icon-"+P.sortorder),S=C.children("span.ui-icon-"+("asc"===P.sortorder?"desc":"asc"));y=P.colModel[P.lastsort];i.find("span.ui-grid-ico-sort").addClass(x),i.attr("aria-selected","false"),P.frozenColumns&&(r.find("span.ui-grid-ico-sort").addClass(x),r.find("th").attr("aria-selected","false")),P.viewsortcols[0]||(P.lastsort!==t?(P.frozenColumns&&r.find("span.s-ico").hide(),i.find("span.s-ico").hide(),C.show()):""===P.sortname&&C.show()),P.lastsort!==t&&"true"===i.data("autoResized")&&(null!=y&&null!=y.autoResizing&&y.autoResizing.compact||P.autoResizing.compact)&&P.columnsToReResizing.push(P.lastsort),y=P.colModel[t],C.css("display",""),""!==y.lso?(j.removeClass(x).css("display",""),P.showOneSortIcon&&S.removeClass(x).hide(),a.attr("aria-selected","true")):(a.attr("aria-selected","false"),P.threeStateSort&&(P.sortorder="",P.viewsortcols[0]||C.hide())),P.lastsort!==t&&"true"===a.data("autoResized")&&(null!=y&&null!=y.autoResizing&&y.autoResizing.compact||P.autoResizing.compact)&&P.columnsToReResizing.push(t),e=e.substring(5+P.id.length+1),P.sortname=y.index||e}R.call(this,"onSortCol",P.sortname,t,P.sortorder)?("local"===P.datatype?P.deselectAfterSort&&!P.multiPageSelection&&Ge.resetSelection.call(b(this)):P.multiPageSelection||(P.selrow=null,P.multiselect&&(E.call(this,!1),X(P.selarrrow))),X(P.savedRow),P.scroll&&(x=w.bDiv.scrollLeft,L.emptyRows.call(this,!0,!1),w.hDiv.scrollLeft=x),P.subGrid&&"local"===P.datatype&&b("td.sgexpanded","#"+H(P.id)).each(function(){b(this).trigger("click")}),A.call(this),P.lastsort=t,P.sortname!==e&&t&&(P.lastsort=t)):P.lastsort=t}};-1===s(P.multikey,["shiftKey","altKey","ctrlKey"])&&(P.multikey=!1),P.keyName=!1,P.sortorder=P.sortorder.toLowerCase(),t.cell_width=t.cellWidth();var Q=t.cmTemplate;for(l=0;l<P.colModel.length;l++)v="string"==typeof(n=P.colModel[l]).template?null==Q||"object"!=typeof Q[n.template]&&!b.isFunction(Q[n.template])?{}:Q[n.template]:n.template,M(v)&&(v=v.call(q,{cm:n,iCol:l})),n=S(!0,{},P.cmTemplate,v||{},n),!1===P.keyName&&!0===n.key&&(P.keyName=n.name),P.colModel[l]=n;for(l=0;l<P.additionalProperties.length;l++)n=P.additionalProperties[l],!1===P.keyName&&!0===n.key&&(P.keyName=n.name);if(0===P.colNames.length)for(l=0;l<P.colModel.length;l++)P.colNames[l]=void 0!==P.colModel[l].label?P.colModel[l].label:P.colModel[l].name;if(P.colNames.length!==P.colModel.length)k(F.call(D,"errors.model"));else{if(!0===P.grouping&&(P.scroll=!1,P.rownumbers=!1,P.treeGrid=!1,P.gridview=!0),P.subGrid)try{Ge.setSubGrid.call(D)}catch(e){}if(!P.multiselect||"left"!==P.multiselectPosition&&"right"!==P.multiselectPosition||(l="left"===P.multiselectPosition?"unshift":"push",P.colNames[l]("<input id='"+P.cbId+"' class='cbox' type='checkbox' aria-checked='false'/>"),P.colModel[l]({name:"cb",width:t.cell_width?P.multiselectWidth+P.cellLayout:P.multiselectWidth,labelClasses:"jqgh_cbox",classes:"td_cbox",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),P.rownumbers&&(P.colNames.unshift(""),P.colModel.unshift({name:"rn",width:t.cell_width?P.rownumWidth+P.cellLayout:P.rownumWidth,labelClasses:"jqgh_rn",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),P.iColByName=d(P.colModel),P.xmlReader=S(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},P.xmlReader),P.jsonReader=S(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},P.jsonReader),P.localReader=S(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},P.localReader),P.scroll&&(P.pgbuttons=!1,P.pginput=!1,P.rowList=[]),!0===P.treeGrid){try{Ge.setTreeGrid.call(D)}catch(e){}"local"!==P.datatype&&(P.localReader={id:"_id_"}),P.iPropByName=u(P.additionalProperties)}if(function(){var e,t,r=P.remapColumns,i=P.colModel,a=i.length,o=[];for(e=0;e<a;e++)t=i[e].name,s(t,P.reservedColumnNames)<0&&o.push(t);if(null!=r)for(i=o.slice(),e=0;e<r.length;e++)o[e]=i[r[e]];P.cmNamesInputOrder=o}(),function(){var e,t=P.colModel;e=P.cmNamesInputOrder;var r,i,a,o,l=P.additionalProperties,n=e.length;for(P.arrayReaderInfos={},r=P.arrayReaderInfos,o=0;o<n;o++)i=e[o],s(i,P.reservedColumnNames)<0&&!r.hasOwnProperty(i)&&(void 0!==(a=P.iColByName[i])?r[i]={name:t[a].name,index:a,order:o,type:0}:void 0!==(a=P.iPropByName[i])?r[i]={name:t[a].name,index:a,order:o,type:1}:i===(P.prmNames.rowidName||"rowid")&&(r[i]={index:a,type:2}));for(n=t.length,e=0;e<n;e++)i=t[e].name,s(i,P.reservedColumnNames)<0&&!r.hasOwnProperty(i)&&(r[i]={name:i,index:e,order:o,type:0},o++);for(n=l.length,e=0;e<n;e++)null==(i=l[e])||r.hasOwnProperty(i)||("object"==typeof i&&"string"===b.type(i.name)&&(i=i.name),r[i]={name:i,index:e,order:o,type:1},o++)}(),P.data.length&&(g.call(q),m()),!0===P.shrinkToFit&&!0===P.forceFit)for(l=P.colModel.length-1;0<=l;l--)if(!0!==P.colModel[l].hidden){P.colModel[l].resizable=!1;break}var J,K,Z,ee,te;d=[],u=[];ee=[],v="<thead><tr class='ui-jqgrid-labels' role='row'>";Q="<tbody><tr style='display:none;'>";var re=_("states.hover"),ie=_("states.disabled");if(P.multiSort)for(d=P.sortname.split(","),l=0;l<d.length;l++)ee=i(d[l]).split(" "),d[l]=i(ee[0]),u[l]=ee[1]?i(ee[1]):P.sortorder||"asc";for(l=0;l<P.colNames.length;l++){switch(n=P.colModel[l],i=P.headertitles||n.headerTitle?" title='"+ib("string"==typeof n.headerTitle?n.headerTitle:P.colNames[l])+"'":"",v+="<th id='"+P.id+"_"+n.name+"' class='"+_("colHeaders","ui-th-column ui-th-"+C+" "+(n.labelClasses||""))+"'"+i+">",i=n.index||n.name,n.labelAlign){case"left":ee="text-align:left;";break;case"right":ee="text-align:right;"+(!1===n.sortable?"":"padding-right:"+P.autoResizing.widthOfVisiblePartOfSortIcon+"px;");break;case"likeData":ee=void 0===n.align||"left"===n.align?"text-align:left;":"right"===n.align?"text-align:right;"+(!1===n.sortable?"":"padding-right:"+P.autoResizing.widthOfVisiblePartOfSortIcon+"px;"):"";break;default:ee=""}v+="<div id='jqgh_"+P.id+"_"+n.name+"'"+(a?" class='ui-th-div-ie'":"")+(""===ee?"":" style='"+ee+"'")+" role='columnheader'>",ee=n.autoResizable&&"actions"!==n.formatter?"<span class='"+P.autoResizing.wrapperClassName+"'>"+P.colNames[l]+"</span>":P.colNames[l],P.sortIconsBeforeText?(v+=(P.builderSortIcons||t.builderSortIcons).call(q,l),v+=ee):(v+=ee,v+=(P.builderSortIcons||t.builderSortIcons).call(q,l)),v+="</div></th>",Q+="<td></td>",n.width=n.width?parseInt(n.width,10):150,"boolean"!=typeof n.title&&(n.title=!0),n.lso="",i===P.sortname&&(P.lastsort=l,n.lso=P.sortorder||n.firstsortorder||"asc"),P.multiSort&&(-1!==(ee=s(i,d))&&(n.lso=u[ee]))}v+="</tr></thead>",Q+="</tr></tbody>",l=b("<table class='"+_("hTable","ui-jqgrid-htable")+"' style='width:1px' role='presentation' aria-labelledby='gbox_"+P.id+"'>"+v+Q+"</table>"),b(l[0].tHead).children("tr").children("th").hover(function(){b(this).addClass(re)},function(){b(this).removeClass(re)}),P.multiselect&&b(P.cb,l).on("click",function(){var t,e,r=_("states.select"),i=[],a=P.iColByName.cb,o=function(e,t){b(e)[t?"addClass":"removeClass"](r).attr(t?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"}),void 0!==a&&b(e.cells[a]).children("input.cbox").prop("checked",t)},l=L.fbRows,n=ie+" ui-subgrid jqgroup jqfoot jqgfirstrow jqgskipselect",s=P._index;if(X(P.selarrrow),this.checked){if(t=!0,P.selrow=1<q.rows.length?q.rows[q.rows.length-1].id:null,P.multiPageSelection&&("local"===P.datatype||P.treeGrid)&&null!=P.data&&0<P.data.length&&null!=s)for(e in s)s.hasOwnProperty(e)&&P.selarrrow.push(P.idPrefix+e)}else t=!1,P.selrow=null;var d=t?P.selarrrow:i;b(q.rows).each(function(e){Y(this,n)||(o(this,t),b.inArray(this.id,d)<0&&d.push(this.id),l&&o(l[e],t))}),R.call(q,"onSelectAll",t?P.selarrrow:i,t)}),!0===P.autowidth&&(i=Math.floor(b(e).innerWidth()),P.width=0<i?i:"nw"),isNaN(P.width)?isNaN(parseFloat(P.width))||(P.width=parseFloat(P.width)):P.width=Number(P.width),P.widthOrg=P.width,ye=0,xe=t.cell_width?0:V(P.cellLayout,0),Ce=0,je=V(P.scrollOffset,0),Se=!1,qe=0,De=t.isCellClassHidden,G(P.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),P.grouping&&P.autowidth){var e=s(this.name,P.groupingView.groupField);0<=e&&P.groupingView.groupColumnShow.length>e&&(this.hidden=!P.groupingView.groupColumnShow[e])}this.widthOrg=me=V(this.width,0),!1!==this.hidden||De(this.classes)||(ye+=me+xe,this.fixed?qe+=me+xe:Ce++)}),isNaN(P.width)&&(P.width=ye+(!1!==P.shrinkToFit||isNaN(P.height)?0:je)),L.width=P.width,P.tblwidth=ye,!1===P.shrinkToFit&&!0===P.forceFit&&(P.forceFit=!1),!0===P.shrinkToFit&&0<Ce&&(ve=L.width-xe*Ce-qe,isNaN(P.height)||(ve-=je,Se=!0),ye=0,G(P.colModel,function(e){!1!==this.hidden||De(this.classes)||this.fixed||(this.width=me=Math.round(ve*this.width/(P.tblwidth-xe*Ce-qe)),ye+=me,ge=e)}),we=0,Se?L.width-qe-(ye+xe*Ce)!==je&&(we=L.width-qe-(ye+xe*Ce)-je):Se||1===Math.abs(L.width-qe-(ye+xe*Ce))||(we=L.width-qe-(ye+xe*Ce)),P.colModel[ge].width+=we,P.tblwidth=ye+we+xe*Ce+qe,P.tblwidth>P.width&&(P.colModel[ge].width-=P.tblwidth-parseInt(P.width,10),P.tblwidth=P.width)),b(e).css("width",L.width+"px").append("<div class='"+_("resizer","ui-jqgrid-resize-mark")+"' id='"+P.rsId+"'>&#160;</div>"),b(P.rs).on("selectstart",function(){return!1}).click(p).dblclick(function(e){var t=b(this).data("idx"),r=b(this).data("pageX"),i=P.colModel[t];if(null==r||null==i)return!1;r=String(r).split(";");var a=parseFloat(r[0]),o=parseFloat(r[1]);return 2===r.length&&(5<Math.abs(a-o)||5<Math.abs(e.pageX-a)||5<Math.abs(e.pageX-o))||(R.call(q,"resizeDblClick",t,i,e)&&i.autoResizable&&Ge.autoResizeColumn.call(D,t),R.call(q,"afterResizeDblClick",{iCol:t,cm:i,cmName:i.name})),!1}),b(o).css("width",L.width+"px");var ae="";P.footerrow&&(ae+="<table role='presentation' style='width:1px' class='"+_("gridFooter","ui-jqgrid-ftable")+"'><tbody><tr role='row' class='"+_("rowFooter","footrow footrow-"+C)+"'>");var oe="<tr class='jqgfirstrow' role='row' style='height:auto'>";if(P.disableClick=!1,b("th",l[0].tHead.rows[0]).each(function(e){var t=P.colModel[e],r=t.name,i=b(this),a=i.children("div"),o=a.children("span.s-ico"),l=P.showOneSortIcon;J=t.width,void 0===t.resizable&&(t.resizable=!0),t.resizable?(K=document.createElement("span"),b(K).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+C).on("selectstart",function(){return!1}),i.addClass(P.resizeclass)):K="",i.css("width",J+"px").prepend(K);var n="";!(K=null)===t.hidden&&(i.css("display","none"),n="display:none;"),oe+="<td role='gridcell' "+(t.classes?"class='"+t.classes+"' ":"")+"style='height:0;width:"+J+"px;"+n+"'></td>",L.headers[e]={width:J,el:this},"boolean"!=typeof(Z=t.sortable)&&(Z=t.sortable=!0),"cb"!==r&&"subgrid"!==r&&"rn"!==r&&Z&&P.viewsortcols[2]&&a.addClass("ui-jqgrid-sortable"),Z&&(P.multiSort?(r="desc"===t.lso?"asc":"desc",P.viewsortcols[0]?(o.css("display",""),t.lso&&(o.children("span.ui-icon-"+t.lso).removeClass(ie),l&&o.children("span.ui-icon-"+r).hide())):t.lso&&(o.css("display",""),o.children("span.ui-icon-"+t.lso).removeClass(ie),l&&o.children("span.ui-icon-"+r).hide())):(r="desc"===P.sortorder?"asc":"desc",P.viewsortcols[0]?(o.css("display",""),e===P.lastsort&&(o.children("span.ui-icon-"+P.sortorder).removeClass(ie),l&&o.children("span.ui-icon-"+r).hide())):e===P.lastsort&&""!==t.lso&&(o.css("display",""),o.children("span.ui-icon-"+P.sortorder).removeClass(ie),l&&o.children("span.ui-icon-"+r).hide()))),P.footerrow&&(ae+="<td role='gridcell' "+h(e,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(e){var t,r,i=b(this),a=i.closest(".ui-jqgrid-hdiv").hasClass("frozen-div");if(1===b(e.target).closest("th>span.ui-jqgrid-resize").length)return null!=(t=P.iColByName[(this.id||"").substring(P.id.length+1)])&&(!0===P.forceFit&&(P.nv=function(e){var t,r=e;for(t=e+1;t<P.colModel.length;t++)if(!0!==P.colModel[t].hidden){r=t;break}return r-e}(t)),L.dragStart(t,e,(r=[i.position().left+i.outerWidth()],"rtl"===P.direction&&(r[0]=P.width-r[0]),r[0]-=a?0:L.bDiv.scrollLeft,r.push(b(L.hDiv).position().top),r.push(b(L.bDiv).offset().top-b(L.hDiv).offset().top+b(L.bDiv).height()+(L.sDiv?b(L.sDiv).height():0)),r),i)),!1}).click(function(e){if(P.disableClick)return P.disableClick=!1;var t,r,i="th.ui-th-column>div";i=P.viewsortcols[2]?i+".ui-jqgrid-sortable":i+">span.s-ico>span.ui-grid-ico-sort";return 1===(e=b(e.target).closest(i)).length?(P.viewsortcols[2]||(t=!0,r=e.hasClass("ui-icon-desc")?"desc":"asc"),null!=(e=P.iColByName[(this.id||"").substring(P.id.length+1)])&&w.call(q,b("div",this)[0].id,e,t,r,this),!1):void 0}),P.sortable&&b.fn.sortable)try{Ge.sortableColumns.call(D,b(l[0].tHead.rows[0]))}catch(e){}P.footerrow&&(ae+="</tr></tbody></table>"),oe+="</tr>",D.html("<tbody>"+oe+"</tbody>"),D.addClass(_("grid","ui-jqgrid-btable"+(!0===P.altRows&&D.jqGrid("isBootstrapGuiStyle")?" table-striped":"")));var le=!(!P.caption||!0!==P.hiddengrid),ne=(o=b("<div class='ui-jqgrid-hbox"+("rtl"===C?"-rtl":"")+"'></div>"),i=_("top"),_("bottom"));L.hDiv=document.createElement("div"),b(L.hDiv).css({width:L.width+"px"}).addClass(_("hDiv","ui-jqgrid-hdiv")).append(o).scroll(function(){var e=b(this).next(".ui-jqgrid-bdiv")[0];return e&&(e.scrollLeft=this.scrollLeft),!1}),b(o).append(l),l=null,le&&b(L.hDiv).hide(),P.rowNum=parseInt(P.rowNum,10),(isNaN(P.rowNum)||P.rowNum<=0)&&(P.rowNum=P.maxRowNum),P.pager&&("string"==typeof P.pager&&"#"!==P.pager.substr(0,1)?(l=P.pager,o=b("#"+H(P.pager))):!0===P.pager?(l=wa(),(o=b("<div id='"+l+"'></div>")).appendTo("body"),P.pager="#"+H(l)):l=(o=b(P.pager)).attr("id"),0<o.length?(o.css({width:L.width+"px"}).addClass(_("pager.pager","ui-jqgrid-pager "+ne)).appendTo(e),le&&o.hide(),r.call(q,l,""),P.pager="#"+H(l)):P.pager=""),!1===P.cellEdit&&!0===P.hoverrows&&D.on("mouseover.jqGrid",function(e){te=b(e.target).closest("tr.jqgrow"),"ui-subgrid"!==b(te).attr("class")&&b(te).addClass(re)}).on("mouseout.jqGrid",function(e){te=b(e.target).closest("tr.jqgrow"),b(te).removeClass(re)});var se,de,ce,ue=function(e){var t,r;do{if(0<(t=b(e).closest("td")).length){if(r=(e=t.parent()).parent().parent(),e.is(".jqgrow")&&(r[0]===this||r.is("table.ui-jqgrid-btable")&&(r[0].id||"").replace("_frozen","")===this.id))break;e=t.parent()}}while(0<t.length);return t};D.before(L.hDiv).click(function(e){var i=_("states.select"),r=e.target,a=ue.call(q,r),o=a.parent();if(0!==o.length&&!Y(o,ie)){se=o[0].id;var l=b(r).hasClass("cbox")&&b(r).is(":enabled")&&!Y(r,ie),n=R.call(q,"beforeSelectRow",se,e),s=null!=(s=t.detectRowEditing.call(q,se))&&"cellEditing"!==s.mode;if("A"!==r.tagName&&(!s||l))if(de=a[0].cellIndex,ce=a.html(),R.call(q,"onCellSelect",se,de,ce,e),!0===P.cellEdit)if(P.multiselect&&l&&n)c.call(D,se,!0,e);else{se=o[0].rowIndex;try{Ge.editCell.call(D,se,de,!0)}catch(e){}}else if(n)if(P.multikey)e[P.multikey]?c.call(D,se,!0,e):P.multiselect&&l&&(l=b("#jqg_"+H(P.id)+"_"+se).is(":checked"),b("#jqg_"+H(P.id)+"_"+se).prop("checked",!l));else if(P.multiselect&&P.multiboxonly){if(!l){var d=P.frozenColumns?P.id+"_frozen":"";b(P.selarrrow).each(function(e,t){var r=Ge.getGridRowById.call(D,t);r&&b(r).removeClass(i),b("#jqg_"+H(P.id)+"_"+H(t)).prop("checked",!1),d&&(b("#"+H(t),"#"+H(d)).removeClass(i),b("#jqg_"+H(P.id)+"_"+H(t),"#"+H(d)).prop("checked",!1))}),X(P.selarrrow)}c.call(D,se,!0,e)}else r=P.selrow,c.call(D,se,!0,e),"toggle"!==P.singleSelectClickMode||P.multiselect||r!==se||(q.grid.fbRows&&(o=o.add(q.grid.fbRows[o[0].rowIndex]===o[0]?q.rows[o[0].rowIndex]:q.grid.fbRows[o[0].rowIndex])),o.removeClass(i).attr({"aria-selected":"false",tabindex:"-1"}),P.selrow=null);else l&&b(r).prop("checked",!1)}}).on("reloadGrid",function(e,t){var r=this.grid,i=b(this);if(!0===P.treeGrid&&(P.datatype=P.treedatatype),t=S({},la.reloadGridOptions||{},P.reloadGridOptions||{},t||{}),"local"===P.datatype&&P.dataTypeOrg&&P.loadonce&&t.fromServer&&(P.datatype=P.dataTypeOrg,delete P.dataTypeOrg),t.current&&r.selectionPreserver.call(this),"local"===P.datatype?(P.multiPageSelection||Ge.resetSelection.call(i),P.data.length&&(g.call(this),m())):P.treeGrid||P.multiPageSelection||(P.selrow=null,P.multiselect&&(X(P.selarrrow),E.call(this,!1)),X(P.savedRow)),P.iRow=-1,P.iCol=-1,P.scroll&&L.emptyRows.call(this,!0,!1),t.page){var a=parseInt(t.page,10);a>P.lastpage&&(a=P.lastpage),a<1&&(a=1),P.page=a,r.bDiv.scrollTop=r.prevRowHeight?(a-1)*r.prevRowHeight*P.rowNum:0}return r.prevRowHeight&&P.scroll&&void 0===t.page?(delete P.lastpage,r.populateVisible.call(this)):r.populate.call(this),!0===P._inlinenav&&i.jqGrid("showAddEditButtons",!1),!1}).dblclick(function(e){var t=ue.call(q,e.target),r=t.parent();if(0<t.length&&!R.call(q,"ondblClickRow",r.attr("id"),r[0].rowIndex,t[0].cellIndex,e))return!1}).on("contextmenu",function(e){var t=ue.call(q,e.target),r=t.parent(),i=r.attr("id");if(0!==t.length&&(P.multiselect||c.call(D,i,!0,e),!R.call(q,"onRightClickRow",i,r[0].rowIndex,t[0].cellIndex,e)))return!1}),L.bDiv=document.createElement("div"),a&&"auto"===String(P.height).toLowerCase()&&(P.height="100%"),b(L.bDiv).append(b("<div style='position:relative;'></div>").append("<div></div>").append(q)).addClass("ui-jqgrid-bdiv").css({height:P.height+(isNaN(P.height)?"":"px"),width:L.width+"px"}).scroll(L.scrollGrid),P.maxHeight&&b(L.bDiv).css("max-height",P.maxHeight+(isNaN(P.maxHeight)?"":"px")),D.css({width:"1px"}),b.support.tbody||2===b(">tbody",q).length&&b(">tbody:gt(0)",q).remove(),P.multikey&&b(L.bDiv).on(t.msie?"selectstart":"mousedown",function(){return!1}),le&&b(L.bDiv).hide(),L.cDiv=document.createElement("div");var pe=y("gridMinimize.visible"),he=y("gridMinimize.hidden"),fe=(a=x("showhide"),!0===P.hidegrid?b("<a role='link' class='"+_("titleButton","ui-jqgrid-titlebar-close")+"'"+(a?" title='"+a+"'":"")+"/>").hover(function(){fe.addClass(re)},function(){fe.removeClass(re)}).append("<span class='"+pe+"'></span>"):"");if(b(L.cDiv).append("<span class='ui-jqgrid-title'>"+P.caption+"</span>").append(fe).addClass(_("gridTitle","ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===C?"-rtl ":" ")+i)),b(L.cDiv).insertBefore(L.hDiv),P.toolbar[0]&&(L.uDiv=document.createElement("div"),"top"===P.toolbar[1]?b(L.uDiv).insertBefore(L.hDiv):"bottom"===P.toolbar[1]&&b(L.uDiv).insertAfter(L.hDiv),a=_("toolbarUpper","ui-userdata"),"both"===P.toolbar[1]?(L.ubDiv=document.createElement("div"),b(L.uDiv).addClass(a).attr("id","t_"+P.id).insertBefore(L.hDiv),b(L.ubDiv).addClass(_("toolbarBottom","ui-userdata")).attr("id","tb_"+P.id).insertAfter(L.hDiv),le&&b(L.ubDiv).hide()):b(L.uDiv).width(L.width).addClass(a).attr("id","t_"+P.id),le&&b(L.uDiv).hide()),"string"==typeof P.datatype&&(P.datatype=P.datatype.toLowerCase()),P.toppager?(P.toppager=P.id+"_toppager",L.topDiv=b("<div id='"+P.toppager+"'></div>")[0],b(L.topDiv).addClass(_("pager.pager","ui-jqgrid-toppager"+(P.caption?"":" "+i))).css({width:L.width+"px"}).insertBefore(L.hDiv),r.call(q,P.toppager,"_t"),P.toppager="#"+H(P.toppager)):""!==P.pager||P.scroll||(P.rowNum=P.maxRowNum),P.footerrow&&(L.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0],o=b("<div class='ui-jqgrid-hbox"+("rtl"===C?"-rtl":"")+"'></div>"),b(L.sDiv).append(o).width(L.width).insertAfter(L.hDiv),b(o).append(ae),L.footers=b(".ui-jqgrid-ftable",L.sDiv)[0].rows[0].cells,P.rownumbers&&(L.footers[0].className=_("rowNum","jqgrid-rownum")),le&&b(L.sDiv).hide()),o=null,P.caption){var be=P.datatype;!0===P.hidegrid&&(b(".ui-jqgrid-titlebar-close",L.cDiv).click(function(e){var t=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",r=this;!0===P.toolbar[0]&&("both"===P.toolbar[1]&&(t+=",#"+H(b(L.ubDiv).attr("id"))),t+=",#"+H(b(L.uDiv).attr("id")));var i=b(t,P.gView).length;return P.toppager&&(t+=","+P.toppager),"visible"===P.gridstate?b(t,P.gBox).slideUp("fast",function(){0===--i&&(b("span",r).removeClass(pe).addClass(he),P.gridstate="hidden",b(P.gBox).hasClass("ui-resizable")&&b(".ui-resizable-handle",P.gBox).hide(),b(L.cDiv).addClass(ne),le||R.call(q,"onHeaderClick",P.gridstate,e))}):"hidden"===P.gridstate&&(b(L.cDiv).removeClass(ne),b(t,P.gBox).slideDown("fast",function(){0===--i&&(b("span",r).removeClass(he).addClass(pe),le&&(P.datatype=be,A.call(q),le=!1),P.gridstate="visible",b(P.gBox).hasClass("ui-resizable")&&b(".ui-resizable-handle",P.gBox).show(),le||R.call(q,"onHeaderClick",P.gridstate,e))})),!1}),le&&(P.datatype="local",b(".ui-jqgrid-titlebar-close",L.cDiv).trigger("click")))}else b(L.cDiv).hide(),b(L.cDiv).nextAll("div:visible").first().addClass("ui-corner-top");b(L.hDiv).after(L.bDiv),L.eDiv=b("<div class='"+_("gridError","ui-jqgrid-errorbar ui-jqgrid-errorbar-"+C)+"' style='display:none;'><span class='"+_("gridErrorText","ui-jqgrid-error")+"'></span></div>")[0],b(L.hDiv).after(L.eDiv),b(e).click(p).dblclick(function(e){var t=b(P.rs),r=t.offset(),i=t.data("idx"),a=t.data("delta"),o=P.colModel[i];if(null==(l=b(this).data("pageX")||t.data("pageX"))||null==o)return!1;var l=String(l).split(";"),n=parseFloat(l[0]),s=parseFloat(l[1]);return 2===l.length&&(5<Math.abs(n-s)||5<Math.abs(e.pageX-n)||5<Math.abs(e.pageX-s))||(R.call(q,"resizeDblClick",i,o)&&r.left-1<=e.pageX+a&&e.pageX+a<=r.left+t.outerWidth()+1&&o.autoResizable&&Ge.autoResizeColumn.call(D,i),R.call(q,"afterResizeDblClick",{iCol:i,cm:o,cmName:o.name})),!1}),P.pager||b(L.cDiv).nextAll("div:visible").filter(":last").addClass(ne),b(".ui-jqgrid-labels",L.hDiv).on("selectstart",function(){return!1}),q.formatCol=h,q.sortData=w,q.updatepager=function(e,r){var i,a,o,l,n,s,d=this,c=b(d),u=d.grid,p=P.pager||"",h=P.pager?"_"+P.pager.substr(1):"";i=u.bDiv;var f=b.fmatter?b.fmatter.NumberFormat:null,g=P.toppager?"_"+P.toppager.substr(1):"",m=_("states.hover"),v=_("states.disabled");if((a=parseInt(P.page,10)-1)<0&&(a=0),l=(a*=parseInt(P.rowNum,10))+P.reccount,P.scroll&&(s=b(Ha(21,i)[0].rows).slice(1),a=l-s.length,P.reccount=s.length,(s=s.outerHeight()||u.prevRowHeight)&&(o=a*s,n=t.fixMaxHeightOfDiv.call(d,parseInt(P.records,10)*s),b(i).children("div").first().css({height:n+"px"}).children("div").first().css({height:o+"px",display:""}),0===i.scrollTop&&1<P.page&&(i.scrollTop=P.rowNum*(P.page-1)*s)),i.scrollLeft=u.hDiv.scrollLeft),p+=P.toppager?(p?",":"")+P.toppager:""){if(s=F.call(D,"formatter.integer")||{},u=V(P.page),i=V(P.lastpage),b(".selbox",p).prop("disabled",!1),!0===P.pginput){o=b(".ui-pg-input",p);var w=String(P.page).length;o.val(P.page),o.each(function(){var e=parseInt(b(this).attr("size"),10);0<e&&e<w&&b(this).attr("size",w)}),o=P.toppager?"#sp_1"+h+",#sp_1"+g:"#sp_1"+h,b(o).html(b.fmatter?f(P.lastpage,s):P.lastpage).closest(".ui-pg-table").each(function(){j.call(d,b(this))})}P.viewrecords&&(0===P.reccount?b(".ui-paging-info",p).html(x("emptyrecords")):(o=a+1,n=P.records,b.fmatter&&(o=f(o,s),l=f(l,s),n=f(n,s)),b(".ui-paging-info",p).html(t.format(x("recordtext"),o,l,n)))),!0===P.pgbuttons&&(i<=0&&(u=0),u<=0&&(u=i=0),1===u||0===u?(b("#first"+h+", #prev"+h).addClass(v).removeClass(m),P.toppager&&b("#first_t"+g+", #prev_t"+g).addClass(v).removeClass(m)):(b("#first"+h+", #prev"+h).removeClass(v),P.toppager&&b("#first_t"+g+", #prev_t"+g).removeClass(v)),u===i||0===u?(b("#next"+h+", #last"+h).addClass(v).removeClass(m),P.toppager&&b("#next_t"+g+", #last_t"+g).addClass(v).removeClass(m)):(b("#next"+h+", #last"+h).removeClass(v),P.toppager&&b("#next_t"+g+", #last_t"+g).removeClass(v)))}!0===e&&!0===P.rownumbers&&b(">td.jqgrid-rownum",d.rows).each(function(e){b(this).html(a+1+e)}),r&&P.jqgdnd&&c.jqGrid("gridDnD","updateDnD"),R.call(d,"gridComplete"),c.triggerHandler("jqGridAfterGridComplete")},q.refreshIndex=m,q.setHeadCheckBox=E,q.fixScrollOffsetAndhBoxPadding=O,q.constructTr=function(e,r,i,a,o,l){var n,s="-1",d="",c=r?"display:none;":"";if(i=_("gridRow","jqgrow ui-row-"+P.direction)+(i?" "+i:"")+(l?" "+_("states.select"):""),"object"!=typeof(l=b(this).triggerHandler("jqGridRowAttr",[a,o,e]))&&(l=M(P.rowattr)?P.rowattr.call(this,a,o,e):"string"==typeof P.rowattr&&null!=t.rowattr&&M(t.rowattr[P.rowattr])?t.rowattr[P.rowattr].call(this,a,o,e):{}),null!=l&&!b.isEmptyObject(l)){l.hasOwnProperty("id")&&(e=l.id,delete l.id),l.hasOwnProperty("tabindex")&&(s=l.tabindex,delete l.tabindex),l.hasOwnProperty("style")&&(c+=l.style,delete l.style),l.hasOwnProperty("class")&&(i+=" "+l.class,delete l.class);try{delete l.role}catch(e){}for(n in l)l.hasOwnProperty(n)&&(d+=" "+n+"="+l[n])}return P.treeGrid&&parseInt(a[P.treeReader.level_field],10)!==parseInt(P.tree_root_level,10)&&(!(a=Ge.getNodeParent.call(b(this),a))||!a.hasOwnProperty(P.treeReader.expanded_field)||a[P.treeReader.expanded_field]||r||(c+="display:none;")),"<tr role='row' id='"+e+"' tabindex='"+s+"' class='"+i+"'"+(""===c?"":" style='"+c+"'")+d+">"},q.formatter=function(e,t,r,i,a,o){var l=P.colModel[r];if(void 0!==l.formatter){var n={rowId:e=""!==String(P.idPrefix)?Aa(P.idPrefix,e):e,colModel:l,gid:P.id,pos:r,rowData:o||i};t=M(l.cellBuilder)?l.cellBuilder.call(q,t,n,i,a):M(l.formatter)?l.formatter.call(q,t,n,i,a):b.fmatter?b.fn.fmatter.call(q,l.formatter,t,n,i,a):f(t)}else t=f(t);return t=l.autoResizable&&"actions"!==l.formatter?"<span class='"+P.autoResizing.wrapperClassName+"'>"+t+"</span>":t,P.treeGrid&&"edit"!==a&&(void 0===P.ExpandColumn&&0===r||P.ExpandColumn===l.name)&&(null==o&&(o=P.data[P._index[e]]),e=parseInt(o[P.treeReader.level_field]||0,10),e=0===parseInt(P.tree_root_level,10)?e:e-1,r=o[P.treeReader.leaf_field],a=o[P.treeReader.expanded_field],o=o[P.treeReader.icon_field],t="<div class='tree-wrap' style='width:"+18*(e+1)+"px;'><div class='"+ra(P.treeIcons.commonIconClass,r?(null!=o&&""!==o?o:P.treeIcons.leaf)+" tree-leaf":a?P.treeIcons.minus+" tree-minus":P.treeIcons.plus+" tree-plus","treeclick")+"' style='"+(!0===P.ExpandColClick?"cursor:pointer;":"")+("rtl"===P.direction?"margin-right:":"margin-left:")+18*e+"px;'></div></div><span class='cell-wrapper"+(r?"leaf":"")+"'"+(P.ExpandColClick?" style='cursor:pointer;'":"")+">"+t+"</span>"),t},S(L,{populate:A,emptyRows:function(e,t){var r=L.bDiv,i=null!=L.fbDiv?L.fbDiv.children(".ui-jqgrid-btable")[0]:null,a=function(e){if(e){var t=e.rows,r=t[0];if(P.deepempty)t&&b(t).slice(1).remove();else if(P.quickEmpty)if("quickest"===P.quickEmpty)e.replaceChild(document.createElement("tbody"),e.tBodies[0]),e.firstChild.appendChild(r);else for(;1<t.length;)e.deleteRow(t.length-1);else b(e.firstChild).empty().append(r)}};b(this).off(".jqGridFormatter"),a(this),a(i),e&&P.scroll&&(b(r.firstChild).css({height:"auto"}),b(r.firstChild.firstChild).css({height:0,display:"none"}),0!==r.scrollTop&&(r.scrollTop=0)),!0===t&&P.treeGrid&&(X(P.data),X(P.lastSelectedData),P._index={}),P.rowIndexes={},P.iRow=-1,P.iCol=-1},beginReq:N,endReq:T}),q.addXmlData=I,q.addJSONData=I,q.rebuildRowIndexes=B,q.grid.cols=q.rows[0].cells,R.call(q,"onInitGrid"),P.treeGrid&&"local"===P.datatype&&null!=P.data&&0<P.data.length&&(P.datatype="jsonstring",P.datastr=P.data,P.data=[]),A.call(q),P.hiddengrid=!1}}}var ge,me,ve,we,ye,xe,Ce,je,Se,qe,De})};var C=b.fn.jqGrid;t.extend({getGridRes:function(e){var r=this[0];return r&&r.grid&&r.p?(r=t.getRes(ba[r.p.locale],e)||t.getRes(ba["en-US"],e),e=t.getRes(t,e),"object"!=typeof r||null===r||b.isArray(r)?void 0!==e?e:r:b.extend(!0,{},r,e||{})):null},getGuiStyles:function(e,r){if(!(i=this instanceof b&&0<this.length?this[0]:this)||!i.grid||!i.p)return"";var i,a=i.p.guiStyle||t.defaults.guiStyle||"jQueryUI";return void 0===(i=t.getRes(t.guiStyles[a],e))&&("string"==typeof(a=t.getRes(t.guiStyles[a],"baseGuiStyle"))&&(i=t.getRes(t.guiStyles[a],e))),t.mergeCssClasses(i||"",r||"")},isBootstrapGuiStyle:function(){return 0<=b.inArray("ui-jqgrid-bootstrap",b(this).jqGrid("getGuiStyles","gBox").split(" "))},displayErrorMessage:function(e){var t=this instanceof b&&0<this.length?this[0]:this;if(t&&t.grid&&t.p&&e){var r=b(t.grid.eDiv),i=r.children(".ui-jqgrid-error");i.html(e),r.show(),t.p.errorDisplayTimeout&&setTimeout(function(){i.empty(),r.hide()},t.p.errorDisplayTimeout)}},getIconRes:function(e){if(!(r=this instanceof b&&0<this.length?this[0]:this)||!r.p)return"";var r,i=r.p,a=function(e,r){var i,a,o,l=r.split("."),n=l.length,s=[];if(null==(e="string"==typeof e?t.icons[e]:e))return"";for((i=e).common&&s.push(i.common),o=0;o<n&&(a=l[o]);o++){if(void 0===(i=i[a])){if("common"===a)break;return""}if("string"==typeof i){s.push(i);break}null!=i&&i.common&&s.push(i.common)}return t.mergeCssClasses.apply(this,s)};return null==(r=t.icons[i.iconSet])?"":(""===(i=a(i.iconSet,e))&&null!=r.baseIconSet&&(i=a(r.baseIconSet,e)),i||"")},isInCommonIconClass:function(e){var r=this instanceof b&&0<this.length?this[0]:this;if(!r||!r.p)return"";if(null==(r=t.icons[r.p.iconSet]))return!1;var i=r.common;if(void 0===i){if(null==r.baseIconSet)return!1;if(null==(r=t.icons[r.baseIconSet]))return!1;i=r.common}return"string"==typeof i&&0<=b.inArray(e,i.split(" "))},getGridParam:function(e){var t=this[0];return t&&t.grid?e?void 0!==t.p[e]?t.p[e]:null:t.p:null},setGridParam:function(e,t){return this.each(function(){null==t&&(t=!1),this.grid&&"object"==typeof e&&(!0===t?this.p=b.extend({},this.p,e):b.extend(!0,this.p,e))})},abortAjaxRequest:function(){return this.each(function(){null!=this.p.jqXhr&&this.p.jqXhr.abort(),this.grid.endReq.call(this)})},getGridRowById:function(i){if(null==i)return null;var a,o=i.toString();return this.each(function(){var e,t,r=this.rows;if(null!=this.p.rowIndexes&&((t=r[t=this.p.rowIndexes[o]])&&t.id===o&&(a=t)),!a)try{for(e=r.length;e--;)if(t=r[e],o===t.id){a=t;break}}catch(e){a=0<(a=b(this.grid.bDiv).find("#"+H(i))).length?a[0]:null}}),a},getDataIDs:function(){var a=[];return this.each(function(){var e,t,r=this.rows,i=r.length;if(i&&0<i)for(e=0;e<i;e++)t=r[e],b(t).hasClass("jqgrow")&&a.push(t.id)}),a},setSelection:function(m,v,w){return this.each(function(){var e,r,i,a=b(this),l=this.p,o=C.getGuiStyles;i=C.getGridRowById;var n,s,d,c,u,p,h=o.call(a,"states.select"),f=o.call(a,"states.disabled"),g=this.grid.fbRows;o=function(e,t){var r=t?"addClass":"removeClass",i=l.iColByName.cb,a=t?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"},o=function(e){b(e)[r](h).attr(a),void 0!==i&&b(e.cells[i]).children("input.cbox").prop("checked",t)};o(e),g&&o(g[e.rowIndex])};void 0!==m&&(v=!1!==v,null!=w&&(0<(r=b(w.target).closest("tr.jqgrow")).length&&(e=r[0],g&&(e=this.rows[e.rowIndex]))),null==e&&(e=i.call(a,m)),!e||!e.className||-1<e.className.indexOf(f)||(!0===l.scrollrows&&(null!=(r=i.call(a,m))&&(0<=(r=r.rowIndex)&&(n=this.rows[r],s=this.grid.bDiv,d=s.clientHeight,c=s.scrollTop,u=b(n).position().top,p=n.clientHeight,d+c<=u+p?s.scrollTop=u-(d+c)+p+c:u<d+c&&u<c&&(s.scrollTop=u)))),l.multiselect?(this.setHeadCheckBox(!1),l.selrow=e.id,-1===(i=b.inArray(l.selrow,l.selarrrow))?(a=!0,l.selarrrow.push(l.selrow)):null!==t.detectRowEditing.call(this,e.id)?a=!0:(a=!1,l.selarrrow.splice(i,1),i=l.selarrrow[0],l.selrow=void 0===i?null:i),"ui-subgrid"!==e.className&&o(e,a),v&&R.call(this,"onSelectRow",e.id,a,w)):"ui-subgrid"!==e.className&&(l.selrow!==e.id?(null!==l.selrow&&(a=i.call(a,l.selrow))&&o(a,!1),o(e,!0),a=!0):a=!1,l.selrow=e.id,v&&R.call(this,"onSelectRow",e.id,a,w))))})},resetSelection:function(c){return this.each(function(){var e=b(this),t=this.p,r=C.getGuiStyles,i=C.getGridRowById,a=r.call(e,"states.select"),o="edit-cell "+a,l=(r="selected-row "+r.call(e,"states.hover"),t.iColByName.cb),n=void 0!==l,s=this.grid.fbRows,d=function(e){var t={"aria-selected":"false",tabindex:"-1"};b(e).removeClass(a).attr(t),n&&b(e.cells[l]).children("input.cbox").prop("checked",!1),s&&(e=s[e.rowIndex],b(e).removeClass(a).attr(t),n&&b(e.cells[l]).children("input.cbox").prop("checked",!1))};void 0!==c?(e=i.call(e,c),d(e),n&&(this.setHeadCheckBox(!1),-1!==(e=b.inArray(c,t.selarrrow))&&t.selarrrow.splice(e,1))):t.multiselect?(b(this.rows).each(function(){var e=b.inArray(this.id,t.selarrrow);-1!==e&&(d(this),t.selarrrow.splice(e,1))}),this.setHeadCheckBox(!1),t.multiPageSelection||X(t.selarrrow),t.selrow=null):t.selrow&&(e=i.call(e,t.selrow),d(e),t.selrow=null),!0===t.cellEdit&&0<=parseInt(t.iCol,10)&&0<=parseInt(t.iRow,10)&&(null!=(e=this.rows[t.iRow])&&(b(e.cells[t.iCol]).removeClass(o),b(e).removeClass(r)),s&&(null!=(e=s[t.iRow])&&(b(e.cells[t.iCol]).removeClass(o),b(e).removeClass(r)))),X(t.savedRow)})},getRowData:function(u,p){var h,f={};return"object"==typeof u&&(p=u,u=void 0),p=p||{},this.each(function(){var e,t,r,i,a,o,l,n=this.p,s=!1,d=1,c=this.rows;if(void 0===u)s=!0,h=[],d=c.length;else if(!(e=C.getGridRowById.call(b(this),u)))return f;for(t=0;t<d;t++)if(s&&(e=c[t]),b(e).hasClass("jqgrow")){for(i=b(e).find("td[role=gridcell]"),r=0;r<i.length;r++)if(o=(a=n.colModel[r]).name,b.inArray(o,n.reservedColumnNames)<0&&"actions"!==a.formatter&&(!p.skipHidden||!a.hidden))if(l=i[r],!0===n.treeGrid&&o===n.ExpandColumn)f[o]=La(b("span",l).first().html());else try{f[o]=b.unformat.call(this,l,{rowId:e.id,colModel:a},r)}catch(e){f[o]=La(b(l).html())}!p.includeId||!1!==n.keyName&&null!=f[n.keyName]||(f[n.prmNames.id]=Aa(n.idPrefix,e.id)),s&&(h.push(f),f={})}}),h||f},delRowData:function(a){var o,l,n,s=!1;return this.each(function(){var e=this.p;if(!(o=C.getGridRowById.call(b(this),a)))return!1;if(e.subGrid&&((n=b(o).next()).hasClass("ui-subgrid")&&n.remove()),b(o).remove(),e.records--,e.reccount--,this.updatepager(!0,!1),s=!0,e.multiselect&&(-1!==(l=b.inArray(a,e.selarrrow))&&e.selarrrow.splice(l,1)),e.multiselect&&0<e.selarrrow.length?e.selrow=e.selarrrow[e.selarrrow.length-1]:e.selrow===a&&(e.selrow=null),"local"===e.datatype){var t=Aa(e.idPrefix,a);void 0!==(t=e._index[t])&&(e.data.splice(t,1),this.refreshIndex())}if(this.rebuildRowIndexes(),!0===e.altRows&&s&&!b(this).jqGrid("isBootstrapGuiStyle")){var r=e.altclass,i=this.grid.fbRows;b(this.rows).each(function(e){var t=b(this);i&&(t=t.add(i[this.rowIndex])),t[0==e%2?"addClass":"removeClass"](r)})}R.call(this,"afterDelRow",a)}),s},setRowData:function(p,h,a){var o=!0;return this.each(function(){var l,n=this,s=n.p,e=typeof a,d={};if(!n.grid)return!1;if(!(l=C.getGridRowById.call(b(n),p)))return!1;if(h)try{var t,i=Aa(s.idPrefix,p),r=s._index[i],c={},u=null!=r?s.data[r]:void 0;if(b(s.colModel).each(function(e){var t=this.name,r=pa(h,t);void 0!==r&&("local"===s.datatype&&null!=u&&(r=hb.call(n,r,this,u[t],i,u,e),b.isFunction(this.saveLocally)?this.saveLocally.call(n,{newValue:r,newItem:d,oldItem:u,id:i,cm:this,cmName:t,iCol:e}):d[t]=r),c[t]=r)}),b(s.colModel).each(function(e){var t,r=this.name,i=pa(h,r),a=b(l.cells[e]);if(void 0!==i){"local"===s.datatype&&null!=u&&(i=d[r]),t=this.title?{title:i}:{};i=n.formatter(p,i,e,h,"edit",c);var o=a;!0===s.treeGrid&&r===s.ExpandColumn&&(o=o.children("span.cell-wrapperleaf,span.cell-wrapper").first()),o.html(i),a.attr(t),s.frozenColumns&&(o=b(n.grid.fbRows[l.rowIndex].cells[e]),!0===s.treeGrid&&r===s.ExpandColumn&&(o=o.children("span.cell-wrapperleaf,span.cell-wrapper").first()),o.html(i).attr(t))}}),"local"===s.datatype){if(s.treeGrid)for(t in s.treeReader)s.treeReader.hasOwnProperty(t)&&delete d[s.treeReader[t]];void 0!==u&&(s.data[r]=b.extend(!0,u,d))}R.call(n,"afterSetRow",{rowid:p,inputData:h,iData:r,iRow:l.rowIndex,tr:l,localData:d,cssProp:a})}catch(e){o=!1}o&&("string"===e?b(l).addClass(a):null!==a&&"object"===e&&b(l).css(a))}),o},addRowData:function(c,u,p,h){b.inArray(p,"first last before after afterSelected beforeSelected".split(" "))<0&&(p="last");var f,g,m,v,w,y,x,j,S,q,D,G=!1;return u&&(b.isArray(u)?(y=!0,x=c):y=!(u=[u]),this.each(function(){var e,r=this.p,i=u.length,a=b(this),o=this.rows,l=0,n=C.getGridRowById,s=r.colModel,d=r.additionalProperties;for(y||(void 0!==c?c=String(c):(c=wa(),!1!==r.keyName&&(x=r.keyName,void 0!==u[0][x]&&(c=u[0][x])))),j=r.altclass;l<i;){if(S=u[l],g=[],y)try{void 0===(c=S[x])&&(c=wa())}catch(e){c=wa()}for(D=c,e={},v=0;v<s.length;v++)q=s[v],"rn"!==(f=q.name)&&"cb"!==f&&"subgrid"!==f&&(w=hb.call(this,S[f],q,void 0,D,{},v),b.isFunction(q.saveLocally)?q.saveLocally.call(this,{newValue:w,newItem:e,oldItem:{},id:D,cm:q,cmName:f,iCol:v}):void 0!==w&&(e[f]=w));for(v=0;v<d.length;v++)"object"==typeof(f=d[v])&&f.hasOwnProperty("name")&&(f=f.name),void 0!==(w=pa(S,f))&&(e[f]=w);if("local"===r.datatype&&(e[r.localReader.id]=D,r._index[D]=r.data.length,r.data.push(e)),g=(g=t.parseDataToHtml.call(this,1,[c],[S])).join(""),0===o.length)b(this.tBodies[0]).append(g);else switch("afterSelected"!==p&&"beforeSelected"!==p||(void 0===h&&null!==r.selrow?(h=r.selrow,p="afterSelected"===p?"after":"before"):p="afterSelected"===p?"last":"first"),p){case"last":b(o[o.length-1]).after(g),m=o.length-1;break;case"first":b(o[0]).after(g),m=1;break;case"after":(m=n.call(a,h))&&(b(o[m.rowIndex+1]).hasClass("ui-subgrid")?(b(o[m.rowIndex+1]).after(g),m=m.rowIndex+2):(b(m).after(g),m=m.rowIndex+1));break;case"before":(m=n.call(a,h))&&(b(m).before(g),m=m.rowIndex-1)}!0===r.subGrid&&C.addSubGrid.call(a,r.iColByName.subgrid,m),r.records++,r.reccount++,0===r.lastpage&&(r.lastpage=1),R.call(this,"afterAddRow",{rowid:c,inputData:u,position:p,srcRowid:h,iRow:m,localData:e,iData:r.data.length-1}),l++}!0!==r.altRows||y||a.jqGrid("isBootstrapGuiStyle")||("last"===p?0==(o.length-1)%2&&b(o[o.length-1]).addClass(j):b(o).each(function(e){1==e%2?b(this).addClass(j):b(this).removeClass(j)})),this.rebuildRowIndexes(),this.updatepager(!0,!0),G=!0})),G},footerData:function(n,s,d){var c=!1,u={};return null==n&&(n="get"),"boolean"!=typeof d&&(d=!0),n=n.toLowerCase(),this.each(function(){var e,t,r,i,a=this.p;if(!this.grid||!a.footerrow)return!1;if(e="set"===n)e:{for(t in s)if(s.hasOwnProperty(t)){e=!1;break e}e=!0}if(e)return!1;if(c=!0,null==(e=b(this.grid.sDiv).children(".ui-jqgrid-hbox").children(".ui-jqgrid-ftable")[0])||null==e.rows)return!1;var o=e.rows[0].cells,l=null==this.grid.fsDiv?{}:this.grid.fsDiv.children(".ui-jqgrid-ftable")[0].rows[0].cells;for(r in s)i=a.iColByName[r],s.hasOwnProperty(r)&&void 0!==i&&("get"===n?u[r]=b(o[i]).html():"set"===n&&(e=d?this.formatter("",s[r],i,s,"edit"):s[r],(t=b(o[i]).add(l[i])).html(e),a.colModel[i].title&&t.attr({title:ib(e)})))}),"get"===n?u:c},showHideCol:function(u,p,h){return this.each(function(){var e,a=this,r=b(a),o=a.grid,l=!1,n=a.p,s=t.cell_width?0:n.cellLayout;if(o){"string"==typeof u&&(u=[u]),h=h||{};var d=""===(p="none"!==p&&!1!==p?"":"none"),i=n.groupHeader;if((i=i&&("object"==typeof i||b.isFunction(i)))&&!h.skipSetGroupHeaders&&C.destroyGroupHeader.call(r,!1),b(n.colModel).each(function(r){if(-1!==b.inArray(this.name,u)&&this.hidden===d){if(!0===n.frozenColumns&&!0===this.frozen&&!h.notSkipFrozen)return!0;var i=b(o.hDiv).find(".ui-jqgrid-htable>thead>tr");!0===n.frozenColumns&&null!=o.fhDiv&&(i=i.add(b(o.fhDiv).find(".ui-jqgrid-htable>thead>tr"))),i.each(function(){b(this.cells[r]).css("display",p)}),i=b(a.rows),!0===n.frozenColumns&&null!=o.fbRows&&(i=i.add(o.fbRows)),i.each(function(e){var t=this.cells[r];(!b(this).hasClass("jqgroup")||null!=t&&1===t.colSpan)&&(0===e&&1===i.length&&b(this).hasClass("jqgfirstrow")?(b(t).css("height","1px"),b(t).css("display",p),b(t).css("height","0")):b(t).css("display",p))}),n.footerrow&&(i=b(o.sDiv).find("tr.footrow"),!0===n.frozenColumns&&null!=o.fsDiv&&(i=i.add(b(o.fsDiv).find("tr.footrow"))),i.each(function(){b(this.cells[r]).css("display",p)})),e=parseInt(this.width,10),n.tblwidth="none"===p?n.tblwidth-(e+s):n.tblwidth+(e+s),this.hidden=!d,l=!0,h.skipFeedback?(h.toReport=h.toReport||{},h.toReport[this.name]=d):R.call(a,"onShowHideCol",d,this.name,r)}}),!0===l){var c=n.autowidth||void 0!==n.widthOrg&&"auto"!==n.widthOrg&&"100%"!==n.widthOrg?n.width:n.tblwidth+parseInt(n.scrollOffset,10);h.skipSetGridWidth?h.newGridWidth=c:C.setGridWidth.call(r,c)}if(i&&!h.skipSetGroupHeaders)if(null!=n.pivotOptions&&null!=n.pivotOptions.colHeaders&&1<n.pivotOptions.colHeaders.length)for(c=n.pivotOptions.colHeaders,i=0;i<c.length;i++)c[i]&&c[i].groupHeaders.length&&C.setGroupHeaders.call(r,c[i]);else C.setGroupHeaders.call(r,n.groupHeader)}})},hideCol:function(e,t){return this.each(function(){C.showHideCol.call(b(this),e,"none",t)})},showCol:function(e,t){return this.each(function(){C.showHideCol.call(b(this),e,"",t)})},remapColumns:function(a,e,t){function r(t){var r=t.length?c(t):b.extend({},t);b.each(l,function(e){t[e]=r[this]})}function i(e,t){(t?e.children(t):e.children()).each(function(){var i=this,a=c(i.cells);b.each(l,function(e){var t=a[this],r=i.cells[e];null!=t&&null!=r&&t.cellIndex!==e&&t.parentNode.insertBefore(t,r)})})}var o,l,n=this[0],s=n.p,d=n.grid,c=b.makeArray,u=!0===s.frozenColumns,p=this.jqGrid("getNumberOfFrozenColumns");if(null!=d&&null!=s){for(l=function(){var e,t=[],r=[],i=a.length;for(e=0;e<i;e++)u&&a[e]<p?t.push(a[e]):r.push(a[e]);return t.concat(r)}(),r(s.colModel),r(s.colNames),r(d.headers),o=b(d.hDiv).children("div").children("table.ui-jqgrid-htable").children("thead"),u&&null!=d.fhDiv&&(o=o.add(d.fhDiv.children("table.ui-jqgrid-htable").children("thead"))),i(o,t&&":not(.ui-jqgrid-labels)"),e&&(o=b(n.tBodies[0]),u&&null!=d.fbDiv&&(o=o.add(d.fbDiv.children("table.ui-jqgrid-btable").children("tbody").first())),i(o,"tr.jqgfirstrow,tr.jqgrow,tr.jqfoot")),s.footerrow&&(o=b(d.sDiv).children("div").children("table.ui-jqgrid-ftable").children("tbody").first(),u&&null!=d.fsDiv&&(o=o.add(d.fsDiv.children("table.ui-jqgrid-ftable").children("tbody").first())),i(o)),s.remapColumns&&(s.remapColumns.length?r(s.remapColumns):s.remapColumns=c(l)),s.lastsort=b.inArray(s.lastsort,l),s.iColByName={},d=0,o=s.colModel.length;d<o;d++)s.iColByName[s.colModel[d].name]=d;R.call(n,"onRemapColumns",l,e,t)}},remapColumnsByName:function(e,t,r){var i,a,o=this[0].p,l=[];for(e=e.slice(),i=b.inArray,o.subGrid&&i("subgrid",e)<0&&e.unshift("subgrid"),o.multiselect&&i("cb",e)<0&&e.unshift("cb"),o.rownumbers&&i("rn",e)<0&&e.unshift("rn"),i=0,a=e.length;i<a;i++)l.push(o.iColByName[e[i]]);return C.remapColumns.call(this,l,t,r),this},setGridWidth:function(D,R){return this.each(function(){var r,i,e,a=this.p,o=this.grid,l=0,n=0,s=!1,d=0,c=t.isCellClassHidden,u=D;if(o&&null!=a){this.fixScrollOffsetAndhBoxPadding();var p,h,f=a.colModel,g=a.scrollOffset,m=t.cell_width?0:a.cellLayout,v=o.headers,w=o.footers,y=o.bDiv,x=o.hDiv,C=o.sDiv,j=o.cols,S=b(x).find(">div>.ui-jqgrid-htable>thead>tr").first()[0].cells,q=function(e){o.width=a.width=e,b(a.gBox).css("width",e+"px"),b(a.gView).css("width",e+"px"),b(y).css("width",e+"px"),b(x).css("width",e+"px"),a.pager&&b(a.pager).css("width",e+"px"),a.toppager&&b(a.toppager).css("width",e+"px"),!0===a.toolbar[0]&&(b(o.uDiv).css("width",e+"px"),"both"===a.toolbar[1]&&b(o.ubDiv).css("width",e+"px")),a.footerrow&&b(C).css("width",e+"px")};if("boolean"!=typeof R&&(R=a.shrinkToFit),!isNaN(u)){if(q(u=parseInt(u,10)),!1===R&&!0===a.forceFit&&(a.forceFit=!1),!0===R){if(b.each(f,function(){!1!==this.hidden||c(this.classes)||(r=this.widthOrg,l+=r+m,this.fixed?d+=this.width+m:n++)}),0===n)return;if(a.tblwidth=parseInt(l,10),e=u-m*n-d,!isNaN(a.height)&&(y.clientHeight<y.scrollHeight||1===this.rows.length)&&(s=!0,e-=g),(h=e/(a.tblwidth-m*n-d))<0)return;if(p=(l=0)<j.length,b.each(f,function(e){!1!==this.hidden||c(this.classes)||this.fixed||(this.width=r=Math.round(this.widthOrg*h),l+=r,v[e].width=r,S[e].style.width=r+"px",a.footerrow&&(w[e].style.width=r+"px"),p&&(j[e].style.width=r+"px"),i=e)}),!i)return;e=0,s?u-d-(l+m*n)!==g&&(e=u-d-(l+m*n)-g):1!==Math.abs(u-d-(l+m*n))&&(e=u-d-(l+m*n)),(f=f[i]).width+=e,a.tblwidth=parseInt(l+e+m*n+d,10),a.tblwidth>u&&(e=a.tblwidth-parseInt(u,10),a.tblwidth=u,f.width-=e),r=f.width,(u=v[i]).width=r,S[i].style.width=r+"px",p&&(j[i].style.width=r+"px"),a.footerrow&&(w[i].style.width=r+"px"),a.tblwidth+(s?g:0)<a.width&&q(a.tblwidth+(s?g:0)),y.offsetWidth>y.clientWidth&&(a.autowidth||void 0!==a.widthOrg&&"auto"!==a.widthOrg&&"100%"!==a.widthOrg||q(y.offsetWidth))}a.tblwidth&&(a.tblwidth=parseInt(a.tblwidth,10),u=a.tblwidth,x.scrollLeft=y.scrollLeft,e=Math.abs(u-a.width),a.shrinkToFit&&!R&&e<3&&0<e&&(u<a.width&&q(u),y.offsetWidth>y.clientWidth&&(a.autowidth||void 0!==a.widthOrg&&"auto"!==a.widthOrg&&"100%"!==a.widthOrg||q(y.offsetWidth)))),this.fixScrollOffsetAndhBoxPadding(),s={resizeDiv:!0,resizedRows:{iRowStart:R?0:-1,iRowEnd:-1}},b(this).triggerHandler("jqGridResetFrozenHeights",[{header:s,resizeFooter:!0,body:s}])}}})},setGridHeight:function(i){return this.each(function(){var e=this.grid,t=this.p;if(e){var r=b(e.bDiv);r.css({height:i+(isNaN(i)?"":"px")}),!0===t.frozenColumns&&b(t.idSel+"_frozen").parent().height(r.height()-16),t.height=i,t.scroll&&e.populateVisible.call(this),this.fixScrollOffsetAndhBoxPadding(),b(this).triggerHandler("jqGridResetFrozenHeights")}})},setCaption:function(t){return this.each(function(){var e=this.grid.cDiv;this.p.caption=t,b("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",e).html(t),b(e).show(),b(e).nextAll("div").removeClass(C.getGuiStyles.call(this,"top")),b(this).triggerHandler("jqGridResetFrozenHeights")})},setLabel:function(i,a,o,l){return this.each(function(){var e,t,r=this.p;if(this.grid){if(isNaN(i)){if(void 0===(e=r.iColByName[i]))return}else e=parseInt(i,10);0<=e&&(t=b(this.grid.headers[e].el),r.frozenColumns&&(t=t.add(this.grid.fhDiv.find(".ui-jqgrid-htable tr.ui-jqgrid-labels th.ui-th-column").eq(e))),a&&(t.each(function(){var e=b("[id^=jqgh_]",this),t=e.children("span.ui-jqgrid-cell-wrapper");0<t.length?t.html(a):(t=b(".s-ico",this),e.empty().html(a)[r.sortIconsBeforeText?"prepend":"append"](t))}),r.colNames[e]=a),o&&("string"==typeof o?t.addClass(o):t.css(o)),"object"==typeof l&&t.attr(l))}})},setCell:function(h,f,g,m,v,w){return this.each(function(){var e,r,i,a,o,l,n,s,d,c=this.p,u=c.colModel,p={};if(this.grid&&(0<=(e=isNaN(f)?c.iColByName[f]:parseInt(f,10))&&(o=C.getGridRowById.call(b(this),h)))){if(l=t.getCell.call(this,o,e),""!==g||!0===w){if(i=u[e],"local"===c.datatype&&(d=Aa(c.idPrefix,h),void 0!==(r=c._index[d])&&(a=c.data[r])),null==a){for(r=0;r<o.cells.length;r++)if(r!==e&&0<(n=t.getDataFieldOfCell.call(this,o,r)).length){try{s=b.unformat.call(this,n,{rowId:h,colModel:u[r]},r)}catch(e){s=La(n[0].innerHTML)}p[u[r].name]=s}}else p=a;p[i.name]=g,u=this.formatter(h,g,e,p,"edit"),s=l,!0===c.treeGrid&&i.name===c.ExpandColumn&&(s=s.children("span.cell-wrapperleaf,span.cell-wrapper").first()),s.html(u),i.title&&l.attr({title:g}),null!=a&&(u=hb.call(this,g,i,a[i.name],d,a,e),b.isFunction(i.saveLocally)?i.saveLocally.call(this,{newValue:u,newItem:a,oldItem:a,id:d,cm:i,cmName:i.name,iCol:e}):a[i.name]=u)}(m||v)&&(l=t.getCell.call(this,o,e),m&&l["string"==typeof m?"addClass":"css"](m),"object"==typeof v&&l.attr(v))}})},getCell:function(o,l){var n=!1;return this.each(function(){var e,r,i,a=this.p;if(this.grid&&(0<=(e=isNaN(l)?a.iColByName[l]:parseInt(l,10))&&(r=C.getGridRowById.call(b(this),o)))){i=t.getDataFieldOfCell.call(this,r,e).first();try{n=b.unformat.call(this,i,{rowId:r.id,colModel:a.colModel[e]},e)}catch(e){n=La(i.html())}}}),n},getCol:function(d,c,u){var p,h,f,g,m=[],v=0;return c="boolean"==typeof c&&c,void 0===u&&(u=!1),this.each(function(){var e,r,i=this.p;if(this.grid&&0<=(e=isNaN(d)?i.iColByName[d]:parseInt(d,10))){var a,o=this.rows,l=o.length,n=0,s=0;if(l&&0<l){for(;n<l;){if(a=o[n],b(a).hasClass("jqgrow")){r=t.getDataFieldOfCell.call(this,a,e).first();try{p=b.unformat.call(this,r,{rowId:a.id,colModel:i.colModel[e]},e)}catch(e){p=La(r.html())}u?(g=parseFloat(p),isNaN(g)||(v+=g,void 0===f&&(f=h=g),h=Math.min(h,g),f=Math.max(f,g),s++)):c?m.push({id:a.id,value:p}):m.push(p)}n++}if(u)switch(u.toLowerCase()){case"sum":m=v;break;case"avg":m=v/s;break;case"count":m=l-1;break;case"min":m=h;break;case"max":m=f}}}}),m},clearGridData:function(i){return this.each(function(){var e=this.p,t=this.rows,r=this.grid;r&&e&&t&&("boolean"!=typeof i&&(i=!1),b(this).off(".jqGridFormatter"),r.emptyRows.call(this,!1,!0),e.footerrow&&i&&b(".ui-jqgrid-ftable td",r.sDiv).html("&#160;"),e.selrow=null,X(e.selarrrow),X(e.savedRow),X(e.data),X(e.lastSelectedData),e._index={},e.rowIndexes={},e.records=0,e.page=1,e.lastpage=0,e.reccount=0,this.updatepager(!0,!1))})},getInd:function(e,t){var r=C.getGridRowById.call(b(this),e);return!!r&&(!0===t?r:r.rowIndex)},bindKeys:function(e){var c=b.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var n=this,s=n.p,d=b(n);s.scrollrows=c.scrollingRows,d.on("keydown.jqGrid",function(r){var i=b(this).find("tr[tabindex=0]")[0],e=t.detectRowEditing.call(n,b(r.target).closest("tr.jqgrow").attr("id")),a=function(e){do{if(null===(i=i[e]))return}while(b(i).is(":hidden")||!b(i).hasClass("jqgrow"));C.setSelection.call(d,i.id,!0),r.preventDefault()},o=function(e,t){var r=c["on"+e+(t||"")];d.triggerHandler("jqGridKey"+e,[s.selrow]),b.isFunction(r)&&r.call(n,s.selrow)},l=function(e){if(s.treeGrid){var t=s.data[s._index[Aa(s.idPrefix,i.id)]][s.treeReader.expanded_field];"Right"===e&&(t=!t),t&&b(i).find("div.treeclick").trigger("click")}o(e,"Key")};if(i&&null===e)switch(r.keyCode){case 38:a("previousSibling");break;case 40:a("nextSibling");break;case 37:l("Left");break;case 39:l("Right");break;case 13:o("Enter");break;case 32:o("Space")}})})},unbindKeys:function(){return this.each(function(){b(this).off("keydown.jqGrid")})},getLocalRow:function(e){var t,r=!1;return this.each(function(){void 0!==e&&(0<=(t=this.p._index[Aa(this.p.idPrefix,e)])&&(r=this.p.data[t]))}),r},progressBar:function(i){return i=b.extend({htmlcontent:"",method:"hide",loadtype:"disable"},i||{}),this.each(function(){var e="show"===i.method,t=H(this.p.id),r=b("#load_"+t);switch(""!==i.htmlcontent&&r.html(i.htmlcontent),i.loadtype){case"enable":r.toggle(e);break;case"block":b("#lui_"+t).toggle(e),r.toggle(e)}})},setColWidth:function(a,o,l,n){return this.each(function(){var e,t=b(this),r=this.grid,i=this.p;if("string"==typeof a){if(void 0===(a=i.iColByName[a]))return}else if("number"!=typeof a)return;null!=(e=r.headers[a])&&(e.newWidth=o,r.newWidth=i.tblwidth+o-e.width,r.resizeColumn(a,!i.frozenColumns,n),!1===l||n||(this.fixScrollOffsetAndhBoxPadding(),C.setGridWidth.call(t,r.newWidth+i.scrollOffset,!1)))})},getAutoResizableWidth:function(e){if(0===(r=this).length)return-1;var r,i,a,o,l,n=(r=r[0]).p,s=n.colModel[e],d=b(r.grid.headers[e].el);o=d.find(">div"),l=parseFloat(d.css("padding-left")||0),i=parseFloat(d.css("padding-right")||0),a=o.find("span.s-ico");var c=o.find(">."+n.autoResizing.wrapperClassName),u=c.outerWidth(),p=parseFloat(c.css("width")||0),h=d=0,f=null!=s.autoResizing&&void 0!==s.autoResizable.compact?s.autoResizable.compact:n.autoResizing.compact,g=n.autoResizing.wrapperClassName;if(null==s||!s.autoResizable||0===c.length||s.hidden||t.isCellClassHidden(s.classes)||s.fixed)return-1;for(f&&!a.is(":visible")&&"none"===a.css("display")||(h=a.outerWidth(!0),n.sortIconsBeforeText||(h-="rtl"===n.direction?parseFloat(a.css("padding-left")||0)+parseFloat(a.css("margin-left")||0):parseFloat(a.css("padding-right")||0)+parseFloat(a.css("margin-right")||0))),h+=u+l+(p===u?l+i:0)+parseFloat(o.css("margin-left")||0)+parseFloat(o.css("margin-right")||0),o=0,r=r.rows;o<r.length;o++)a=(i=r[o]).cells[e],l=b(i.cells[e]),null!=a&&(b(i).hasClass("jqgrow")||b(i).hasClass("jqgroup")&&1===a.colSpan)?(i=b(a.firstChild)).hasClass(g)?h=Math.max(h,i.outerWidth()+d):n.treeGrid&&n.ExpandColumn===s.name&&(i=l.children(".cell-wrapper,.cell-wrapperleaf"),h=Math.max(h,i.outerWidth()+d+l.children(".tree-wrap").outerWidth())):b(i).hasClass("jqgfirstrow")&&(d=(t.cell_width?parseFloat(l.css("padding-left")||0)+parseFloat(l.css("padding-right")||0):0)+parseFloat(l.css("border-right")||0)+parseFloat(l.css("border-left")||0));return h=Math.max(h,null!=s.autoResizing&&void 0!==s.autoResizing.minColWidth?s.autoResizing.minColWidth:n.autoResizing.minColWidth),Math.min(h,null!=s.autoResizing&&void 0!==s.autoResizing.maxColWidth?s.autoResizing.maxColWidth:n.autoResizing.maxColWidth)},autoResizeColumn:function(o,l){return this.each(function(){var e,t=b(this),r=this.p,i=r.colModel[o],a=b(this.grid.headers[o].el);e=C.getAutoResizableWidth.call(t,o),null==i||e<0||e===i.width||(C.setColWidth.call(t,o,e,r.autoResizing.adjustGridWidth&&!r.autoResizing.fixWidthOnShrink&&!l,l),r.autoResizing.fixWidthOnShrink&&r.shrinkToFit&&!l&&(i.fixed=!0,e=i.widthOrg,i.widthOrg=i.width,C.setGridWidth.call(t,r.width,!0),i.widthOrg=e,i.fixed=!1),a.data("autoResized","true"))})},autoResizeAllColumns:function(){return this.each(function(){var e,t,r=b(this),i=this.p,a=i.colModel,o=a.length,l=i.shrinkToFit,n=i.autoResizing.adjustGridWidth,s=i.autoResizing.fixWidthOnShrink,d=parseInt(i.widthOrg,10),c=this.grid,u=C.autoResizeColumn;for(i.shrinkToFit=!1,i.autoResizing.adjustGridWidth=!0,i.autoResizing.fixWidthOnShrink=!1,e=0;e<o;e++)(t=a[e]).autoResizable&&"actions"!==t.formatter&&u.call(r,e,!0);c.hDiv.scrollLeft=c.bDiv.scrollLeft,i.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft),this.fixScrollOffsetAndhBoxPadding(),isNaN(d)?n&&C.setGridWidth.call(r,c.newWidth+i.scrollOffset,!1):C.setGridWidth.call(r,d,!1),i.autoResizing.fixWidthOnShrink=s,i.autoResizing.adjustGridWidth=n,i.shrinkToFit=l})}});var Ja=function(e,t){var r=this.grid.fbRows;return b((null!=r&&r[0].cells.length>t?r[e.rowIndex]:e).cells[t])};t.extend({editCell:function(w,y,x){return this.each(function(){var e,r,i,a,o=this,l=b(o),n=o.p;if(e=o.rows,o.grid&&!0===n.cellEdit&&null!=e&&null!=e[w]&&(w=parseInt(w,10),y=parseInt(y,10),!isNaN(w)&&!isNaN(y))){var s=e[w],d=null!=s?s.id:null,c=b(s),u=parseInt(n.iCol,10),p=parseInt(n.iRow,10),h=b(e[p]),f=n.savedRow;if(null!=d){if(n.selrow=d,n.knv||l.jqGrid("GridNav"),0<f.length){if(!0===x&&w===p&&y===u)return;l.jqGrid("saveCell",f[0].id,f[0].ic)}else setTimeout(function(){b("#"+t.jqID(n.knv)).attr("tabindex","-1").focus()},1);if("subgrid"!==(e=(a=n.colModel[y]).name)&&"cb"!==e&&"rn"!==e){i=Ja.call(o,s,y),s=a.editable,b.isFunction(s)&&(s=s.call(o,{rowid:d,iCol:y,iRow:w,name:e,cm:a,mode:"cell"}));var g=l.jqGrid("getGuiStyles","states.select","edit-cell"),m=l.jqGrid("getGuiStyles","states.hover","selected-row");if(!0!==s||!0!==x||i.hasClass("not-editable-cell"))0<=u&&0<=p&&(Ja.call(o,h[0],u).removeClass(g),h.removeClass(m)),i.addClass(g),c.addClass(m),r=i.html().replace(/&#160;/gi,""),R.call(o,"onSelectCell",d,e,r,w,y);else{0<=u&&0<=p&&(Ja.call(o,h[0],u).removeClass(g),h.removeClass(m)),i.addClass(g),c.addClass(m),a.edittype||(a.edittype="text"),c=a.edittype;try{r=b.unformat.call(o,i,{rowId:d,colModel:a},y)}catch(e){r="textarea"===c?i.text():i.html()}n.autoEncodeOnEdit&&(r=t.oldDecodePostedData(r)),f.push({id:w,ic:y,name:e,v:r}),("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r=""),b.isFunction(n.formatCell)&&(void 0!==(u=n.formatCell.call(o,d,e,r,w,y))&&(r=u)),R.call(o,"beforeEditCell",d,e,r,w,y),a=b.extend({},a.editoptions||{},{id:w+"_"+e,name:e,rowId:d,mode:"cell",cm:a,iCol:y});var v=t.createEl.call(o,c,a,r,!0,b.extend({},t.ajaxOptions,n.ajaxSelectOptions||{}));c=i;(u=!0===n.treeGrid&&e===n.ExpandColumn)&&(c=i.children("span.cell-wrapperleaf,span.cell-wrapper")),c.html("").append(v).attr("tabindex","0"),u&&b(v).width(i.width()-i.children("div.tree-wrap").outerWidth()),t.bindEv.call(o,v,a),setTimeout(function(){b(v).focus()},1),b("input, select, textarea",i).on("keydown",function(e){if(27===e.keyCode&&(0<b("input.hasDatepicker",i).length?b(".ui-datepicker").is(":hidden")?l.jqGrid("restoreCell",w,y):b("input.hasDatepicker",i).datepicker("hide"):l.jqGrid("restoreCell",w,y)),13===e.keyCode&&!e.shiftKey)return l.jqGrid("saveCell",w,y),!1;if(9===e.keyCode){if(o.grid.hDiv.loading)return!1;e.shiftKey?l.jqGrid("prevCell",w,y):l.jqGrid("nextCell",w,y)}e.stopPropagation()}),R.call(o,"afterEditCell",d,e,r,w,y),l.triggerHandler("jqGridAfterEditCell",[d,e,r,w,y])}n.iCol=y,n.iRow=w}}}})},saveCell:function(S,q){return this.each(function(){var i=this,a=b(i),o=i.p,r=i.grid,l=t.info_dialog,e=t.jqID;if(r&&!0===o.cellEdit){var n=a.jqGrid("getGridRes","errors"),s=n.errcap,d=a.jqGrid("getGridRes","edit").bClose,c=o.savedRow,u=1<=c.length?0:null;if(null!==u){var p,h=(C=i.rows[S]).id,f=b(C),g=o.colModel[q],m=g.name,v=Ja.call(i,C,q),w={},y=t.getEditedValue.call(i,v,g,w);if(y!==c[u].v){void 0!==(p=a.triggerHandler("jqGridBeforeSaveCell",[h,m,y,S,q]))&&(y=p),b.isFunction(o.beforeSaveCell)&&(void 0!==(p=o.beforeSaveCell.call(i,h,m,y,S,q))&&(y=p));var x=t.checkValues.call(i,y,q,void 0,void 0,{oldValue:c[u].v,newValue:y,cmName:m,rowid:h,iCol:q,iRow:S,cm:g,tr:C,td:v,mode:"cell"}),C=g.formatoptions||{};if(null==x||!0===x||!0===x[0]){if(u=a.triggerHandler("jqGridBeforeSubmitCell",[h,m,y,S,q])||{},b.isFunction(o.beforeSubmitCell)&&((u=o.beforeSubmitCell.call(i,h,m,y,S,q))||(u={})),0<b("input.hasDatepicker",v).length&&b("input.hasDatepicker",v).datepicker("hide"),"date"===g.formatter&&!0!==C.sendFormatted&&(y=b.unformat.date.call(i,y,g)),"remote"===o.cellsubmit)if(o.cellurl){var j={};j[m]=y,C=(n=o.prmNames).oper,j[n.id]=t.stripPref(o.idPrefix,h),j[C]=n.editoper,j=b.extend(u,j),o.autoEncodeOnEdit&&b.each(j,function(e,r){b.isFunction(r)||(j[e]=t.oldEncodePostedData(r))}),a.jqGrid("progressBar",{method:"show",loadtype:o.loadui,htmlcontent:a.jqGrid("getGridRes","defaults.savetext")||"Saving..."}),r.hDiv.loading=!0,b.ajax(b.extend({url:b.isFunction(o.cellurl)?o.cellurl.call(i,o.cellurl,S,q,h,y,m):o.cellurl,data:t.serializeFeedback.call(i,o.serializeCellData,"jqGridSerializeCellData",j),type:"POST",complete:function(e){if(r.endReq.call(i),(e.status<300||304===e.status)&&(0!==e.status||4!==e.readyState)){var t=a.triggerHandler("jqGridAfterSubmitCell",[i,e,j.id,m,y,S,q])||[!0,""];(null==t||!0===t||!0===t[0]&&b.isFunction(o.afterSubmitCell))&&(t=o.afterSubmitCell.call(i,e,j.id,m,y,S,q)),null==t||!0===t||!0===t[0]?(a.jqGrid("setCell",h,q,y,!1,!1,!0),v.addClass("dirty-cell"),f.addClass("edited"),R.call(i,"afterSaveCell",h,m,y,S,q),c.splice(0,1)):(l.call(i,s,t[1],d),a.jqGrid("restoreCell",S,q))}},error:function(e,t,r){a.triggerHandler("jqGridErrorCell",[e,t,r]),b.isFunction(o.errorCell)?o.errorCell.call(i,e,t,r):l.call(i,s,e.status+" : "+e.statusText+"<br/>"+t,d),a.jqGrid("restoreCell",S,q)}},t.ajaxOptions,o.ajaxCellOptions||{}))}else try{l.call(i,s,n.nourl,d),a.jqGrid("restoreCell",S,q)}catch(e){}"clientArray"===o.cellsubmit&&(a.jqGrid("setCell",h,q,"select"===g.edittype&&"select"!==g.formatter?w.text:y,!1,!1,!0),v.addClass("dirty-cell"),f.addClass("edited"),R.call(i,"afterSaveCell",h,m,y,S,q),c.splice(0,1))}else try{setTimeout(function(){l.call(i,s,y+" "+x[1],d)},100),a.jqGrid("restoreCell",S,q)}catch(e){}}else a.jqGrid("restoreCell",S,q)}setTimeout(function(){b("#"+e(o.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(l,n){return this.each(function(){var e,t,r=this.p,i=this.rows[l],a=i.id;if(this.grid&&!0===r.cellEdit){var o=r.savedRow;if(e=Ja.call(this,i,n),1<=o.length){if(b.isFunction(b.fn.datepicker))try{b("input.hasDatepicker",e).datepicker("hide")}catch(e){}i=r.colModel[n],!0===r.treeGrid&&i.name===r.ExpandColumn?e.children("span.cell-wrapperleaf,span.cell-wrapper").empty():e.empty(),e.attr("tabindex","-1"),e=o[0].v,t=i.formatoptions||{},"date"===i.formatter&&!0!==t.sendFormatted&&(e=b.unformat.date.call(this,e,i)),b(this).jqGrid("setCell",a,n,e,!1,!1,!0),R.call(this,"afterRestoreCell",a,e,l,n),o.splice(0,1)}setTimeout(function(){b("#"+r.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(n,s){return this.each(function(){var e,t,r,i=b(this),a=this.p,o=!1,l=this.rows;if(this.grid&&!0===a.cellEdit&&null!=l&&null!=l[n]){for(e=s+1;e<a.colModel.length;e++)if(t=(r=a.colModel[e]).editable,b.isFunction(t)&&(t=t.call(this,{rowid:l[n].id,iCol:e,iRow:n,name:r.name,cm:r,mode:"cell"})),!0===t){o=e;break}!1!==o?i.jqGrid("editCell",n,o,!0):0<a.savedRow.length&&i.jqGrid("saveCell",n,s)}})},prevCell:function(n,s){return this.each(function(){var e,t,r,i=b(this),a=this.p,o=!1,l=this.rows;if(this.grid&&!0===a.cellEdit&&null!=l&&null!=l[n]){for(e=s-1;0<=e;e--)if(t=(r=a.colModel[e]).editable,b.isFunction(t)&&(t=t.call(this,{rowid:l[n].id,iCol:e,iRow:n,name:r.name,cm:r,mode:"cell"})),!0===t){o=e;break}!1!==o?i.jqGrid("editCell",n,o,!0):0<a.savedRow.length&&i.jqGrid("saveCell",n,s)}})},GridNav:function(){return this.each(function(){function i(e,t,r){if(e=n.rows[e],"v"===r.substr(0,1)){var i=c.clientHeight,a=c.scrollTop,o=e.offsetTop+e.clientHeight,l=e.offsetTop;"vd"===r&&i<=o&&(c.scrollTop+=e.clientHeight),"vu"===r&&l<a&&(c.scrollTop-=e.clientHeight)}"h"===r&&(r=c.scrollLeft,e=(t=e.cells[t]).offsetLeft,t.offsetLeft+t.clientWidth>=c.clientWidth+parseInt(r,10)?c.scrollLeft+=t.clientWidth:e<r&&(c.scrollLeft-=t.clientWidth))}function a(e,t){var r,i=0,a=d.colModel;if("lft"===t)for(i=e+1,r=e;0<=r;r--)if(!0!==a[r].hidden){i=r;break}if("rgt"===t)for(i=e-1,r=e;r<a.length;r++)if(!0!==a[r].hidden){i=r;break}return i}var o,l,n=this,s=b(n),d=n.p,e=n.grid;if(e&&!0===d.cellEdit){var c=e.bDiv;d.knv=d.id+"_kn";var t=b("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+d.knv+"'></div></div>");b(t).insertBefore(e.cDiv),b("#"+d.knv).focus().keydown(function(e){var t=parseInt(d.iRow,10),r=parseInt(d.iCol,10);switch(l=e.keyCode,"rtl"===d.direction&&(37===l?l=39:39===l&&(l=37)),l){case 38:0<t-1&&(i(t-1,r,"vu"),s.jqGrid("editCell",t-1,r,!1));break;case 40:t+1<=n.rows.length-1&&(i(t+1,r,"vd"),s.jqGrid("editCell",t+1,r,!1));break;case 37:0<=r-1&&(i(t,o=a(r-1,"lft"),"h"),s.jqGrid("editCell",t,o,!1));break;case 39:r+1<=d.colModel.length-1&&(i(t,o=a(r+1,"rgt"),"h"),s.jqGrid("editCell",t,o,!1));break;case 13:0<=r&&0<=t&&s.jqGrid("editCell",t,r,!0);break;default:return!0}return!1})}})},getChangedCells:function(u){var e=[];return u||(u="all"),this.each(function(){var n=this,s=n.p,d=t.htmlDecode,c=n.rows;n.grid&&!0===s.cellEdit&&b(c).each(function(a){var o={};if(b(this).hasClass("edited")){var l=this;b(this.cells).each(function(e){var t=s.colModel[e],r=t.name,i=Ja.call(n,l,e);if("cb"!==r&&"subgrid"!==r&&"rn"!==r&&("dirty"!==u||i.hasClass("dirty-cell")))try{o[r]=b.unformat.call(n,i[0],{rowId:c[a].id,colModel:t},e)}catch(e){o[r]=d(i.html())}}),o.id=this.id,e.push(o)}})}),e}});var O=C.getGuiStyles,ia=C.getGridRes;t.jqModal=t.jqModal||{},b.extend(!0,t.jqModal,{toTop:!0}),b.extend(t,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(e,t){var r=!(!(t=b.extend({jqm:!0,gb:"",removemodal:!1},t||{})).gb||"string"!=typeof t.gb||"#gbox_"!==t.gb.substr(0,6))&&b("#"+t.gb.substr(6))[0],i=b(e);if(!t.onClose||("boolean"!=typeof(r=r?t.onClose.call(r,e):t.onClose(e))||r)){if(b.fn.jqm&&!0===t.jqm)i.attr("aria-hidden","true").jqmHide();else{if(""!==t.gb)try{b(">.jqgrid-overlay",t.gb).first().hide()}catch(e){}i.hide().attr("aria-hidden","true")}t.removemodal&&i.remove()}},createModal:function(e,r,i,a,o,l,n){var s=t.jqID,d=null!=(d=this.p)&&d.jqModal||{};i=b.extend(!0,{resizingRightBottomIcon:C.getIconRes.call(this,"form.resizableLtr")},t.jqModal||{},d,i);d=document.createElement("div");var c="#"+s(e.themodal),u="rtl"===b(i.gbox).attr("dir"),p=!!e.resizeAlso&&"#"+s(e.resizeAlso);n=b.extend({},n||{}),d.className=O.call(this,"dialog.window","ui-jqdialog"),d.id=e.themodal,d.dir=u?"rtl":"ltr";var h=document.createElement("div");h.className=O.call(this,"dialog.document"),b(h).attr("role","document");var f=document.createElement("div");f.className=O.call(this,"dialog.subdocument"),h.appendChild(f),d.appendChild(h),(h=document.createElement("div")).className=O.call(this,"dialog.header","ui-jqdialog-titlebar "+(u?"ui-jqdialog-titlebar-rtl":"ui-jqdialog-titlebar-ltr")),h.id=e.modalhead,b(h).append("<span class='ui-jqdialog-title'>"+i.caption+"</span>");var g=O.call(this,"states.hover"),m=b("<a aria-label='Close' class='"+O.call(this,"dialog.closeButton","ui-jqdialog-titlebar-close")+"'></a>").hover(function(){m.addClass(g)},function(){m.removeClass(g)}).append("<span class='"+C.getIconRes.call(this,"form.close")+"'></span>");if(b(h).append(m),u=document.createElement("div"),b(u).addClass(O.call(this,"dialog.content","ui-jqdialog-content")).attr("id",e.modalcontent),b(u).append(r),f.appendChild(u),b(f).prepend(h),!0===l?b("body").append(d):"string"==typeof l?b(l).append(d):b(d).insertBefore(a),b(d).css(n),void 0===i.jqModal&&(i.jqModal=!0),r={},b.fn.jqm&&!0===i.jqModal?(0===i.left&&0===i.top&&i.overlay&&((i=b(o).offset()).left+=4,i.top+=4),r.top=i.top+"px",r.left=i.left):0===i.left&&0===i.top||(r.left=i.left,r.top=i.top+"px"),b("a.ui-jqdialog-titlebar-close",h).click(function(){var e=b(c).data("onClose")||i.onClose,r=b(c).data("gbox")||i.gbox;return t.hideModal(c,{gb:r,jqm:i.jqModal,onClose:e,removemodal:i.removemodal||!1}),!1}),0!==i.width&&i.width||(i.width=300),0!==i.height&&i.height||(i.height=200),i.zIndex||((a=b(a).parents("*[role=dialog]").first().css("z-index"))?(i.zIndex=parseInt(a,10)+2,i.toTop=!0):i.zIndex=950),r.left&&(r.left+="px"),b(d).css(b.extend({width:isNaN(i.width)?"auto":i.width+"px",height:isNaN(i.height)?"auto":i.height+"px",zIndex:i.zIndex},r)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":e.modalhead,"aria-hidden":"true"}),void 0===i.drag&&(i.drag=!0),void 0===i.resize&&(i.resize=!0),i.drag)if(b.fn.jqDrag)b(h).css("cursor","move"),b(d).jqDrag(h);else try{b(d).draggable({handle:b("#"+s(h.id))})}catch(e){}if(i.resize)if(b.fn.jqResize)b(u).append("<div class='jqResize ui-resizable-handle ui-resizable-se "+i.resizingRightBottomIcon+"'></div>"),b(c).jqResize(".jqResize",p);else try{b(d).resizable({handles:"se, sw",alsoResize:p})}catch(e){}!0===i.closeOnEscape&&b(d).keydown(function(e){27===e.which&&(e=b(c).data("onClose")||i.onClose,t.hideModal(c,{gb:i.gbox,jqm:i.jqModal,onClose:e,removemodal:i.removemodal||!1,formprop:!i.recreateForm||!1,form:i.form||""}))})},viewModal:function(e,r){if(r=b.extend(!0,{overlay:30,modal:!1,overlayClass:O.call(this,"overlay"),onShow:t.showModal,onHide:t.closeModal,gbox:"",jqm:!0,jqM:!0},t.jqModal||{},r||{}),b.fn.jqm&&!0===r.jqm)r.jqM?b(e).attr("aria-hidden","false").jqm(r).jqmShow():b(e).attr("aria-hidden","false").jqmShow();else{""!==r.gbox&&(b(">.jqgrid-overlay",r.gbox).first().show(),b(e).data("gbox",r.gbox)),b(e).show().attr("aria-hidden","false");try{b(":input:visible",e)[0].focus()}catch(e){}}},info_dialog:function(e,r,i,a){var o=this,l=o.p,n=b.extend(!0,{width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},t.jqModal||{},null!=l&&l.jqModal||{},{caption:"<b>"+e+"</b>"},a||{}),s=n.jqModal;b.fn.jqm&&!s&&(s=!1),e="";var d=O.call(o,"states.hover");if(0<n.buttons.length)for(a=0;a<n.buttons.length;a++)void 0===n.buttons[a].id&&(n.buttons[a].id="info_button_"+a),e+=t.builderFmButon.call(o,n.buttons[a].id,n.buttons[a].text);r="<div id='info_id'><div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+(isNaN(n.dataheight)?n.dataheight:n.dataheight+"px")+";text-align:"+n.align+";'>"+r+"</div>",(i||""!==e)&&(r+="<hr class='"+O.call(o,"dialog.hr")+"' style='margin:1px'/><div style='text-align:"+n.buttonalign+";padding:.8em 0 .5em 0;background-image:none;border-width: 1px 0 0 0;'>"+(i?t.builderFmButon.call(o,"closedialog",i):"")+e+"</div>"),r+="</div>";try{"false"===b("#info_dialog").attr("aria-hidden")&&t.hideModal("#info_dialog",{jqm:s}),b("#info_dialog").remove()}catch(e){}t.createModal.call(o,{themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",resizeAlso:"infocnt"},r,n,"","",!0),e&&b.each(n.buttons,function(e){b("#"+t.jqID(o.id),"#info_id").on("click",function(){return n.buttons[e].onClick.call(b("#info_dialog")),!1})}),b("#closedialog","#info_id").click(function(){return t.hideModal("#info_dialog",{jqm:s,onClose:b("#info_dialog").data("onClose")||n.onClose,gb:b("#info_dialog").data("gbox")||n.gbox}),!1}),b(".fm-button","#info_dialog").hover(function(){b(this).addClass(d)},function(){b(this).removeClass(d)}),b.isFunction(n.beforeOpen)&&n.beforeOpen(),t.viewModal.call(o,"#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:n.modal,jqm:s}),b.isFunction(n.afterOpen)&&n.afterOpen();try{b("#info_dialog").focus()}catch(e){}},bindEv:function(e,t){b.isFunction(t.dataInit)&&t.dataInit.call(this,e,t),t.dataEvents&&b.each(t.dataEvents,function(){void 0!==this.data?b(e).on(this.type,this.data,this.fn):b(e).on(this.type,this.fn)})},createEl:function(e,r,i,a,o){function u(r,e,i){var a="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr custom_element custom_value selectFilled rowId mode cm iCol".split(" ");void 0!==i&&b.isArray(i)&&b.merge(a,i),b.each(e,function(e,t){-1===b.inArray(e,a)&&b(r).attr(e,t)}),e.hasOwnProperty("id")||b(r).attr("id",t.randId())}var l="",p=this,n=p.p,s=t.info_dialog,d=ia.call(b(p),"errors.errcap"),c=(h=ia.call(b(p),"edit")).msg,h=h.bClose;if(null==r)return"";switch(e){case"textarea":l=document.createElement("textarea"),a?r.cols||b(l).css({width:"100%","box-sizing":"border-box"}):r.cols||(r.cols=19),r.rows||(r.rows=2),("&nbsp;"===i||"&#160;"===i||1===i.length&&160===i.charCodeAt(0))&&(i=""),l.value=i,u(l,r),b(l).attr({role:"textbox"});break;case"checkbox":(l=document.createElement("input")).type="checkbox",r.value?(i===(o=r.value.split(":"))[0]&&(l.checked=!0,l.defaultChecked=!0),l.value=o[0],b(l).data("offval",o[1])):((o=String(i).toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o?(l.checked=!0,l.defaultChecked=!0,l.value=i):l.value="on",b(l).data("offval","off")),u(l,r,["value"]),b(l).attr({role:"checkbox","aria-checked":l.checked?"true":"false"});break;case"select":l=document.createElement("select"),s=[],!(e=null)===r.multiple?(a=!0,l.multiple="multiple",b(l).attr("aria-multiselectable","true"),s=i.split(","),s=b.map(s,function(e){return b.trim(e)})):(a=!1,s[0]=b.trim(i)),void 0===r.size&&(r.size=a?3:1);try{e=r.rowId}catch(e){}if(n&&n.idPrefix&&(e=t.stripPref(n.idPrefix,e)),void 0!==r.dataUrl){var f=r.postData||o.postData;n={elem:l,options:r,cm:r.cm,mode:r.mode,rowid:e,iCol:r.iCol,ovm:s};b.ajax(b.extend({url:b.isFunction(r.dataUrl)?r.dataUrl.call(p,e,i,String(r.name),n):r.dataUrl,type:"GET",dataType:"html",data:b.isFunction(f)?f.call(p,e,i,String(r.name)):f,context:n,success:function(e,r,i){var a=this.ovm,o=this.elem,l=this.cm,n=this.iCol,s=b.extend({},this.options),d=this.rowid,c=this.mode;"string"==typeof(e=b.isFunction(s.buildSelect)?s.buildSelect.call(p,e,i,l,n):e)&&(e=b(b.trim(e)).html()),e&&(b(o).append(e),u(o,s,f?["postData"]:void 0),setTimeout(function(){var r;b("option",o).each(function(e){0===e&&o.multiple&&(this.selected=!1),-1<b.inArray(b.trim(b(this).val()),a)&&(r=this.selected=!0)}),r||b("option",o).each(function(){-1<b.inArray(b.trim(b(this).text()),a)&&(this.selected=!0)}),t.fullBoolFeedback.call(p,s.selectFilled,"jqGridSelectFilled",{elem:o,options:s,cm:l,rowid:d,mode:c,cmName:null!=l?l.name:s.name,iCol:n})},0))}},o||{}))}else r.value&&(t.fillSelectOptions(l,r.value,void 0===r.separator?":":r.separator,void 0===r.delimiter?";":r.delimiter,a,i),u(l,r,["value"]),t.fullBoolFeedback.call(p,r.selectFilled,"jqGridSelectFilled",{elem:l,options:r,cm:r.cm,rowid:e,mode:r.mode,cmName:null!=r.cm?r.cm.name:r.name,iCol:r.iCol}));break;case"text":case"password":case"button":o="button"===e?"button":"textbox",(l=document.createElement("input")).type=e,u(l,r),l.value=i,"button"!==e&&(a?r.size||b(l).css({width:"100%","box-sizing":"border-box"}):r.size||(r.size=20)),b(l).attr("role",o);break;case"image":case"file":(l=document.createElement("input")).type=e,u(l,r);break;case"custom":l=document.createElement("span");try{if(!b.isFunction(r.custom_element))throw"editoptions.custom_element is not a function";var g=r.custom_element.call(p,i,r);if(!(g instanceof jQuery||t.isHTMLElement(g)||"string"==typeof g))throw"editoptions.custom_element returns value of a wrong type";g=b(g).addClass("customelement").attr({id:r.id,name:r.name}),b(l).empty().append(g)}catch(e){"e1"===e&&s.call(p,d,"function 'custom_element' "+c.nodefined,h),"e2"===e?s.call(p,d,"function 'custom_element' "+c.novalue,h):s.call(p,d,"string"==typeof e?e:e.message,h)}}return l},checkDate:function(e,t){var r,i={};if(r=-1!==(e=e.toLowerCase()).indexOf("/")?"/":-1!==e.indexOf("-")?"-":-1!==e.indexOf(".")?".":"/",e=e.split(r),3!==(t=t.split(r)).length)return!1;var a,o,l,n=-1,s=r=-1;for(o=0;o<e.length;o++)a=isNaN(t[o])?0:parseInt(t[o],10),i[e[o]]=a,-1!==(a=e[o]).indexOf("y")&&(n=o),-1!==a.indexOf("m")&&(s=o),-1!==a.indexOf("d")&&(r=o);return a="y"===e[n]||"yyyy"===e[n]?4:"yy"===e[n]?2:-1,o=[0,31,29,31,30,31,30,31,31,30,31,30,31],-1!==n&&(l=i[e[n]].toString(),2===a&&1===l.length&&(a=1),l.length===a&&(0!==i[e[n]]||"00"===t[n])&&-1!==s&&(!((l=i[e[s]].toString()).length<1||i[e[s]]<1||12<i[e[s]]||-1===r)&&(!(a=(l=i[e[r]].toString()).length<1||i[e[r]]<1||31<i[e[r]])&&(a=2===i[e[s]])&&(n=i[e[n]],a=i[e[r]]>(0!=n%4||0==n%100&&0!=n%400?28:29)),!(a||i[e[r]]>o[i[e[s]]]))))},isEmpty:function(e){return!(!e.match(/^\s+$/)&&""!==e)},checkTime:function(e){if(!t.isEmpty(e)){if(!(e=e.match(/^(\d{1,2}):(\d{2})([apAP][Mm])?$/)))return!1;if(e[3]){if(e[1]<1||12<e[1])return!1}else if(23<e[1])return!1;if(59<e[2])return!1}return!0},checkValues:function(e,r,i,a,o){var l,n,s=this.p;n=s.colModel;var d=t.isEmpty,c=ia.call(b(this),"edit.msg"),u=ia.call(b(this),"formatter.date.masks");if(void 0===i){if("string"==typeof r&&(r=s.iColByName[r]),void 0===r||r<0)return[!0,"",""];i=(a=n[r]).editrules,null!=a.formoptions&&(l=a.formoptions.label)}else l=void 0===a?"_":a,a=n[r];if(i){if(l||(l=null!=s.colNames?s.colNames[r]:a.label),!0===i.required&&d(e))return[!1,l+": "+c.required,""];if(s=!1!==i.required,!0===i.number&&(!1!==s||!d(e))&&isNaN(e))return[!1,l+": "+c.number,""];if(void 0!==i.minValue&&!isNaN(i.minValue)&&parseFloat(e)<parseFloat(i.minValue))return[!1,l+": "+c.minValue+" "+i.minValue,""];if(void 0!==i.maxValue&&!isNaN(i.maxValue)&&parseFloat(e)>parseFloat(i.maxValue))return[!1,l+": "+c.maxValue+" "+i.maxValue,""];if(!(!0!==i.email||!1===s&&d(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)))return[!1,l+": "+c.email,""];if(!(!0!==i.integer||!1===s&&d(e)||!isNaN(e)&&0==e%1&&-1===e.indexOf(".")))return[!1,l+": "+c.integer,""];if(!(!0!==i.date||!1===s&&d(e)||(a.formatoptions&&a.formatoptions.newformat?(n=a.formatoptions.newformat,u.hasOwnProperty(n)&&(n=u[n])):n=n[r].datefmt||"Y-m-d",t.checkDate(n,e))))return[!1,l+": "+c.date+" - "+n,""];if(!0===i.time&&!(!1===s&&d(e)||t.checkTime(e)))return[!1,l+": "+c.date+" - hh:mm (am/pm)",""];if(!(!0!==i.url||!1===s&&d(e)||/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i.test(e)))return[!1,l+": "+c.url,""];if(!0===i.custom){if(!1!==s||!d(e))return b.isFunction(i.custom_func)?(e=i.custom_func.call(this,e,l,r),b.isArray(e)?e:[!1,c.customarray,""]):[!1,c.customfcheck,""]}else if(b.isFunction(i.custom)&&(!1!==s||!d(e)))return e=i.custom.call(this,o),b.isArray(e)?e:[!1,c.customarray,""]}return[!0,"",""]}}),t.extend({getColProp:function(e){var t=this[0];return null!=t&&t.grid&&void 0!==(e=t.p.iColByName[e])?t.p.colModel[e]:{}},setColProp:function(r,i){return this.each(function(){var e,t=this.p;this.grid&&null!=t&&i&&(void 0!==(e=t.iColByName[r])&&b.extend(!0,t.colModel[e],i))})},sortGrid:function(n,s,d){return this.each(function(){var e,t,r=this.grid,i=this.p,a=i.colModel,o=a.length,l=!1;if(r)for(n||(n=i.sortname),"boolean"!=typeof s&&(s=!1),t=0;t<o;t++)if((e=a[t]).index===n||e.name===n){!0===i.frozenColumns&&!0===e.frozen&&(l=r.fhDiv.find("#"+i.id+"_"+n)),l&&0!==l.length||(l=r.headers[t].el),("boolean"!=typeof(r=e.sortable)||r)&&this.sortData("jqgh_"+i.id+"_"+n,t,s,d,l);break}})},clearBeforeUnload:function(){return this.each(function(){var e,r=this.p,i=this.grid,a=t.clearArray,o=Object.prototype.hasOwnProperty;b.isFunction(i.emptyRows)&&i.emptyRows.call(this,!0,!0),b(document).off("mousemove.jqGrid mouseup.jqGrid"+r.id),b(this).off();var l,n=i.headers.length;for(l=0;l<n;l++)i.headers[l].el=null;for(e in i)i.hasOwnProperty(e)&&(i.propOrMethod=null);for(n=(i="formatCol sortData updatepager refreshIndex setHeadCheckBox constructTr clearToolbar fixScrollOffsetAndhBoxPadding rebuildRowIndexes modalAlert toggleToolbar triggerToolbar formatter addXmlData addJSONData ftoolbar _inlinenav nav grid p".split(" ")).length,l=0;l<n;l++)o.call(this,i[l])&&(this[i[l]]=null);this._index={},a(r.data),a(r.lastSelectedData),a(r.selarrrow),a(r.savedRow)})},GridDestroy:function(){return this.each(function(){var e=this.p;if(this.grid&&null!=e){e.pager&&b(e.pager).remove();try{b("#alertmod_"+H(e.id)).remove(),b(this).jqGrid("clearBeforeUnload"),b(e.gBox).remove()}catch(e){}}})},GridUnload:function(){return this.each(function(){var e=b(this),t=this.p,r=b.fn.jqGrid;this.grid&&(e.removeClass(r.getGuiStyles.call(e,"grid","ui-jqgrid-btable")),t.pager&&b(t.pager).empty().removeClass(r.getGuiStyles.call(e,"pagerBottom","ui-jqgrid-pager")).removeAttr("style").removeAttr("dir"),e.jqGrid("clearBeforeUnload"),e.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),e.empty(),e.insertBefore(t.gBox).show(),b(t.pager).insertBefore(t.gBox).show(),b(t.gBox).remove())})},setGridState:function(l){return this.each(function(){var e=this.p,t=(a=this.grid).cDiv,r=b(a.uDiv),i=b(a.ubDiv);if(a&&null!=e){var a=C.getIconRes.call(this,"gridMinimize.visible"),o=C.getIconRes.call(this,"gridMinimize.hidden");"hidden"===l?(b(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",e.gView).slideUp("fast"),e.pager&&b(e.pager).slideUp("fast"),e.toppager&&b(e.toppager).slideUp("fast"),!0===e.toolbar[0]&&("both"===e.toolbar[1]&&i.slideUp("fast"),r.slideUp("fast")),e.footerrow&&b(".ui-jqgrid-sdiv",e.gBox).slideUp("fast"),b(".ui-jqgrid-titlebar-close span",t).removeClass(a).addClass(o),e.gridstate="hidden"):"visible"===l&&(b(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",e.gView).slideDown("fast"),e.pager&&b(e.pager).slideDown("fast"),e.toppager&&b(e.toppager).slideDown("fast"),!0===e.toolbar[0]&&("both"===e.toolbar[1]&&i.slideDown("fast"),r.slideDown("fast")),e.footerrow&&b(".ui-jqgrid-sdiv",e.gBox).slideDown("fast"),b(".ui-jqgrid-titlebar-close span",t).removeClass(o).addClass(a),e.gridstate="visible")}})},filterToolbar:function(e){return this.each(function(){var v=this,u=v.grid,p=b(v),w=v.p,y=t.bindEv,x=t.info_dialog,c=t.htmlEncode;if(!this.ftoolbar){var C,j=b.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",idMode:"new",searchOperators:!1,resetIcon:"&times;",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},t.search,w.searching||{},e||{}),h=w.colModel,S=function(e){return ia.call(p,e)},q=S("errors.errcap"),D=S("edit.bClose"),R=S("edit.msg"),G=O.call(v,"states.hover"),f=O.call(v,"states.select"),F=O.call(v,"filterToolbar.dataField"),k={},_=function(e){var t="gs_";switch(j.idMode){case"compatibility":t+=w.idPrefix;break;case"new":t+=w.id+"_"}return t+e},a=function(e){var t;t=w.postData.filters;var r,i,a,o,l={};if(e)for(e=0;e<h.length;e++)!1!==(a=h[e]).search&&(o=a.searchoptions||{},l[a.name]={op:o.sopt?o.sopt[0]:"select"===a.stype?"eq":j.defaultSearch,data:void 0!==o.defaultValue?o.defaultValue:""});if(!t||!w.search)return l;if("string"==typeof t)try{t=b.parseJSON(t)}catch(e){t={}}else t=t||{};if(r=t.rules||{},null==t||null!=t.groupOp&&null!=j.groupOp&&t.groupOp.toUpperCase()!==j.groupOp.toUpperCase()||null==r||0===r.length||null!=t.groups&&0<t.groups.length)return l;for(e=0;e<r.length;e++)for(i=r[e],t=0;t<h.length;t++)if(((a=h[t]).index||a.name)===i.field&&!1!==a.search){if((o=a.searchoptions||{}).sopt){if(b.inArray(i.op,o.sopt)<0)continue}else if("select"===a.stype){if("eq"!==i.op)continue}else if(i.op!==j.defaultSearch)continue;l[a.name]={op:i.op,data:i.data}}return l},I=function(){var s={},d=0,c={};b.each(h,function(){var e,t,i=this,r=i.index||i.name;e=i.searchoptions||{};var a=b("#"+H(_(i.name)),!0===i.frozen&&!0===w.frozenColumns?u.fhDiv:u.hDiv),o=function(e,t){var r=i.formatoptions||{};return void 0!==r[e]?r[e]:S("formatter."+(t||i.formatter)+"."+e)},l=function(e){var t=o("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return e.replace(new RegExp(t,"g"),"")};if(t=j.searchOperators?a.parent().prev().children("a").data("soper")||j.defaultSearch:e.sopt?e.sopt[0]:"select"===i.stype?"eq":j.defaultSearch,"custom"===i.stype&&b.isFunction(e.custom_value)&&0<a.length&&"SPAN"===a[0].nodeName.toUpperCase())e=e.custom_value.call(v,a.children(".customelement").first(),"get");else if("select"===i.stype)e=a.val();else switch(e=b.trim(a.val()),i.formatter){case"integer":""!==(e=l(e).replace(o("decimalSeparator","number"),"."))&&(e=String(parseInt(e,10)));break;case"number":""!==(e=l(e).replace(o("decimalSeparator"),"."))&&"0"===String(e).charAt(0)&&(e=String(parseFloat(e)));break;case"currency":a=o("prefix");var n=o("suffix");a&&a.length&&(e=e.substr(a.length)),n&&n.length&&(e=e.substr(0,e.length-n.length)),""!==(e=l(e).replace(o("decimalSeparator"),"."))&&(e=String(parseFloat(e)))}if(e||"nu"===t||"nn"===t)s[r]=e,c[r]=t,d++;else if(s.hasOwnProperty(r)&&delete s[r],!j.stringResult&&!j.searchOperators&&"local"!==w.datatype)try{null!=w.postData&&w.postData.hasOwnProperty(r)&&delete w.postData[r]}catch(e){}});var e,t=0<d;if(j.stringResult||j.searchOperators||"local"===w.datatype){var r='{"groupOp":"'+j.groupOp+'","rules":[',i=0;b.each(s,function(e,t){0<i&&(r+=","),r+='{"field":"'+e+'",',r+='"op":"'+c[e]+'",',r+='"data":"'+(t+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',i++}),r+="]}",b.extend(w.postData,{filters:r}),b.each(["searchField","searchString","searchOper"],function(e,t){w.postData.hasOwnProperty(t)&&delete w.postData[t]})}else b.extend(w.postData,s);w.searchurl&&(e=w.url,p.jqGrid("setGridParam",{url:w.searchurl}));var a="stop"===p.triggerHandler("jqGridToolbarBeforeSearch");!a&&b.isFunction(j.beforeSearch)&&(a=j.beforeSearch.call(v)),a||p.jqGrid("setGridParam",{search:t}).trigger("reloadGrid",[b.extend({page:1},j.reloadGridSearchOptions||{})]),e&&p.jqGrid("setGridParam",{url:e}),p.triggerHandler("jqGridToolbarAfterSearch"),b.isFunction(j.afterSearch)&&j.afterSearch.call(v)},N=S("search.odata")||[],T=w.customSortOperations,A=b("<tr></tr>",{class:"ui-search-toolbar",role:"row form"});j.loadFilterDefaults&&(k=a()||{}),b.each(h,function(e){var n,r,i,a,o="",l=this.searchoptions||{},s=this.editoptions||{},d=b("<th></th>",{class:O.call(v,"colHeaders","ui-th-column ui-th-"+w.direction+" "+(j.applyLabelClasses&&this.labelClasses||"")),role:"gridcell","aria-describedby":w.id+"_"+this.name}),c=b("<div></div>"),u=b("<table class='ui-search-table'><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></table>");if(!0===this.hidden&&b(d).css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),n=b.extend({mode:"filter"},l),this.search){if(j.searchOperators){for(o=w.search&&null!=k[this.name]?k[this.name].op:n.sopt?n.sopt[0]:"select"===this.stype?"eq":j.defaultSearch,a=0;a<N.length;a++)if(N[a].oper===o){i=j.operands[o]||"";break}if(void 0===i&&null!=T)for(var p in T)if(T.hasOwnProperty(p)&&p===o){i=T[p].operand;break}void 0===i&&(i="="),o="<a title='"+(null!=n.searchtitle?n.searchtitle:S("search.operandTitle"))+"' data-soper='"+o+"' class='"+O.call(v,"searchToolbar.operButton","soptclass")+"' data-colname='"+this.name+"'>"+i+"</a>"}switch(b("td",u).first().data("colindex",e).append(o),null!=n.sopt&&1!==n.sopt.length||b("td.ui-search-oper",u).hide(),w.search&&null!=k[this.name]&&(n.defaultValue=k[this.name].data),void 0===n.clearSearch&&(n.clearSearch="text"===this.stype),n.clearSearch?(i=b.isFunction(j.resetTitle)?j.resetTitle.call(v,{options:j,cm:this,cmName:this.name,iCol:e}):(S("search.resetTitle")||"Clear Search Value")+" "+t.stripHtml(w.colNames[e]),b("td",u).eq(2).append("<a title='"+i+"' aria-label='"+i+"' class='"+O.call(v,"searchToolbar.clearButton","clearsearchclass")+"'><span>"+j.resetIcon+"</span></a>")):b("td",u).eq(2).hide(),this.stype){case"select":var h,f,g;if(r=this.surl||n.dataUrl)b(c).append(u),b.ajax(b.extend({url:r,context:{stbl:u,options:n,cm:this,iCol:e},dataType:"html",success:function(e,r,i){r=this.cm;var a=this.iCol,o=this.options,l=this.stbl.find(">tbody>tr>td.ui-search-input");void 0!==o.buildSelect?(e=o.buildSelect.call(v,e,i,r,a))&&l.append(e):l.append(e),(e=l.children("select")).attr({name:r.index||r.name,id:_(r.name)}),o.attr&&e.attr(o.attr),e.addClass(F),e.css({width:"100%"}),0===e.find("option[value='']").length&&"string"==typeof n.noFilterText&&((m=document.createElement("option")).value="",m.innerHTML=n.noFilterText,e.prepend(m)),void 0!==o.defaultValue&&e.val(o.defaultValue),y.call(v,e[0],o),t.fullBoolFeedback.call(v,o.selectFilled,"jqGridSelectFilled",{elem:e[0],options:o,cm:r,cmName:r.name,iCol:a,mode:"filter"}),!0===j.autosearch&&e.change(function(){return I(),!1})}},t.ajaxOptions,w.ajaxSelectOptions||{}));else if(this.searchoptions?(h=void 0===l.value?s.value||"":l.value,f=void 0===l.separator?s.separator||":":l.separator,g=void 0===l.delimiter?s.delimiter||";":l.delimiter):this.editoptions&&(h=void 0===s.value?"":s.value,f=void 0===s.separator?":":s.separator,g=void 0===s.delimiter?";":s.delimiter),h){if((l=document.createElement("select")).style.width="100%",b(l).attr({name:this.index||this.name,id:_(this.name),"aria-describedby":w.id+"_"+this.name}),n.attr&&b(l).attr(n.attr),!t.fillSelectOptions(l,h,f,g,null!=n.attr&&n.attr.multiple)&&"string"==typeof n.noFilterText){var m=document.createElement("option");m.value="",m.innerHTML=n.noFilterText,m.selected=!0,b(l).prepend(m)}void 0!==n.defaultValue&&b(l).val(n.defaultValue),b(l).addClass(F),b(c).append(u),y.call(v,l,n),b("td",u).eq(1).append(l),t.fullBoolFeedback.call(v,n.selectFilled,"jqGridSelectFilled",{elem:l,options:this.searchoptions||s,cm:this,cmName:this.name,iCol:e,mode:"filter"}),!0===j.autosearch&&b(l).change(function(){return I(),!1})}break;case"text":e=void 0!==n.defaultValue?n.defaultValue:"",b("td",u).eq(1).append("<input role='search' type='text' class='"+F+"' name='"+(this.index||this.name)+"' id='"+_(this.name)+"' aria-labelledby='jqgh_"+w.id+"_"+this.name+"' value='"+e+"'/>"),b(c).append(u),n.attr&&b("input",c).attr(n.attr),y.call(v,b("input",c)[0],n),!0===j.autosearch&&(j.searchOnEnter?b("input",c).keypress(function(e){return 13===(e.charCode||e.keyCode||0)?(I(),!1):this}):b("input",c).keydown(function(e){switch(e.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:C&&clearTimeout(C),C=setTimeout(function(){I()},j.autosearchDelay)}}));break;case"custom":b("td",u).eq(1).append("<span style='width:100%;padding:0;box-sizing:border-box;' class='"+F+"' name='"+(this.index||this.name)+"' id='"+_(this.name)+"'/>"),b(c).append(u);try{if(!b.isFunction(n.custom_element))throw"e1";if(!(r=n.custom_element.call(v,void 0!==n.defaultValue?n.defaultValue:"",n)))throw"e2";r=b(r).addClass("customelement"),b(c).find("span[name='"+(this.index||this.name)+"']").append(r)}catch(e){"e1"===e&&x.call(v,q,"function 'custom_element' "+R.nodefined,D),"e2"===e?x.call(v,q,"function 'custom_element' "+R.novalue,D):x.call(v,q,"string"==typeof e?e:e.message,D)}}}b(d).append(c),b(d).find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){b(this).addClass(G)},function(){b(this).removeClass(G)}),b(A).append(d),j.searchOperators||b("td",u).eq(0).hide()}),b(u.hDiv).find(">div>.ui-jqgrid-htable>thead").append(A),j.searchOperators&&(b(".soptclass",A).click(function(e){var t=b(this).offset();!function(r,e,t){b("#sopt_menu").remove(),e=parseInt(e,10),t=parseInt(t,10)+18;var i,a=0,o=[],l=b(r).data("soper"),n=(a=b(r).data("colname"),b(".ui-jqgrid-view").css("font-size")||"11px");if(e="<ul id='sopt_menu' class='"+O.call(v,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+n+";left:"+e+"px;top:"+t+"px;'>",void 0!==(a=w.iColByName[a])){var s,d;for(a=h[a],(t=b.extend({},a.searchoptions)).sopt||(t.sopt=[],t.sopt[0]="select"===a.stype?"eq":j.defaultSearch),b.each(N,function(){o.push(this.oper)}),null!=T&&b.each(T,function(e){o.push(e)}),a=0;a<t.sopt.length;a++)n=t.sopt[a],-1!==(i=b.inArray(n,o))&&(void 0!==(i=N[i])?(d=j.operands[n],s=i.text):null!=T&&(d=(s=T[n]).operand,s=s.text),e+='<li class="ui-menu-item '+(i=l===n?f:"")+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+c(n)+'" data-oper="'+c(d)+'"><table><tr><td style="width:25px">'+c(d)+"</td><td>"+c(s)+"</td></tr></table></a></li>");e+="</ul>",b("body").append(e),b("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all"),b("#sopt_menu > li > a").hover(function(){b(this).addClass(G)},function(){b(this).removeClass(G)}).click(function(){var e=b(this).attr("value"),t=b(this).data("oper");p.triggerHandler("jqGridToolbarSelectOper",[e,t,r]),b("#sopt_menu").hide(),b(r).text(t).data("soper",e),!0===j.autosearch&&(t=b(r).parent().next().children()[0],(b(t).val()||"nu"===e||"nn"===e)&&I())})}}(this,t.left,t.top),e.stopPropagation()}),b("body").on("click",function(e){"soptclass"!==e.target.className&&b("#sopt_menu").hide()})),b(".clearsearchclass",A).click(function(){var e=b(this).parents("tr").first(),t=parseInt(b("td.ui-search-oper",e).data("colindex"),10),r=b.extend({},h[t].searchoptions||{}).defaultValue||"";"select"===h[t].stype?r?b("td.ui-search-input select",e).val(r):b("td.ui-search-input select",e)[0].selectedIndex=0:b("td.ui-search-input input",e).val(r),!0===j.autosearch&&I()}),v.ftoolbar=!0,v.triggerToolbar=I,v.clearToolbar=function(e){var a,o={},l=0;e="boolean"!=typeof e||e,b.each(h,function(){var t,r,e=b("#"+H(_(this.name)),!0===this.frozen&&!0===w.frozenColumns?u.fhDiv:u.hDiv),i=this.searchoptions||{};switch(void 0!==i.defaultValue&&(t=i.defaultValue),a=this.index||this.name,this.stype){case"select":if(r=!(0<e.length)||!e[0].multiple,e.find("option").each(function(e){if(this.selected=0===e&&r,b(this).val()===t)return!(this.selected=!0)}),void 0!==t)o[a]=t,l++;else try{delete w.postData[a]}catch(e){}break;case"text":if(e.val(t||""),void 0!==t)o[a]=t,l++;else try{delete w.postData[a]}catch(e){}break;case"custom":b.isFunction(i.custom_value)&&0<e.length&&"SPAN"===e[0].nodeName.toUpperCase()&&i.custom_value.call(v,e.children(".customelement").first(),"set",t||"")}});var t,r=0<l;if(w.resetsearch=!0,j.stringResult||j.searchOperators||"local"===w.datatype){var i='{"groupOp":"'+j.groupOp+'","rules":[',n=0;b.each(o,function(e,t){0<n&&(i+=","),i+='{"field":"'+e+'",',i+='"op":"eq",',i+='"data":"'+(t+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',n++}),i+="]}",b.extend(w.postData,{filters:i}),b.each(["searchField","searchString","searchOper"],function(e,t){w.postData.hasOwnProperty(t)&&delete w.postData[t]})}else b.extend(w.postData,o);w.searchurl&&(t=w.url,p.jqGrid("setGridParam",{url:w.searchurl}));var s="stop"===p.triggerHandler("jqGridToolbarBeforeClear");!s&&b.isFunction(j.beforeClear)&&(s=j.beforeClear.call(v)),s||e&&p.jqGrid("setGridParam",{search:r}).trigger("reloadGrid",[b.extend({page:1},j.reloadGridResetOptions||{})]),t&&p.jqGrid("setGridParam",{url:t}),p.triggerHandler("jqGridToolbarAfterClear"),b.isFunction(j.afterClear)&&j.afterClear()},v.toggleToolbar=function(){var e=b("tr.ui-search-toolbar",u.hDiv),t=!0===w.frozenColumns&&b("tr.ui-search-toolbar",u.fhDiv);"none"===e.css("display")?(e.show(),t&&t.show()):(e.hide(),t&&t.hide()),!0===w.frozenColumns&&(p.jqGrid("destroyFrozenColumns"),p.jqGrid("setFrozenColumns"))},!0===w.frozenColumns&&(p.jqGrid("destroyFrozenColumns"),p.jqGrid("setFrozenColumns")),p.on("jqGridRefreshFilterValues.filterToolbar"+(j.loadFilterDefaults?" jqGridAfterLoadComplete.filterToolbar":""),function(){var e,t,r,i=a(!0)||{};if(j.stringResult||j.searchOperators||"local"===w.datatype||!w.search){for(e in i)i.hasOwnProperty(e)&&(t=i[e],0<(r=b("#"+H(_(e)))).length&&("SELECT"===r[0].tagName.toUpperCase()&&r[0].multiple?r.val(t.data.split(",")):b.trim(r.val())!==t.data&&r.val(t.data),(r=r.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass")).data("soper",t.op),r.text(j.operands[t.op])));for(t=0;t<w.colModel.length;t++)e=w.colModel[t].name,i.hasOwnProperty(e)||b("#"+H(_(e))).val("")}})}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.toggleToolbar=this.clearToolbar=this.triggerToolbar=null,this.ftoolbar=!1,b(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),!0===this.p.frozenColumns&&b(this).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns"))})},destroyGroupHeader:function(s){return void 0===s&&(s=!0),this.each(function(){var e,t,r,i;e=this.grid;var a=this.p.colModel,o=b("table.ui-jqgrid-htable thead",e.hDiv);if(e){b(this).off(".setGroupHeaders");var l=b("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),n=e.headers;for(e=0,t=n.length;e<t;e++){r=a[e].hidden?"none":"",r=b(n[e].el).width(n[e].width).css("display",r);try{r.removeAttr("rowSpan")}catch(e){r.attr("rowSpan",1)}l.append(r),0<(i=r.children("span.ui-jqgrid-resize")).length&&(i[0].style.height=""),r.children("div")[0].style.top=""}b(o).children("tr.ui-jqgrid-labels").remove(),b(o).prepend(l),!0===s&&b(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(x){return x=b.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},x||{}),this.each(function(){this.p.groupHeader=x;var e,r,i,a,o,l,n,s,d=0,c=this.p,u=c.colModel,p=u.length,h=this.grid.headers,f=b("table.ui-jqgrid-htable",this.grid.hDiv),g=t.isCellClassHidden,m=f.children("thead").children("tr.ui-jqgrid-labels"),v=m.last().addClass("jqg-second-row-header");i=f.children("thead");var w=f.find(".jqg-first-row-header");void 0===w[0]?w=b("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):w.empty();var y=function(e,t){var r;for(r=0;r<t.length;r++)if(t[r].startColumnName===e)return t[r];return 0};for(b(this).prepend(i),i=b("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),e=0;e<p;e++)if(o=h[e].el,l=b(o),r=u[e],a={height:"0",width:h[e].width+"px",display:r.hidden?"none":""},b("<th>",{role:"gridcell"}).css(a).addClass("ui-first-th-"+c.direction+(x.applyLabelClasses?" "+(r.labelClasses||""):"")).appendTo(w),o.style.width="",a=O.call(this,"colHeaders","ui-th-column-header ui-th-"+c.direction+" "+(x.applyLabelClasses&&r.labelClasses||"")),n=y(r.name,x.groupHeaders)){for(d=n.numberOfColumns,s=n.titleText,n=r=0;n<d&&e+n<p;n++)u[e+n].hidden||g(u[e+n].classes)||r++;a=b("<th>").addClass(a).css({height:"22px","border-top":"0 none"}).html(s),0<r&&a.attr("colspan",String(r)),c.headertitles&&a.attr("title",a.text()),0===r&&a.hide(),l.before(a),i.append(o),--d}else 0===d?x.useColSpanStyle?l.attr("rowspan",m.length+1):(b("<th>").addClass(a).css({display:r.hidden?"none":"","border-top":"0 none"}).insertBefore(l),i.append(o)):(i.append(o),d--);(c=b(this).children("thead")).prepend(w),i.insertAfter(v),f.prepend(c),x.useColSpanStyle&&(f.find("span.ui-jqgrid-resize").each(function(){var e=b(this).parent();e.is(":visible")&&(this.style.cssText="height:"+e.height()+"px !important;cursor:col-resize;")}),f.find(".ui-th-column>div").each(function(){var e=b(this),t=e.parent();t.is(":visible")&&t.is(":has(span.ui-jqgrid-resize)")&&!e.hasClass("ui-jqgrid-rotate")&&!e.hasClass("ui-jqgrid-rotateOldIE")&&e.css("top",(t.height()-e.outerHeight(!0))/2+"px")})),b(this).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){if(0===(e=this).length)return 0;var e,t,r=(e=(e=e[0]).p.colModel).length,i=-1;for(t=0;t<r&&!0===e[t].frozen;t++)i=t;return i+1},setFrozenColumns:function(C){return C=C||{},this.each(function(){var t=this,a=b(t),f=t.p,o=t.grid;if(o&&null!=f&&!0!==f.frozenColumns){var g,e=f.colModel,r=e.length,l=-1,i=!1,n=[],s=H(f.id),d=O.call(t,"states.hover"),c=O.call(t,"states.disabled");if(!0!==f.subGrid&&!0!==f.treeGrid&&!f.scroll){for(g=0;g<r&&!0===e[g].frozen;g++)i=!0,l=g,n.push("#jqgh_"+s+"_"+H(e[g].name));if(f.sortable&&((e=b(o.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels")).sortable("destroy"),a.jqGrid("setGridParam",{sortable:{options:{items:0<n.length?">th:not(:has("+n.join(",")+"),:hidden)":">th:not(:hidden)"}}}),a.jqGrid("sortableColumns",e)),0<=l&&i){if(i=f.caption?b(o.cDiv).outerHeight():0,n=b(".ui-jqgrid-htable",f.gView).height(),f.toppager&&(i+=b(o.topDiv).outerHeight()),!0===f.toolbar[0]&&"bottom"!==f.toolbar[1]&&(i+=b(o.uDiv).outerHeight()),o.fhDiv=b("<div style='position:absolute;overflow:hidden;"+("rtl"===f.direction?"right:0;border-top-left-radius:0;":"left:0;border-top-right-radius:0;")+"top:"+i+"px;height:"+n+"px;' class='"+O.call(t,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>"),o.fbDiv=b("<div style='position:absolute;overflow:hidden;"+("rtl"===f.direction?"right:0;":"left:0;")+"top:"+(parseInt(i,10)+parseInt(n,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>"),b(f.gView).append(o.fhDiv),r=(e=b(".ui-jqgrid-htable",f.gView).clone(!0))[0].tHead.rows,f.groupHeader){b(r[0].cells).filter(":gt("+l+")").remove(),b(r).filter(".jqg-third-row-header").each(function(){b(this).children("th[id]").each(function(){var e=b(this).attr("id");e&&e.substr(0,t.id.length+1)===t.id+"_"&&(e=e.substr(t.id.length+1),f.iColByName[e]>l&&b(this).remove())})});var u,p=-1,h=-1;b(r).filter(".jqg-second-row-header").children("th").each(function(){if(u=parseInt(b(this).attr("colspan")||1,10),1<parseInt(b(this).attr("rowspan")||1,10)?(p++,h++):u&&(p+=u,h++),p===l)return!1}),p!==l&&(h=l),b(r).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){b(this).children(":gt("+h+")").remove()})}else b(r).each(function(){b(this).children(":gt("+l+")").remove()});b(e).width(1),b(o.fhDiv).append(e).scroll(function(){this.scrollLeft=0}),f.footerrow&&(e=b(".ui-jqgrid-bdiv",f.gView).height(),o.fsDiv=b("<div style='position:absolute;"+("rtl"===f.direction?"right:0;":"left:0;")+"top:"+(parseInt(i,10)+parseInt(n,10)+parseInt(e,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),b(f.gView).append(o.fsDiv),i=b(".ui-jqgrid-ftable",f.gView).clone(!0),b("tr",i).each(function(){b("td:gt("+l+")",this).remove()}),b(i).width(1),b(o.fsDiv).append(i)),a.on("jqGridSortCol.setFrozenColumns",function(e,t,r){e=b("tr.ui-jqgrid-labels:last th:eq("+f.lastsort+")",o.fhDiv),t=b("tr.ui-jqgrid-labels:last th:eq("+r+")",o.fhDiv),b("span.ui-grid-ico-sort",e).addClass(c),b(e).attr("aria-selected","false"),b("span.ui-icon-"+f.sortorder,t).removeClass(c),b(t).attr("aria-selected","true"),f.viewsortcols[0]||f.lastsort===r||(b("span.s-ico",e).hide(),b("span.s-ico",t).show())}),b(f.gView).append(o.fbDiv),b(o.bDiv).scroll(function(){b(o.fbDiv).scrollTop(b(this).scrollTop())}),b(o.fbDiv).on("mousewheel.setFrozenColumns DOMMouseScroll.setFrozenColumns",function(e){o.bDiv.scrollTop+=b.isFunction(C.mouseWheel)?C.mouseWheel.call(t,e):"mousewheel"===e.type?-e.originalEvent.wheelDelta/10:6*e.originalEvent.detail}),!0===f.hoverrows&&b(f.idSel).off("mouseover.jqGrid mouseout.jqGrid");var m=function(e,t){var r=e.height();1<=Math.abs(r-t)&&0<t&&(e.height(t),r=e.height(),1<=Math.abs(t-r)&&e.height(t+Math.round(t-r)))},v=function(e,t){var r=e.width();1<=Math.abs(r-t)&&(e.width(t),r=e.width(),1<=Math.abs(t-r)&&e.width(t+Math.round(t-r)))},w=function(e,t,r,i){var a,o,l,n,s,d,c,u,p,h;if(c=b(t).position().top,null!=e&&0<e.length){if(e[0].scrollTop=t.scrollTop,e.css("rtl"===f.direction?{top:c,right:0}:{top:c,left:0}),o=e.children("table").children("thead").children("tr"),0===(l=b(t).children("div").children("table").children("thead").children("tr")).length&&(o=b(e.children("table")[0].rows),l=b(b(t).children("div").children("table")[0].rows)),u=0<(a=Math.min(o.length,l.length))?b(o[0]).position().top:0,p=0<a?b(l[0]).position().top:0,0<=r)for(0<=i&&(a=Math.min(i+1,a));r<a;r++)if("none"!==(n=b(l[r])).css("display")&&n.is(":visible")){if(c=n.position().top,s=(i=b(o[r])).position().top,d=n.height(),null!=f.groupHeader&&f.groupHeader.useColSpanStyle)for(h=n[0].cells,g=0;g<h.length;g++)null!=(n=h[g])&&"TH"===n.nodeName.toUpperCase()&&(d=Math.max(d,b(n).height()));m(i,c=d+(c-p)+(u-s))}m(e,t.clientHeight)}},y={header:i={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},resizeFooter:!0,body:i};a.on("jqGridAfterGridComplete.setFrozenColumns",function(){b(f.idSel+"_frozen").remove(),b(o.fbDiv).height(o.hDiv.clientHeight);var e=b(this).clone(!0),t=e[0].rows,r=a[0].rows;if(b(t).filter("tr[role=row]").each(function(){b(this.cells).filter("td[role=gridcell]:gt("+l+")").remove()}),o.fbRows=t,e.width(1).attr("id",f.id+"_frozen"),e.appendTo(o.fbDiv),!0===f.hoverrows){var i=function(e,t,r){b(e)[t](d),b(r[e.rowIndex])[t](d)};b(t).filter(".jqgrow").hover(function(){i(this,"addClass",r)},function(){i(this,"removeClass",r)}),b(r).filter(".jqgrow").hover(function(){i(this,"addClass",t)},function(){i(this,"removeClass",t)})}w(o.fhDiv,o.hDiv,0,-1),w(o.fbDiv,o.bDiv,0,-1),o.sDiv&&w(o.fsDiv,o.sDiv,0,-1)});var x=function(e){b(o.fbDiv).scrollTop(b(o.bDiv).scrollTop()),e.header.resizeDiv&&w(o.fhDiv,o.hDiv,e.header.resizedRows.iRowStart,e.header.resizedRows.iRowEnd),e.body.resizeDiv&&w(o.fbDiv,o.bDiv,e.body.resizedRows.iRowStart,e.body.resizedRows.iRowEnd),e.resizeFooter&&o.sDiv&&e.resizeFooter&&w(o.fsDiv,o.sDiv,0,-1);var t=o.fhDiv[0].clientWidth;e.header.resizeDiv&&null!=o.fhDiv&&1<=o.fhDiv.length&&m(b(o.fhDiv),o.hDiv.clientHeight),e.body.resizeDiv&&null!=o.fbDiv&&0<o.fbDiv.length&&v(b(o.fbDiv),t),e.resizeFooter&&null!=o.fsDiv&&0<=o.fsDiv.length&&v(b(o.fsDiv),t)};b(f.gBox).on("resizestop.setFrozenColumns",function(){setTimeout(function(){x(y)},50)}),a.on("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",function(e,t){var r=a.jqGrid("getInd",t);x({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:r,iRowEnd:r}}})}),a.on("jqGridResizeStop.setFrozenColumns",function(){x(y)}),a.on("jqGridResetFrozenHeights.setFrozenColumns",function(e,t){x(t||y)}),o.hDiv.loading||a.triggerHandler("jqGridAfterGridComplete"),f.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var e=b(this),t=this.grid,r=this.p,i=H(r.id);if(t&&!0===r.frozenColumns){if(b(t.fhDiv).remove(),b(t.fbDiv).off(".setFrozenColumns"),b(t.fbDiv).remove(),t.fhDiv=null,t.fbDiv=null,t.fbRows=null,r.footerrow&&(b(t.fsDiv).remove(),t.fsDiv=null),e.off(".setFrozenColumns"),!0===r.hoverrows){var a,o=O.call(this,"states.hover");e.on("mouseover.jqGrid",function(e){a=b(e.target).closest("tr.jqgrow"),"ui-subgrid"!==b(a).attr("class")&&b(a).addClass(o)}).on("mouseout.jqGrid",function(e){a=b(e.target).closest("tr.jqgrow"),b(a).removeClass(o)})}r.frozenColumns=!1,r.sortable&&((t=b(t.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels")).sortable("destroy"),e.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+i+"_cb,#jqgh_"+i+"_rn,#jqgh_"+i+"_subgrid),:hidden)"}}}),e.jqGrid("sortableColumns",t))}})}}),b.fn.jqFilter=function(e){if("string"==typeof e){var r=b.fn.jqFilter[e];if(!r)throw"jqFilter - No such method: "+e;var i=b.makeArray(arguments).slice(1);return r.apply(this,i)}var q=b.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:"eq ne lt le gt ge nu nn in ni".split(" "),stropts:"eq ne bw bn ew en cn nc nu nn in ni".split(" "),strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},t.filter,e||{});return this.each(function(){if(!this.filter){null!==(this.p=q).filter&&void 0!==q.filter||(q.filter={groupOp:q.groupOps[0].op,rules:[],groups:[]});var e,r,i=q.columns.length,w=/msie/i.test(navigator.userAgent)&&!window.opera,y=b.isFunction,a=null!=t.defaults&&y(t.defaults.fatalError)?t.defaults.fatalError:alert,x=function(){return b("#"+t.jqID(q.id))[0]||null},C=function(e,t){return b(x()).jqGrid("getGuiStyles",e,t||"")},j=function(e){return b(x()).jqGrid("getGridRes","search."+e)},S=function(e){var t=x(),r=t.p.iColByName[e];return void 0!==r?{cm:t.p.colModel[r],iCol:r}:void 0!==(r=t.p.iPropByName[e])?{cm:t.p.colModel[r],iCol:r,isAddProp:!0}:{cm:null,iCol:-1}},c=C("states.error"),o=C("dialog.content");if(q.initFilter=b.extend(!0,{},q.filter),i){for(e=0;e<i;e++)(r=q.columns[e]).stype?r.inputtype=r.stype:r.inputtype||(r.inputtype="text"),r.sorttype?r.searchtype=r.sorttype:r.searchtype||(r.searchtype="string"),void 0===r.hidden&&(r.hidden=!1),r.label||(r.label=r.name),r.cmName=r.name,r.index&&(r.name=r.index),r.hasOwnProperty("searchoptions")||(r.searchoptions={}),r.hasOwnProperty("searchrules")||(r.searchrules={});q.showQuery&&b(this).append("<table class='queryresult "+o+"' style='display:block;max-width:440px;border:0px none;' dir='"+q.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var s=function(e,r){var i=[!0,""],a=x();if(y(r.searchrules))i=r.searchrules.call(a,e,r);else if(t&&t.checkValues)try{i=t.checkValues.call(a,e,-1,r.searchrules,r.label)}catch(e){}i&&i.length&&!1===i[0]&&(q.error=!i[0],q.errmsg=i[1])};this.onchange=function(){return q.error=!1,q.errmsg="",!!y(q.onChange)&&q.onChange.call(x(),q,this)},this.reDraw=function(){b("table.group:first",this).remove();var e=this.createTableForGroup(q.filter,null);b(this).append(e),y(q.afterRedraw)&&q.afterRedraw.call(x(),q,this)},this.createTableForGroup=function(r,e){var i,a=this,t=b("<table class='"+C("searchDialog.operationGroup","group")+"' style='border:0px none;'><tbody></tbody></table>"),o="left";"rtl"===q.direction&&(o="right",t.attr("dir","rtl")),null===e&&t.append("<tr class='error' style='display:none;'><th colspan='5' class='"+c+"' align='"+o+"'></th></tr>");var l,n=b("<tr></tr>");if(t.append(n),o=b("<th colspan='5' align='"+o+"'></th>"),n.append(o),!0===q.ruleButtons){var s=b("<select class='"+C("searchDialog.operationSelect","opsel")+"'></select>");o.append(s);var d,n="";for(i=0;i<q.groupOps.length;i++)d=r.groupOp===a.p.groupOps[i].op?" selected='selected'":"",n+="<option value='"+a.p.groupOps[i].op+"'"+d+">"+a.p.groupOps[i].text+"</option>";s.append(n).on("change",function(){r.groupOp=b(s).val(),a.onchange()})}(n="<span></span>",q.groupButton&&(n=b("<input type='button' value='+ {}' title='"+j("addGroupTitle")+"' class='"+C("searchDialog.addGroupButton","add-group")+"'/>")).on("click",function(){return void 0===r.groups&&(r.groups=[]),r.groups.push({groupOp:q.groupOps[0].op,rules:[],groups:[]}),a.reDraw(),a.onchange(),!1}),o.append(n),!0===q.ruleButtons)&&((n=b("<input type='button' value='+' title='"+j("addRuleTitle")+"' class='"+C("searchDialog.addRuleButton","add-rule ui-add")+"'/>")).on("click",function(){var e,t;for(void 0===r.rules&&(r.rules=[]),i=0;i<a.p.columns.length;i++)if(e=void 0===a.p.columns[i].search||a.p.columns[i].search,t=!0===a.p.columns[i].hidden,!0===a.p.columns[i].searchoptions.searchhidden&&e||e&&!t){l=a.p.columns[i];break}return e=l.searchoptions.sopt?l.searchoptions.sopt:a.p.sopt?a.p.sopt:-1!==b.inArray(l.searchtype,a.p.strarr)?a.p.stropts:a.p.numopts,r.rules.push({field:l.name,op:e[0],data:""}),a.reDraw(),!1}),o.append(n));if(null!==e&&(n=b("<input type='button' value='-' title='"+j("deleteGroupTitle")+"' class='"+C("searchDialog.deleteGroupButton","delete-group")+"'/>"),o.append(n),n.on("click",function(){for(i=0;i<e.groups.length;i++)if(e.groups[i]===r){e.groups.splice(i,1);break}return a.reDraw(),a.onchange(),!1})),void 0!==r.groups)for(i=0;i<r.groups.length;i++)o=b("<tr></tr>"),t.append(o),n=b("<td class='first'></td>"),o.append(n),(n=b("<td colspan='4'></td>")).append(this.createTableForGroup(r.groups[i],r)),o.append(n);if(void 0===r.groupOp&&(r.groupOp=a.p.groupOps[0].op),void 0!==r.rules)for(i=0;i<r.rules.length;i++)t.append(this.createTableRowForRule(r.rules[i],r));return t},this.createTableRowForRule=function(d,e){var r,c,i,a,u=this,p=x(),o=b("<tr></tr>"),l="";o.append("<td class='first'></td>");var n=b("<td class='columns'></td>");o.append(n);var h,f=b("<select class='"+C("searchDialog.label","selectLabel")+"'></select>"),g=[];n.append(f),f.on("change",function(){d.field=b(f).val();var e,r,i=b(this).parents("tr:first");for(r=0;r<u.p.columns.length;r++)if(u.p.columns[r].name===d.field){e=u.p.columns[r];break}if(e){delete(r=b.extend({},e.editoptions||{})).readonly,delete r.disabled;var a=b.extend({},r||{},e.searchoptions||{},S(e.cmName),{id:t.randId(),name:e.name,mode:"search"});a.column=e,w&&"text"===e.inputtype&&!a.size&&(a.size=10);var o=t.createEl.call(p,e.inputtype,a,"",!0,u.p.ajaxSelectOptions||{},!0);b(o).addClass(C("searchDialog.elem","input-elm")),c=a.sopt?a.sopt:u.p.sopt?u.p.sopt:-1!==b.inArray(e.searchtype,u.p.strarr)?u.p.stropts:u.p.numopts,e="";var l,n,s=0;for(g=[],b.each(u.p.ops,function(){g.push(this.oper)}),u.p.cops&&b.each(u.p.cops,function(e){g.push(e)}),r=0;r<c.length;r++)n=c[r],-1!==(h=b.inArray(c[r],g))&&(l=void 0!==(l=u.p.ops[h])?l.text:u.p.cops[n].text,0===s&&(d.op=n),e+="<option value='"+n+"'>"+l+"</option>",s++);b(".selectopts",i).empty().append(e),b(".selectopts",i)[0].selectedIndex=0,t.msie&&t.msiever()<9&&(r=parseInt(b("select.selectopts",i)[0].offsetWidth,10)+1,b(".selectopts",i).width(r),b(".selectopts",i).css("width","auto")),b(".data",i).empty().append(o),t.bindEv.call(p,o,a),b(".input-elm",i).on("change",function(e){e=e.target,d.data="SPAN"===e.nodeName.toUpperCase()&&a&&y(a.custom_value)?a.custom_value.call(p,b(e).children(".customelement:first"),"get"):e.value,u.onchange()}),setTimeout(function(){d.data=b(o).val(),u.onchange()},0)}});var s,m;n=0;for(r=0;r<u.p.columns.length;r++)a=void 0===u.p.columns[r].search||u.p.columns[r].search,s=!0===u.p.columns[r].hidden,((m=!0===u.p.columns[r].searchoptions.searchhidden)&&a||a&&!s)&&(a="",d.field===u.p.columns[r].name&&(a=" selected='selected'",n=r),l+="<option value='"+u.p.columns[r].name+"'"+a+">"+u.p.columns[r].label+"</option>");f.append(l),l=b("<td class='operators'></td>"),o.append(l),i=q.columns[n],w&&"text"===i.inputtype&&!i.searchoptions.size&&(i.searchoptions.size=10),delete(n=b.extend({},i.editoptions||{})).readonly,delete n.disabled,(n=b.extend({},n,i.searchoptions||{},S(i.cmName),{id:t.randId(),name:i.name})).column=i,n=t.createEl.call(p,i.inputtype,n,d.data,!0,u.p.ajaxSelectOptions||{},!0),"nu"!==d.op&&"nn"!==d.op||(b(n).attr("readonly","true"),b(n).attr("disabled","true"));var v=b("<select class='"+C("searchDialog.operator","selectopts")+"'></select>");for(l.append(v),v.on("change",function(){d.op=b(v).val();var e=b(this).parents("tr:first");e=b(".input-elm",e)[0];"nu"===d.op||"nn"===d.op?(d.data="","SELECT"!==e.tagName.toUpperCase()&&(e.value=""),e.setAttribute("readonly","true"),e.setAttribute("disabled","true")):("SELECT"===e.tagName.toUpperCase()&&(d.data=e.value),e.removeAttribute("readonly"),e.removeAttribute("disabled")),u.onchange()}),c=i.searchoptions.sopt?i.searchoptions.sopt:u.p.sopt?u.p.sopt:-1!==b.inArray(i.searchtype,u.p.strarr)?u.p.stropts:u.p.numopts,l="",b.each(u.p.ops,function(){g.push(this.oper)}),u.p.cops&&b.each(u.p.cops,function(e){g.push(e)}),r=0;r<c.length;r++)m=c[r],-1!==(h=b.inArray(c[r],g))&&(s=u.p.ops[h],l+="<option value='"+m+"'"+(a=d.op===m?" selected='selected'":"")+">"+(void 0!==s?s.text:u.p.cops[m].text)+"</option>");return v.append(l),l=b("<td class='data'></td>"),o.append(l),l.append(n),t.bindEv.call(p,n,i.searchoptions),b(n).addClass(C("searchDialog.elem","input-elm")).on("change",function(){d.data="custom"===i.inputtype?i.searchoptions.custom_value.call(p,b(this).children(".customelement:first"),"get"):b(this).val(),u.onchange()}),l=b("<td></td>"),o.append(l),!0===q.ruleButtons&&(n=b("<input type='button' value='-' title='"+j("deleteRuleTitle")+"' class='"+C("searchDialog.deleteRuleButton","delete-rule ui-del")+"'/>"),l.append(n),n.on("click",function(){for(r=0;r<e.rules.length;r++)if(e.rules[r]===d){e.rules.splice(r,1);break}return u.reDraw(),u.onchange(),!1})),o},this.getStringForGroup=function(e){var t,r="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){1<r.length&&(r+=" "+e.groupOp+" ");try{r+=this.getStringForGroup(e.groups[t])}catch(e){a(e)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++)1<r.length&&(r+=" "+e.groupOp+" "),r+=this.getStringForRule(e.rules[t])}catch(e){a(e)}return"()"===(r+=")")?"":r},this.getStringForRule=function(e){var t,r,i,a="",o="",l=e.data;for(t=0;t<q.ops.length;t++)if(q.ops[t].oper===e.op){a=q.operands.hasOwnProperty(e.op)?q.operands[e.op]:"",o=q.ops[t].oper;break}if(""===o&&null!=q.cops)for(i in q.cops)if(q.cops.hasOwnProperty(i)&&(o=i,a=q.cops[i].operand,y(q.cops[i].buildQueryValue)))return q.cops[i].buildQueryValue.call(q,{cmName:e.field,searchValue:l,operand:a});for(t=0;t<q.columns.length;t++)if(q.columns[t].name===e.field){r=q.columns[t];break}return null==r?"":("bw"!==o&&"bn"!==o||(l+="%"),"ew"!==o&&"en"!==o||(l="%"+l),"cn"!==o&&"nc"!==o||(l="%"+l+"%"),"in"!==o&&"ni"!==o||(l=" ("+l+")"),q.errorcheck&&s(e.data,r),-1!==b.inArray(r.searchtype,["int","integer","float","number","currency"])||"nn"===o||"nu"===o?e.field+" "+a+" "+l:e.field+" "+a+' "'+l+'"')},this.resetFilter=function(){q.filter=b.extend(!0,{},q.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){b("th."+c,this).html(""),b("tr.error",this).hide()},this.showError=function(){b("th."+c,this).html(q.errmsg),b("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(q.filter)},this.toString=function(){var n=this;return function e(t){var r,i="(";if(void 0!==t.groups)for(r=0;r<t.groups.length;r++)1<i.length&&(i="OR"===t.groupOp?i+" || ":i+" && "),i+=e(t.groups[r]);if(void 0!==t.rules)for(r=0;r<t.rules.length;r++){1<i.length&&(i="OR"===t.groupOp?i+" || ":i+" && ");var a=t.rules[r];if(n.p.errorcheck){var o,l=void 0;for(o=0;o<n.p.columns.length;o++)if(n.p.columns[o].name===a.field){l=n.p.columns[o];break}l&&s(a.data,l)}i+=a.op+"(item."+a.field+",'"+a.data+"')"}return"()"==(i+=")")?"":i}(q.filter)},this.reDraw(),q.showQuery&&this.onchange(),this.filter=!0}}})},b.extend(b.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(e){return void 0!==e&&this.p.hasOwnProperty(e)?this.p[e]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(e){"string"==typeof e&&(e=b.parseJSON(e)),this.each(function(){this.p.filter=e,this.reDraw(),this.onchange()})}});var Ka={xml2json:function(e,t){9===e.nodeType&&(e=e.documentElement);var r=this.removeWhite(e);r=this.toObj(r),r=this.toJson(r,e.nodeName,"\t");return"{\n"+t+(t?r.replace(/\t/g,t):r.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var r,l=function(e,t,r){var i,a,o="";if(e instanceof Array)if(0===e.length)o+=r+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else for(i=0,a=e.length;i<a;i+=1)o+=r+l(e[i],t,r+"\t")+"\n";else if("object"==typeof e){for(a in i=!1,o+=r+"<"+t,e)e.hasOwnProperty(a)&&("@"===a.charAt(0)?o+=" "+a.substr(1)+'="'+e[a].toString()+'"':i=!0);if(o+=i?">":"/>",i){for(a in e)e.hasOwnProperty(a)&&("#text"===a?o+=e[a]:"#cdata"===a?o+="<![CDATA["+e[a]+"]]>":"@"!==a.charAt(0)&&(o+=l(e[a],a,r+"\t")));o+=("\n"===o.charAt(o.length-1)?r:"")+"</"+t+">"}}else"function"==typeof e?o+=r+"<"+t+"><![CDATA["+e+"]]></"+t+">":(void 0===e&&(e=""),o='""'===e.toString()||0===e.toString().length?o+(r+"<")+t+">__EMPTY_STRING_</"+t+">":o+(r+"<")+t+">"+e.toString()+"</"+t+">");return o},i="";for(r in e)e.hasOwnProperty(r)&&(i+=l(e[r],r,""));return t?i.replace(/\t/g,t):i.replace(/\t|\n/g,"")},toObj:function(e){var t,r={},i=/function/i,a=0,o=0,l=!1;if(1===e.nodeType){if(e.attributes.length)for(t=0;t<e.attributes.length;t+=1)r["@"+e.attributes[t].nodeName]=(e.attributes[t].nodeValue||"").toString();if(e.firstChild){for(t=e.firstChild;t;t=t.nextSibling)1===t.nodeType?l=!0:3===t.nodeType&&t.nodeValue.match(/[^ \f\n\r\t\v]/)?a+=1:4===t.nodeType&&(o+=1);if(l)if(a<2&&o<2)for(this.removeWhite(e),t=e.firstChild;t;t=t.nextSibling)3===t.nodeType?r["#text"]=this.escape(t.nodeValue):4===t.nodeType?i.test(t.nodeValue)?r[t.nodeName]=[r[t.nodeName],t.nodeValue]:r["#cdata"]=this.escape(t.nodeValue):r[t.nodeName]?r[t.nodeName]instanceof Array?r[t.nodeName][r[t.nodeName].length]=this.toObj(t):r[t.nodeName]=[r[t.nodeName],this.toObj(t)]:r[t.nodeName]=this.toObj(t);else e.attributes.length?r["#text"]=this.escape(this.innerXml(e)):r=this.escape(this.innerXml(e));else if(a)e.attributes.length?r["#text"]=this.escape(this.innerXml(e)):"__EMPTY_ARRAY_"===(r=this.escape(this.innerXml(e)))?r="[]":"__EMPTY_STRING_"===r&&(r="");else if(o)if(1<o)r=this.escape(this.innerXml(e));else for(t=e.firstChild;t;t=t.nextSibling){if(i.test(e.firstChild.nodeValue)){r=e.firstChild.nodeValue;break}r["#cdata"]=this.escape(t.nodeValue)}}e.attributes.length||e.firstChild||(r=null)}else 9===e.nodeType?r=this.toObj(e.documentElement):(null!=b.jgrid&&null!=b.jgrid.defaults&&b.isFunction(b.jgrid.defaults.fatalError)?b.jgrid.defaults.fatalError:alert)("unhandled node type: "+e.nodeType);return r},toJson:function(e,t,r,i){void 0===i&&(i=!0);var a,o,l=t?'"'+t+'"':"",n="\t",s="\n",d=[];if(a=[],i||(s=n=""),"[]"===e)l+=t?":[]":"[]";else if(e instanceof Array){for(o=0,a=e.length;o<a;o+=1)d[o]=this.toJson(e[o],"",r+n,i);l+=(t?":[":"[")+(1<d.length?s+r+n+d.join(","+s+r+n)+s+r:d.join(""))+"]"}else if(null===e)l+=(t&&":")+"null";else if("object"==typeof e){for(o in e)e.hasOwnProperty(o)&&(a[a.length]=this.toJson(e[o],o,r+n,i));l+=(t?":{":"{")+(1<a.length?s+r+n+a.join(","+s+r+n)+s+r:a.join(""))+"}"}else l="string"==typeof e?l+((t&&":")+'"')+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':l+((t&&":")+e.toString());return l},innerXml:function(e){var t="",i=function(e){var t,r="";if(1===e.nodeType){for(r+="<"+e.nodeName,t=0;t<e.attributes.length;t+=1)r+=" "+e.attributes[t].nodeName+'="'+(e.attributes[t].nodeValue||"").toString()+'"';if(e.firstChild){for(r+=">",t=e.firstChild;t;t=t.nextSibling)r+=i(t);r+="</"+e.nodeName+">"}else r+="/>"}else 3===e.nodeType?r+=e.nodeValue:4===e.nodeType&&(r+="<![CDATA["+e.nodeValue+"]]>");return r};if(e.hasOwnProperty("innerHTML"))t=e.innerHTML;else for(e=e.firstChild;e;e=e.nextSibling)t+=i(e);return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t,r=e.firstChild;r;)3===r.nodeType?r.nodeValue.match(/[^ \f\n\r\t\v]/)?r=r.nextSibling:(t=r.nextSibling,e.removeChild(r),r=t):(1===r.nodeType&&this.removeWhite(r),r=r.nextSibling);return e}};window.xmlJsonClass=Ka;var ab=t.feedback,Da=t.fullBoolFeedback,ca=t.builderFmButon,Qa=function(e,t,r){!0===t[0]&&(r="<span class='"+ra("fm-button-icon",r,t[2])+"'></span>","right"===t[1]?e.addClass("fm-button-icon-right").append(r):e.addClass("fm-button-icon-left").prepend(r))},T=function(e){return O.call(this,"states."+e)},Ra=function(e){return"&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0)};t.extend({searchGrid:function(G){return this.each(function(){function e(e){f("beforeShow",e)&&(b(d).data("onClose",n.onClose),t.viewModal.call(a,d,{gbox:c,jqm:n.jqModal,overlay:n.overlay,modal:n.modal,overlayClass:n.overlayClass,toTop:n.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),f("afterShow",e))}var a=this,o=b(a),l=a.p;if(a.grid&&null!=l){var n=b.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},C.getGridRes.call(o,"search"),t.search||{},l.searching||{},G||{}),s="fbox_"+l.id,r=n.commonIconClass,i={themodal:"searchmod"+s,modalhead:"searchhd"+s,modalcontent:"searchcnt"+s,resizeAlso:s},d="#"+H(i.themodal),c=l.gBox,u=l.gView,p=b.each,h=l.postData[n.sFilter],f=function(){var e=b.makeArray(arguments);return e.unshift("Search"),e.unshift("Filter"),e.unshift(n),ab.apply(a,e)},g=function(){t.hideModal(d,{gb:c,jqm:n.jqModal,onClose:n.onClose,removemodal:n.removemodal})};if("string"==typeof h&&(h=""!==b.trim(h)?b.parseJSON(h):void 0),b(d).remove(),void 0!==b(d)[0])e(b("#fbox_"+H(l.id)));else{var m=b("<div><div id='"+s+"' class='"+O.call(a,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(u);"rtl"===l.direction&&m.attr("dir","rtl");var v,w,y="",x="",j=!1,S=-1,q=b.extend([],l.colModel);w=ca.call(a,s+"_search",n.Find,ra(r,n.findDialogIcon),"right");var D=ca.call(a,s+"_reset",n.Reset,ra(r,n.resetDialogIcon),"left");n.showQuery&&(y=ca.call(a,s+"_query","Query",ra(r,n.queryDialogIcon),"left")+"&#160;"),n.searchForAdditionalProperties&&p(l.additionalProperties,function(){var e="string"==typeof this?{name:this}:this;e.label||(e.label=e.name),e.isAddProp=!0,q.push(e)}),n.columns.length?(q=n.columns,v=q[S=0].index||q[0].name):p(q,function(e,t){if(t.label||(t.label=t.isAddProp?t.name:l.colNames[e]),!j){var r=void 0===t.search||t.search,i=!0===t.hidden;(t.searchoptions&&!0===t.searchoptions.searchhidden&&r||r&&!i)&&(j=!0,v=t.index||t.name,S=e)}}),(!h&&v||!1===n.multipleSearch)&&(r="eq",0<=S&&q[S].searchoptions&&q[S].searchoptions.sopt?r=q[S].searchoptions.sopt[0]:n.sopt&&n.sopt.length&&(r=n.sopt[0]),h={groupOp:"AND",rules:[{field:v,op:r,data:""}]}),j=!1,n.tmplNames&&n.tmplNames.length&&(j=!0,x=n.tmplLabel,x+="<select class='ui-template'>",x+="<option value='default'>Default</option>",p(n.tmplNames,function(e,t){x+="<option value='"+e+"'>"+t+"</option>"}),x+="</select>"),w="<div class='"+O.call(a,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+s+"_2'><tbody><tr><td colspan='2'><hr class='"+O.call(a,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+l.direction+"'  style='float:"+("rtl"===l.direction?"right":"left")+";'>"+D+x+"</td><td class='EditButton EditButton-"+l.direction+"'>"+y+w+"</td></tr></tbody></table></div>",s=H(s),n.gbox=c,n.height="auto",b(s="#"+s).jqFilter({columns:q,filter:n.loadDefaults?h:null,showQuery:n.showQuery,errorcheck:n.errorcheck,sopt:n.sopt,groupButton:n.multipleGroup,ruleButtons:n.multipleSearch,afterRedraw:n.afterRedraw,ops:n.odata,cops:l.customSortOperations,operands:n.operands,ajaxSelectOptions:l.ajaxSelectOptions,groupOps:n.groupOps,onChange:function(e,t,r){e.showQuery&&b(".query",r).text(t.toUserFriendlyString()),Da.call(a,n.afterChange,"jqGridFilterAfterChange",b(s),n,e,t)},direction:l.direction,id:l.id}),m.append(w),j&&n.tmplFilters&&n.tmplFilters.length&&b(".ui-template",m).on("change",function(){var e=b(this).val();return"default"===e?b(s).jqFilter("addFilter",h):b(s).jqFilter("addFilter",n.tmplFilters[parseInt(e,10)]),!1}),!0===n.multipleGroup&&(n.multipleSearch=!0),f("onInitialize",b(s)),n.layer?t.createModal.call(a,i,m,n,u,b(c)[0],"#"+H(n.layer),{position:"relative"}):t.createModal.call(a,i,m,n,u,b(c)[0]),(n.searchOnEnter||n.closeOnEscape)&&b(d).keydown(function(e){var t=b(e.target);return!n.searchOnEnter||13!==e.which||t.hasClass("add-group")||t.hasClass("add-rule")||t.hasClass("delete-group")||t.hasClass("delete-rule")||t.hasClass("fm-button")&&t.is("[id$=_query]")?n.closeOnEscape&&27===e.which?(b("#"+H(i.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:(b(s+"_search").click(),!1)}),y&&b(s+"_query").on("click",function(){return b(".queryresult",m).toggle(),!1}),void 0===n.stringResult&&(n.stringResult=n.multipleSearch),b(s+"_search").on("click",function(){var e,t={},r="",i=b(s);if((e=i.find(".input-elm")).filter(":focus")&&(e=e.filter(":focus")),e.change(),e=i.jqFilter("filterData"),n.errorcheck&&(i[0].hideError(),n.showQuery||i.jqFilter("toSQLString"),i[0].p.error))return i[0].showError(),!1;if(n.stringResult||"local"===l.datatype){try{r=window.JSON&&window.JSON.stringify?JSON.stringify(e):Ka.toJson(e,"","",!1)}catch(e){}"string"==typeof r&&(t[n.sFilter]=r,p([n.sField,n.sValue,n.sOper],function(){t[this]=""}))}else n.multipleSearch?(t[n.sFilter]=e,p([n.sField,n.sValue,n.sOper],function(){t[this]=""})):(t[n.sField]=e.rules[0].field,t[n.sValue]=e.rules[0].data,t[n.sOper]=e.rules[0].op,t[n.sFilter]="");return l.search=!0,b.extend(l.postData,t),Da.call(a,n.onSearch,"jqGridFilterSearch",l.filters)&&o.trigger("reloadGrid",[b.extend({page:1},n.reloadGridSearchOptions||{})]),n.closeAfterSearch&&g(),!1}),b(s+"_reset").on("click",function(){var e={},t=b(s);return l.search=!1,!(l.resetsearch=!0)===n.multipleSearch?e[n.sField]=e[n.sValue]=e[n.sOper]="":e[n.sFilter]="",t[0].resetFilter(),j&&b(".ui-template",m).val("default"),b.extend(l.postData,e),Da.call(a,n.onReset,"jqGridFilterReset")&&o.trigger("reloadGrid",[b.extend({page:1},n.reloadGridResetOptions||{})]),n.closeAfterReset&&g(),!1}),e(b(s));var R=T.call(a,"hover");b(".fm-button:not(."+T.call(a,"disabled").split(" ").join(".")+")",m).hover(function(){b(this).addClass(R)},function(){b(this).removeClass(R)})}}})},editGridRow:function(K,Z){return this.each(function(){function r(){return b(w+" > tbody > tr > td .FormElement").each(function(){var e=b(".customelement",this),r=this.name;if(e.length){if(r=e.attr("name"),void 0!==(e=p[r])&&(e=(e=F[e]).editoptions||{},b.isFunction(e.custom_value))){try{if(g[r]=e.custom_value.call(j,b("#"+H(r),w),"get"),void 0===g[r])throw"e1"}catch(e){"e1"===e?t.info_dialog.call(j,I,"function 'custom_value' "+R.msg.novalue,R.bClose):t.info_dialog.call(j,I,e.message,R.bClose)}return!0}}else switch(e=b(this)[0].type,e){case"checkbox":g[r]=b(this).is(":checked")?b(this).val():b(this).data("offval");break;case"select-one":g[r]=b("option:selected",this).val();break;case"select-multiple":g[r]=b(this).val(),g[r]=g[r]?g[r].join(","):"",b("option:selected",this).each(function(e,t){b(t).text()});break;case"date":g[r]=b(this).val(),3===String(g[r]).split("-").length&&(void 0!==(e=p[r])&&(e=(e=(e=F[e]).formatoptions||{}).newformat||n.call(S,"formatter.date.newformat"),g[r]=t.parseDate.call(S[0],"Y-m-d",g[r],e)));break;default:void 0!==e&&b.inArray(e,R.skipPostTypes)<0&&(g[r]=b(this).val())}}),!0}function f(e,o){var l,r,i,a,n,s=0;(R.checkOnSubmit||R.checkOnUpdate)&&(R._savedData={},R._savedData[D+"_id"]=e);var d=q.colModel;if("_empty"===e)b(d).each(function(){l=this.name,i=b.extend({},this.editoptions||{}),(r=b("#"+H(l),o))&&r.length&&null!==r[0]&&(a="","custom"===this.edittype&&b.isFunction(i.custom_value)?i.custom_value.call(j,r,"set",a):i.defaultValue?(a=b.isFunction(i.defaultValue)?i.defaultValue.call(j):i.defaultValue,"checkbox"===r[0].type?(n=a.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==n?(r[0].checked=!0,r[0].defaultChecked=!0,r[0].value=a):(r[0].checked=!1,r[0].defaultChecked=!1):r.val(a)):"checkbox"===r[0].type?(r[0].checked=!1,r[0].defaultChecked=!1,a=b(r).data("offval")):r[0].type&&"select"===r[0].type.substr(0,6)?r[0].selectedIndex=0:r.val(a),!0===R.checkOnSubmit||R.checkOnUpdate)&&(R._savedData[l]=a)}),b("#id_g",o).val(e);else{var c=C.getInd.call(S,e,!0);c&&(b(c.cells).filter("td[role=gridcell]").each(function(r){var i;if("cb"!==(l=d[r].name)&&"subgrid"!==l&&"rn"!==l&&!0===d[r].editable){try{i=b.unformat.call(j,b(this),{rowId:e,colModel:d[r]},r)}catch(e){i="textarea"===d[r].edittype?b(this).text():b(this).html()}switch(q.autoEncodeOnEdit&&(i=t.oldDecodePostedData(i)),(!0===R.checkOnSubmit||R.checkOnUpdate)&&(R._savedData[l]=i),l="#"+H(l),d[r].edittype){case"password":case"text":case"button":case"image":case"textarea":Ra(i)&&(i=""),b(l,o).val(i);break;case"select":var a=i.split(",");a=b.map(a,function(e){return b.trim(e)});b(l+" option",o).each(function(){var e=b(this),t=b.trim(e.val());e=b.trim(e.text());d[r].editoptions.multiple||b.trim(i)!==e&&a[0]!==e&&a[0]!==t?d[r].editoptions.multiple&&(-1<b.inArray(e,a)||-1<b.inArray(t,a))?this.selected=!0:this.selected=!1:this.selected=!0});break;case"checkbox":i=String(i),d[r].editoptions&&d[r].editoptions.value?i=d[r].editoptions.value.split(":")[0]===i:i=(i=i.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==i,b(l,o).prop({checked:i,defaultChecked:i});break;case"custom":try{if(!d[r].editoptions||!b.isFunction(d[r].editoptions.custom_value))throw"e1";d[r].editoptions.custom_value.call(j,b(l,o),"set",i)}catch(e){"e1"===e?t.info_dialog.call(j,I,"function 'custom_value' "+R.msg.nodefined,R.bClose):t.info_dialog.call(j,I,e.message,R.bClose)}}s++}}),0<s&&b("#id_g",w).val(e))}}function e(){var l,n,e,s,r,i,a,d=[!0,"",""],c=d,o={},u=q.prmNames,p=C.getInd.call(S,K),h=!1===p?null:j.rows[p];for(e in(i=S.triggerHandler("jqGridAddEditBeforeCheckValues",[b(G),m]))&&"object"==typeof i&&(g=i),p=!1===p?-1:p,b.isFunction(R.beforeCheckValues)&&(i=R.beforeCheckValues.call(j,g,b(G),m))&&"object"==typeof i&&(g=i),g)if(g.hasOwnProperty(e)&&(i=q.iColByName[e],null!=(c=t.checkValues.call(j,g[e],e,void 0,void 0,{oldValue:"_empty"===K?null:C.getCell.call(S,K,i),newValue:g[e],cmName:e,rowid:K,cm:F[i],iCol:i,iRow:p,tr:h,td:null==h?null:h.cells[i],mode:"_empty"===K?"addForm":"editForm"}))&&!0!==c||(c=d),!1===c[0]))break;if(a=R.url||q.editurl,b.each(F,function(e,t){var r=t.name,i=g[r];"date"!==t.formatter||null!=t.formatoptions&&!0===t.formatoptions.sendFormatted||(g[r]=b.unformat.date.call(j,i,t)),"clientArray"!==a&&t.editoptions&&!0===t.editoptions.NullIfEmpty&&g.hasOwnProperty(r)&&""===i&&(g[r]="null")}),c[0]&&(void 0===(o=S.triggerHandler("jqGridAddEditClickSubmit",[R,g,m]))&&b.isFunction(R.onclickSubmit)&&(o=R.onclickSubmit.call(j,R,g,m)||{}),null!=(c=S.triggerHandler("jqGridAddEditBeforeSubmit",[g,b(G),m]))&&!0!==c||(c=d),c[0]&&b.isFunction(R.beforeSubmit)&&(null==(c=R.beforeSubmit.call(j,g,b(G),m))||!0===c)&&(c=d)),c[0]&&!R.processing){if(R.processing=!0,b("#sData",y).addClass(z),e=R.url||q.editurl,n=u.oper,l="clientArray"===e&&!1!==q.keyName?q.keyName:u.id,g[n]="_empty"===b.trim(g[D+"_id"])?u.addoper:u.editoper,g[n]!==u.addoper?g[l]=g[D+"_id"]:void 0===g[l]&&(g[l]=g[D+"_id"]),delete g[D+"_id"],g=b.extend(g,R.editData,o),!0===q.treeGrid)for(r in g[n]===u.addoper&&(s=q.selrow,g["adjacency"===q.treeGridModel?q.treeReader.parent_id_field:"parent_id"]=s),q.treeReader)q.treeReader.hasOwnProperty(r)&&(o=q.treeReader[r],!g.hasOwnProperty(o)||g[n]===u.addoper&&"parent_id_field"===r||delete g[o]);g[l]=t.stripPref(q.idPrefix,g[l]),q.autoEncodeOnEdit&&b.each(g,function(e,r){b.isFunction(r)||(g[e]=t.oldEncodePostedData(r))}),(r=b.extend({url:b.isFunction(e)?e.call(j,g[l],m,g,R):e,type:b.isFunction(R.mtype)?R.mtype.call(j,m,R,g[l],g):R.mtype,data:t.serializeFeedback.call(j,b.isFunction(R.serializeEditData)?R.serializeEditData:q.serializeEditData,"jqGridAddEditSerializeEditData",g),complete:function(e,r){if(S.jqGrid("progressBar",{method:"hide",loadtype:R.saveui}),b("#sData",y).removeClass(z),g[l]=b("#id_g",w).val(),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(c[0]=!1,c[1]=S.triggerHandler("jqGridAddEditErrorTextFormat",[e,m]),b.isFunction(R.errorTextFormat)?c[1]=R.errorTextFormat.call(j,e,m):c[1]=r+" Status: '"+e.statusText+"'. Error code: "+e.status):(null!=(c=S.triggerHandler("jqGridAddEditAfterSubmit",[e,g,m]))&&!0!==c||(c=d),c[0]&&b.isFunction(R.afterSubmit)&&(null==(c=R.afterSubmit.call(j,e,g,m))||!0===c)&&(c=d)),!1===c[0])b("#FormError>td",w).html(c[1]),b("#FormError",w).show();else{q.autoEncodeOnEdit&&b.each(g,function(e,r){g[e]=t.oldDecodePostedData(r)});var i=[b.extend({},R.reloadGridOptions||{})];if(g[n]===u.addoper?(c[2]||(c[2]=t.randId()),null==g[l]||"_empty"===g[l]||g[n]===u.addoper?g[l]=c[2]:c[2]=g[l],R.reloadAfterSubmit?S.trigger("reloadGrid",i):!0===q.treeGrid?C.addChildNode.call(S,c[2],s,g):C.addRowData.call(S,c[2],g,R.addedrow),R.closeAfterAdd?(!0!==q.treeGrid&&v.call(S,c[2]),_()):R.clearAfterAdd&&f("_empty",G)):(R.reloadAfterSubmit?(S.trigger("reloadGrid",i),R.closeAfterEdit||setTimeout(function(){v.call(S,g[l])},1e3)):!0===q.treeGrid?C.setTreeRow.call(S,g[l],g):C.setRowData.call(S,g[l],g),R.closeAfterEdit&&_()),b.isFunction(R.afterComplete)){var a=e;setTimeout(function(){S.triggerHandler("jqGridAddEditAfterComplete",[a,g,b(G),m]),R.afterComplete.call(j,a,g,b(G),m),a=null},50)}if((R.checkOnSubmit||R.checkOnUpdate)&&(b(G).data("disabled",!1),"_empty"!==R._savedData[D+"_id"]))for(var o in R._savedData)R._savedData.hasOwnProperty(o)&&g[o]&&(R._savedData[o]=g[o])}R.processing=!1;try{b(":input:visible",G)[0].focus()}catch(e){}}},t.ajaxOptions,R.ajaxEditOptions)).url||R.useDataProxy||(b.isFunction(q.dataProxy)?R.useDataProxy=!0:(c[0]=!1,c[1]+=" "+t.errors.nourl)),c[0]&&(S.jqGrid("progressBar",{method:"show",loadtype:R.saveui,htmlcontent:R.savetext}),R.useDataProxy?(void 0===(o=q.dataProxy.call(j,r,"set_"+D))&&(o=[!0,""]),!1===o[0]?(c[0]=!1,c[1]=o[1]||"Error deleting the selected row!"):(r.data.oper===u.addoper&&R.closeAfterAdd&&_(),r.data.oper===u.editoper&&R.closeAfterEdit&&_())):"clientArray"===r.url?(R.reloadAfterSubmit=!1,g=r.data,r.complete({status:200,statusText:""},"")):b.ajax(r))}!1===c[0]&&(b("#FormError>td",w).html(c[1]),b("#FormError",w).show())}function i(e,t){var r,i=!1;for(r in e)if(e.hasOwnProperty(r)&&String(e[r])!==String(t[r])){i=!0;break}return i}function a(){var e=!0;return b("#FormError",w).hide(),R.checkOnUpdate&&(g={},r(),i(g,R._savedData))&&(b(G).data("disabled",!0),b(".confirm",c).show(),e=!1),e}function o(e,t){var r=t[1].length-1;0===e?b("#pData",y).addClass(E):void 0!==t[1][e-1]&&Y(b("#"+H(t[1][e-1])),E)?b("#pData",y).addClass(E):b("#pData",y).removeClass(E),e===r?b("#nData",y).addClass(E):void 0!==t[1][e+1]&&Y(b("#"+H(t[1][e+1])),E)?b("#nData",y).addClass(E):b("#nData",y).removeClass(E)}function l(){var e=C.getDataIDs.call(S),t=b("#id_g",w).val();return[b.inArray(t,e),e]}var j=this,S=b(j),q=j.p;if(j.grid&&null!=q&&K){var g,m,D=q.id,n=C.getGridRes,v=C.setSelection,R=b.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:O.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:n.call(S,"defaults.savetext")||"Saving..."},n.call(S,"edit"),t.edit,q.formEditing||{},Z||{}),G="FrmGrid_"+D,s=G,w="#"+H($="TblGrid_"+D),y=w+"_2",d={themodal:"editmod"+D,modalhead:"edithd"+D,modalcontent:"editcnt"+D,resizeAlso:G},c="#"+H(d.themodal),u=q.gBox,F=q.colModel,p=q.iColByName,h=1,x=0,k=R.commonIconClass,_=function(){t.hideModal(c,{gb:u,jqm:R.jqModal,onClose:R.onClose,removemodal:R.removemodal})},I=n.call(S,"errors.errcap"),N=function(){var e=b.makeArray(arguments);return e.unshift(""),e.unshift("AddEdit"),e.unshift(R),ab.apply(j,e)},A=T.call(j,"hover"),E=T.call(j,"disabled"),M=T.call(j,"select"),z=T.call(j,"active"),P=T.call(j,"error");b(c).remove(),G="#"+H(G),"new"===K?(K="_empty",m="add",R.caption=R.addCaption):(R.caption=R.editCaption,m="edit");var B=!0;!R.checkOnUpdate||!0!==R.jqModal&&void 0!==R.jqModal||R.modal||(B=!1);var V=isNaN(R.dataheight)?R.dataheight:R.dataheight+"px",L=isNaN(R.datawidth)?R.datawidth:R.datawidth+"px",W=(s=b("<form name='FormPost' id='"+s+"' class='FormGrid' onSubmit='return false;' style='width:"+L+";overflow:auto;position:relative;height:"+V+";'></form>").data("disabled",!1),b("<table id='"+$+"' class='EditTable'><tbody></tbody></table>"));if(b(F).each(function(){var e=this.formoptions;h=Math.max(h,e&&e.colpos||0),x=Math.max(x,e&&e.rowpos||0)}),b(s).append(W),(P=b("<tr id='FormError' style='display:none'><td class='"+P+"' colspan='"+2*h+"'>&#160;</td></tr>"))[0].rp=0,b(W).append(P),(P=b("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*h+"'>"+(R.topinfo||"&#160;")+"</td></tr>"))[0].rp=0,b(W).append(P),N("beforeInitData",s,m)){!function(){if(null!=(e=t.detectRowEditing.call(j,K)))if("inlineEditing"===e.mode)C.restoreRow.call(S,K);else{var e=e.savedRow,r=j.rows[e.id];C.restoreCell.call(S,e.id,e.ic),b(r.cells[e.ic]).removeClass("edit-cell "+M),b(r).addClass(M).attr({"aria-selected":"true",tabindex:"0"})}}(),V=(P="rtl"===q.direction)?"nData":"pData",L=P?"pData":"nData",function(f,g,m){var e,v=0,w=[],y=!1,x="";for(e=1;e<=m;e++)x+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";"_empty"!==f&&(y=C.getInd.call(S,f)),b(F).each(function(e){var r,i,a,o,l,n=this.name;r=this.editable;var s=!1,d=!1;switch(l="_empty"===f?"addForm":"editForm",b.isFunction(r)&&(r=r.call(j,{rowid:f,iCol:e,iRow:y,cmName:n,cm:this,mode:l})),o=this.editrules&&!0===this.editrules.edithidden||!0!==this.hidden&&"hidden"!==r?"":"style='display:none'",String(r).toLowerCase()){case"hidden":r=!0;break;case"disabled":s=r=!0;break;case"readonly":d=r=!0}if("cb"!==n&&"subgrid"!==n&&!0===r&&"rn"!==n){if(!1===y)a="";else{r=b(j.rows[y].cells[e]);try{a=b.unformat.call(j,r,{rowId:f,colModel:this},e)}catch(e){a=this.edittype&&"textarea"===this.edittype?r.text():r.html()}Ra(a)&&(a="")}r=b.extend({},this.editoptions||{},{id:n,name:n,rowId:f,mode:l,cm:this,iCol:e});var c=b.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),u=parseInt(c.rowpos,10)||v+1,p=parseInt(2*(parseInt(c.colpos,10)||1),10);if("_empty"===f&&r.defaultValue&&(a=b.isFunction(r.defaultValue)?r.defaultValue.call(j):r.defaultValue),this.edittype||(this.edittype="text"),q.autoEncodeOnEdit&&(a=t.oldDecodePostedData(a)),l=t.createEl.call(j,this.edittype,r,a,!1,b.extend({},t.ajaxOptions,q.ajaxSelectOptions||{})),(R.checkOnSubmit||R.checkOnUpdate)&&(R._savedData[n]=a),b(l).addClass("FormElement"),-1<b.inArray(this.edittype,["text","textarea","checkbox","password","select"])&&b(l).addClass(O.call(j,"dialog.dataField")),i=b(g).find("tr[data-rowpos="+u+"]"),c.rowabove){var h=b("<tr><td class='contentinfo' colspan='"+2*m+"'>"+c.rowcontent+"</td></tr>");b(g).append(h),h[0].rp=u}0===i.length&&(i=b("<tr "+o+" data-rowpos='"+u+"'></tr>").addClass("FormData").attr("id","tr_"+n),b(i).append(x),b(g).append(i),i[0].rp=u),o=b("td:eq("+(p-2)+")",i[0]),i=b("td:eq("+(p-1)+")",i[0]),o.html(void 0===c.label?q.colNames[e]:c.label||"&#160;"),i[Ra(i.html())?"html":"append"](c.elmprefix).append(l).append(c.elmsuffix),s?(o.addClass(E),i.addClass(E),b(l).prop("readonly",!0),b(l).prop("disabled",!0)):d&&b(l).prop("readonly",!0),"custom"===this.edittype&&b.isFunction(r.custom_value)&&r.custom_value.call(j,b("#"+H(n),G),"set",a),t.bindEv.call(j,l,r),w[v]=e,v++}}),0<v&&((e=b("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*m-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+D+"_id' value='"+f+"'/></td></tr>"))[0].rp=v+999,b(g).append(e),R.checkOnSubmit||R.checkOnUpdate)&&(R._savedData[D+"_id"]=f)}(K,W,h);V=ca.call(j,V,"",ra(k,R.prevIcon),"","left"),L=ca.call(j,L,"",ra(k,R.nextIcon),"","right");var U=ca.call(j,"sData",R.bSubmit),X=ca.call(j,"cData",R.bCancel),$=($=($="<div class='"+O.call(j,"dialog.footer")+"'><table class='EditTable' id='"+$+"_2'><tbody><tr><td colspan='2'><hr class='"+O.call(j,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+q.direction+"'>"+(P?L+V:V+L)+"</td><td class='EditButton EditButton-"+q.direction+"'>"+U+"&#160;"+X+"</td></tr>")+"<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(R.bottominfo||"&#160;")+"</td></tr>")+"</tbody></table></div>";if(0<x){var Q=[];b.each(b(W)[0].rows,function(e,t){Q[e]=t}),Q.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),b.each(Q,function(e,t){b("tbody",W).append(t)})}R.gbox=u;var J=!1;!0===R.closeOnEscape&&(R.closeOnEscape=!1,J=!0),$=b("<div></div>").append(b("<div class='"+O.call(j,"dialog.body")+"'></div>").append(s)).append($),t.createModal.call(j,d,$,R,q.gView,b(u)[0]),R.topinfo&&b(".tinfo",w).show(),R.bottominfo&&b(".binfo",y).show(),$=$=null,b(c).keydown(function(e){var t,r,i=(e.target.tagName||"").toUpperCase();if(!0===b(G).data("disabled"))return!1;if(13===e.which&&"TEXTAREA"!==i){if(r=(t=b(y).find(":focus")).attr("id"),0<t.length&&0<=b.inArray(r,["pData","nData","cData"]))return t.trigger("click"),!1;if(!0===R.savekey[0]&&13===R.savekey[1])return b("#sData",y).trigger("click"),!1}if(!0===R.savekey[0]&&e.which===R.savekey[1]&&"TEXTAREA"!==i)return b("#sData",y).trigger("click"),!1;if(27===e.which)return a()&&J&&_(),!1;if(!0===R.navkeys[0]){if("_empty"===b("#id_g",w).val())return!0;if(e.which===R.navkeys[1])return b("#pData",y).trigger("click"),!1;if(e.which===R.navkeys[2])return b("#nData",y).trigger("click"),!1}}),R.checkOnUpdate&&(b("a.ui-jqdialog-titlebar-close span",c).removeClass("jqmClose"),b("a.ui-jqdialog-titlebar-close",c).off("click").click(function(){return a()&&_(),!1})),Qa(b("#sData",y),R.saveicon,k),Qa(b("#cData",y),R.closeicon,k),(R.checkOnSubmit||R.checkOnUpdate)&&(U=ca.call(j,"sNew",R.bYes),L=ca.call(j,"nNew",R.bNo),X=ca.call(j,"cNew",R.bExit),d=R.zIndex||999,d++,b("<div class='"+R.overlayClass+" jqgrid-overlay confirm' style='z-index:"+d+";display:none;'>&#160;</div><div class='"+O.call(j,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(d+1)+"'>"+R.saveData+"<br/><br/>"+U+L+X+"</div>").insertAfter(G),b("#sNew",c).click(function(){return e(),b(G).data("disabled",!1),b(".confirm",c).hide(),!1}),b("#nNew",c).click(function(){return b(".confirm",c).hide(),b(G).data("disabled",!1),setTimeout(function(){b(":input:visible",G)[0].focus()},0),!1}),b("#cNew",c).click(function(){return b(".confirm",c).hide(),b(G).data("disabled",!1),_(),!1})),N("onInitializeForm",b(G),m),"_empty"!==K&&R.viewPagerButtons?b("#pData,#nData",y).show():b("#pData,#nData",y).hide(),N("beforeShowForm",b(G),m),b(c).data("onClose",R.onClose),t.viewModal.call(j,c,{gbox:u,jqm:R.jqModal,overlay:R.overlay,modal:R.modal,overlayClass:R.overlayClass,toTop:R.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),B||b("."+H(R.overlayClass)).click(function(){return a()&&_(),!1}),b(".fm-button",c).hover(function(){b(this).addClass(A)},function(){b(this).removeClass(A)}),b("#sData",y).click(function(){return g={},b("#FormError",w).hide(),r(),"_empty"===g[D+"_id"]?e():!0===R.checkOnSubmit&&i(g,R._savedData)?(b(G).data("disabled",!0),b(".confirm",c).show()):e(),!1}),b("#cData",y).click(function(){return a()&&_(),!1}),b("#nData",y).click(function(){if(!a())return!1;b("#FormError",w).hide();var e=l();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!N("onclickPgButtons","next",b(G),e[1][e[0]]))return!1;f(e[1][e[0]+1],G),v.call(S,e[1][e[0]+1]),N("afterclickPgButtons","next",b(G),e[1][e[0]+1]),o(e[0]+1,e)}return!1}),b("#pData",y).click(function(){if(!a())return!1;b("#FormError",w).hide();var e=l();if(-1!==e[0]&&e[1][e[0]-1]){if(!N("onclickPgButtons","prev",b(G),e[1][e[0]])||Y(b("#"+H(e[1][e[0]-1])),E))return!1;f(e[1][e[0]-1],G),v.call(S,e[1][e[0]-1]),N("afterclickPgButtons","prev",b(G),e[1][e[0]-1]),o(e[0]-1,e)}return!1}),N("afterShowForm",b(G),m),o((B=l())[0],B)}}})},viewGridRow:function(N,A){return this.each(function(){function r(){!0!==D.closeOnEscape&&!0!==D.navkeys[0]||setTimeout(function(){b("#cData").focus()},0)}function i(e){var r,i,a,o=0,l=C.getInd.call(S,e,!0);l&&(b("td",l).each(function(e){a=R[e],r=a.name,i=(!a.editrules||!0!==a.editrules.edithidden)&&!0===a.hidden,"cb"!==r&&"subgrid"!==r&&"rn"!==r&&(r=H("v_"+r),b("#"+r+" span",n).html(t.getDataFieldOfCell.call(j,l,e).html()),i&&b("#"+r,n).parents("tr:first").hide(),o++)}),0<o&&b("#id_g",n).val(e))}function a(e,t){var r=t[1].length-1;0===e?b("#pData",s).addClass(y):void 0!==t[1][e-1]&&Y(b("#"+H(t[1][e-1])),y)?b("#pData",s).addClass(y):b("#pData",s).removeClass(y),e===r?b("#nData",s).addClass(y):void 0!==t[1][e+1]&&Y(b("#"+H(t[1][e+1])),y)?b("#nData",s).addClass(y):b("#nData",s).removeClass(y)}function o(){var e=C.getDataIDs.call(S),t=b("#id_g",n).val();return[b.inArray(t,e),e]}var j=this,S=b(j),q=j.p;if(j.grid&&null!=q&&N){var e=q.id,D=b.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"30%",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},C.getGridRes.call(S,"view"),t.view||{},q.formViewing||{},A||{}),l="#ViewGrid_"+H(e),n="#ViewTbl_"+H(e),s=n+"_2",d="ViewGrid_"+e,c="ViewTbl_"+e,u=D.commonIconClass,p="#"+H((e={themodal:"viewmod"+e,modalhead:"viewhd"+e,modalcontent:"viewcnt"+e,resizeAlso:d}).themodal),h=q.gBox,R=q.colModel,f=1,g=0,m=function(){var e=b.makeArray(arguments);return e.unshift(""),e.unshift("View"),e.unshift(D),ab.apply(j,e)},v=function(){t.hideModal(p,{gb:h,jqm:D.jqModal,onClose:D.onClose,removemodal:D.removemodal})},w=T.call(j,"hover"),y=T.call(j,"disabled"),x=isNaN(D.dataheight)?D.dataheight:D.dataheight+"px",G=isNaN(D.datawidth)?D.datawidth:D.datawidth+"px",F=(x=(d=b("<div class='"+O.call(j,"dialog.body")+"'><form name='FormPost' id='"+d+"' class='FormGrid' style='width:"+G+";overflow:auto;position:relative;height:"+x+";'></form></div>")).children("form.FormGrid"),b("<table id='"+c+"' class='EditTable'><tbody></tbody></table>"));if(b(p).remove(),b(R).each(function(){var e=this.formoptions;f=Math.max(f,e&&e.colpos||0),g=Math.max(g,e&&e.rowpos||0)}),x.append(F),m("beforeInitData",x)){!function(e,l,n){var s,d,c,u,r,p=0,h=[],f=C.getInd.call(S,e);r=O.call(j,"dialog.viewData","DataTD form-view-data");var g,m,v,i="<td class='"+(a=O.call(j,"dialog.viewLabel","CaptionTD form-view-label"))+"' width='"+D.labelswidth+"'>&#160;</td><td class='"+r+" ui-helper-reset'>&#160;</td>",w="",a="<td class='"+a+"'></td><td class='"+r+"'></td>",o=["integer","number","currency"],y=0,x=0;for(r=1;r<=n;r++)w+=1===r?i:a;b(R).each(function(){(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden||"right"!==this.align||(this.formatter&&-1!==b.inArray(this.formatter,o)?y=Math.max(y,parseInt(this.width,10)):x=Math.max(x,parseInt(this.width,10)))}),g=0!==y?y:0!==x?x:0,b(R).each(function(e){if(s=this.name,m=!1,u=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden?"style='display:none'":"",v="boolean"!=typeof this.viewable||this.viewable,"cb"!==s&&"subgrid"!==s&&"rn"!==s&&v){c=!1===f?"":t.getDataFieldOfCell.call(j,j.rows[f],e).html(),m="right"===this.align&&0!==g;var r=b.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(r.rowpos,10)||p+1,a=parseInt(2*(parseInt(r.colpos,10)||1),10);if(r.rowabove){var o=b("<tr><td class='contentinfo' colspan='"+2*n+"'>"+r.rowcontent+"</td></tr>");b(l).append(o),o[0].rp=i}0===(d=b(l).find("tr[data-rowpos="+i+"]")).length&&(d=b("<tr "+u+" data-rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+s),b(d).append(w),b(l).append(d),d[0].rp=i),r=void 0===r.label?q.colNames[e]:r.label,i=b("td:eq("+(a-1)+")",d[0]),b("td:eq("+(a-2)+")",d[0]).html("<b>"+(r||"&nbsp;")+"</b>"),i[Ra(i.html())?"html":"append"]("<span>"+(c||"&nbsp;")+"</span>").attr("id","v_"+s),m&&b("td:eq("+(a-1)+") span",d[0]).css({"text-align":"right",width:g+"px"}),h[p]=e,p++}}),0<p&&((e=b("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*n-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>"))[0].rp=p+99,b(l).append(e))}(N,F,f);var k=(x="rtl"===q.direction)?"pData":"nData",_=(G=ca.call(j,x?"nData":"pData","",ra(u,D.prevIcon),"","left"),k=ca.call(j,k,"",ra(u,D.nextIcon),"","right"),ca.call(j,"cData",D.bClose));if(0<g){var I=[];b.each(b(F)[0].rows,function(e,t){I[e]=t}),I.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),b.each(I,function(e,t){b("tbody",F).append(t)})}D.gbox=h,c=b("<div></div>").append(d).append("<div class='"+O.call(j,"dialog.footer")+"'><table border='0' class='EditTable' id='"+c+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+q.direction+"' width='"+(D.labelswidth||"auto")+"'>"+(x?k+G:G+k)+"</td><td class='EditButton EditButton-"+q.direction+"'>"+_+"</td></tr></tbody></table></div>"),t.createModal.call(j,e,c,D,q.gView,b(q.gView)[0]),D.viewPagerButtons||b("#pData, #nData",s).hide(),c=null,b(p).keydown(function(e){var t,r;if(!0===b(l).data("disabled"))return!1;if(13===e.which&&(r=(t=b(s).find(":focus")).attr("id"),0<t.length&&0<=b.inArray(r,["pData","nData","cData"])))return t.trigger("click"),!1;if(27===e.which)return D.closeOnEscape&&v(),!1;if(!0===D.navkeys[0]){if(e.which===D.navkeys[1])return b("#pData",s).trigger("click"),!1;if(e.which===D.navkeys[2])return b("#nData",s).trigger("click"),!1}}),Qa(b("#cData",s),D.closeicon,u),m("beforeShowForm",b(l)),t.viewModal.call(j,p,{gbox:h,jqm:D.jqModal,overlay:D.overlay,toTop:D.toTop,modal:D.modal,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),b(".fm-button:not(."+y.split(" ").join(".")+")",s).hover(function(){b(this).addClass(w)},function(){b(this).removeClass(w)}),r(),b("#cData",s).click(function(){return v(),!1}),b("#nData",s).click(function(){b("#FormError",n).hide();var e=o();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!m("onclickPgButtons","next",b(l),e[1][e[0]]))return!1;i(e[1][e[0]+1]),C.setSelection.call(S,e[1][e[0]+1]),m("afterclickPgButtons","next",b(l),e[1][e[0]+1]),a(e[0]+1,e)}return r(),!1}),b("#pData",s).click(function(){b("#FormError",n).hide();var e=o();if(-1!==e[0]&&e[1][e[0]-1]){if(!m("onclickPgButtons","prev",b(l),e[1][e[0]]))return!1;i(e[1][e[0]-1]),C.setSelection.call(S,e[1][e[0]-1]),m("afterclickPgButtons","prev",b(l),e[1][e[0]-1]),a(e[0]-1,e)}return r(),!1}),a((u=o())[0],u)}}})},delGridRow:function(S,q){return this.each(function(){var n=this,s=n.p,d=b(n);if(n.grid&&null!=s&&S){var c,i,u,p,h=s.id,f=b.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},C.getGridRes.call(d,"del"),t.del||{},s.formDeleting||{},q||{}),e="DelTbl_"+h,g="#DelTbl_"+H(h),r={themodal:"delmod"+h,modalhead:"delhd"+h,modalcontent:"delcnt"+h,resizeAlso:e},m="#"+H(r.themodal),v=s.gBox,a=f.commonIconClass,w=function(){var e=b.makeArray(arguments);return e.unshift(""),e.unshift("Delete"),e.unshift(f),ab.apply(n,e)},o=T.call(n,"hover"),y=T.call(n,"active"),l=T.call(n,"error");if(b.isArray(S)||(S=[String(S)]),void 0!==b(m)[0]){if(!w("beforeInitData",b(g)))return;b("#DelData>td",g).text(S.join()).data("rowids",S),b("#DelError",g).hide(),!0===f.processing&&(f.processing=!1,b("#dData",g).removeClass(y)),w("beforeShowForm",b(g)),t.viewModal.call(n,m,{gbox:v,jqm:f.jqModal,jqM:!1,overlay:f.overlay,toTop:f.toTop,modal:f.modal})}else{var x=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",j=isNaN(f.datawidth)?f.datawidth:f.datawidth+"px";x=(x=(x=(x="<div class='"+O.call(n,"dialog.body")+"'><div id='"+e+"' class='formdata' style='width:"+j+";overflow:auto;position:relative;height:"+x+";'>")+"<table class='DelTable'><tbody><tr id='DelError' style='display:none'><td class='"+l+"'></td></tr><tr id='DelData' style='display:none'><td >"+S.join()+"</td></tr>")+"<tr><td class='delmsg' style='white-space:pre;'>"+f.msg+"</td></tr>")+"</tbody></table></div></div>",l=ca.call(n,"dData",f.bSubmit),j=ca.call(n,"eData",f.bCancel),x=x+"<div class='"+O.call(n,"dialog.footer")+"'><table class='EditTable' id='"+e+"_2'><tbody><tr><td><hr class='"+O.call(n,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+s.direction+"'>"+l+"&#160;"+j+"</td></tr></tbody></table></div>";if(f.gbox=v,t.createModal.call(n,r,x,f,s.gView,b(s.gView)[0]),b("#DelData>td",g).data("rowids",S),!w("beforeInitData",b(x)))return;b(".fm-button",g+"_2").hover(function(){b(this).addClass(o)},function(){b(this).removeClass(o)}),Qa(b("#dData",g+"_2"),f.delicon,a),Qa(b("#eData",g+"_2"),f.cancelicon,a),b("#dData",g+"_2").click(function(){var e,a=[!0,""],o=(r=b("#DelData>td",g)).text(),l=r.data("rowids"),r={};if(b.isFunction(f.onclickSubmit)&&(r=f.onclickSubmit.call(n,f,o)||{}),b.isFunction(f.beforeSubmit)&&(a=f.beforeSubmit.call(n,o)||a),a[0]&&!f.processing){if(f.processing=!0,u=s.prmNames,c=b.extend({},f.delData,r),p=u.oper,c[p]=u.deloper,i=u.id,!(o=l.slice()).length)return!1;for(e in o)o.hasOwnProperty(e)&&(o[e]=t.stripPref(s.idPrefix,o[e]));c[i]=o.join(),b(this).addClass(y),e=f.url||s.editurl,(e=b.extend({url:b.isFunction(e)?e.call(n,c[i],c,f):e,type:f.mtype,data:b.isFunction(f.serializeDelData)?f.serializeDelData.call(n,c):c,complete:function(e,r){var i;if(b("#dData",g+"_2").removeClass(y),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(a[0]=!1,b.isFunction(f.errorTextFormat)?a[1]=f.errorTextFormat.call(n,e):a[1]=r+" Status: '"+e.statusText+"'. Error code: "+e.status):b.isFunction(f.afterSubmit)&&(a=f.afterSubmit.call(n,e,c)||[!0]),!1===a[0])b("#DelError>td",g).html(a[1]),b("#DelError",g).show();else{if(f.reloadAfterSubmit&&"local"!==s.datatype)d.trigger("reloadGrid",[b.extend({},f.reloadGridOptions||{})]);else if(!0===s.treeGrid)try{C.delTreeNode.call(d,l[0])}catch(e){}else for(l=l.slice(),i=0;i<l.length;i++)C.delRowData.call(d,l[i]);setTimeout(function(){w("afterComplete",e,o,b(g))},50)}f.processing=!1,a[0]&&t.hideModal(m,{gb:v,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})}},t.ajaxOptions,f.ajaxDelOptions)).url||f.useDataProxy||(b.isFunction(s.dataProxy)?f.useDataProxy=!0:(a[0]=!1,a[1]+=" "+t.errors.nourl)),a[0]&&(f.useDataProxy?(void 0===(e=s.dataProxy.call(n,e,"del_"+h))&&(e=[!0,""]),!1===e[0]?(a[0]=!1,a[1]=e[1]||"Error deleting the selected row!"):t.hideModal(m,{gb:v,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})):"clientArray"===e.url?(c=e.data,e.complete({status:200,statusText:""},"")):b.ajax(e))}return!1===a[0]&&(b("#DelError>td",g).html(a[1]),b("#DelError",g).show()),!1}),b("#eData",g+"_2").click(function(){return t.hideModal(m,{gb:v,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal}),!1}),w("beforeShowForm",b(g)),t.viewModal.call(n,m,{gbox:v,jqm:f.jqModal,overlay:f.overlay,toTop:f.toTop,modal:f.modal})}w("afterShowForm",b(g)),!0===f.closeOnEscape&&setTimeout(function(){b(".ui-jqdialog-titlebar-close","#"+H(r.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(P,B,V,L,W,U,X){return"object"==typeof P&&(X=U,U=W,W=L,L=V,V=B,B=P,P=void 0),L=L||{},V=V||{},X=X||{},W=W||{},U=U||{},this.each(function(){var n=this,s=n.p,d=b(n);if(n.grid&&null!=s&&!(n.nav&&0<b(P).find(".navtable").length)){var i=s.id,c=b.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},C.getGridRes.call(d,"nav"),t.nav||{},s.navOptions||{},B||{});c.position=c.position||("rtl"===s.direction?"right":"left");var e,l,r=s.idSel,u=s.gBox,p=c.commonIconClass,h={themodal:"alertmod_"+i,modalhead:"alerthd_"+i,modalcontent:"alertcnt_"+i},a=function(){var e=document.documentElement,r=window,i=1024,a=768,o=d.closest(".ui-jqgrid").offset();void 0===b("#"+H(h.themodal))[0]&&(c.alerttop||c.alertleft||(void 0!==r.innerWidth?(i=r.innerWidth,a=r.innerHeight):null!=e&&void 0!==e.clientWidth&&0!==e.clientWidth&&(i=e.clientWidth,a=e.clientHeight),i=i/2-parseInt(c.alertwidth,10)/2-o.left,a=a/2-25-o.top),t.createModal.call(n,h,"<div class='"+O.call(n,"dialog.body")+"'><div>"+c.alerttext+"</div></div>",{gbox:u,jqModal:c.jqModal,drag:!0,resize:!0,caption:c.alertcap,top:null!=c.alerttop?c.alerttop:a,left:null!=c.alertleft?c.alertleft:i,width:c.alertwidth,height:c.alertheight,closeOnEscape:c.closeOnEscape,zIndex:c.alertzIndex,removemodal:c.removemodal},s.gView,b(u)[0],!1)),t.viewModal.call(n,"#"+H(h.themodal),{gbox:u,toTop:c.alertToTop,jqm:c.jqModal});var l=b("#"+H(h.modalhead)).find(".ui-jqdialog-titlebar-close");l.attr({tabindex:"0",href:"#",role:"button"}),setTimeout(function(){l.focus()},50)},o=function(e){if(13===e.which&&0<(e=b(this).find(".ui-pg-button").filter(":focus")).length){var t=(t=e[0].id).substr(0,0<b(this).closest(".ui-jqgrid-toppager").length?t.length-i.length-5:t.length-i.length-1)+"mod"+s.id,r=b(".ui-jqdialog").filter(":visible").map(function(){return this.id});if(b.inArray(t,r)<0)return e.trigger("click"),!1}},f=T.call(n,"hover"),g=T.call(n,"disabled"),m=O.call(n,"navButton","ui-pg-button");if(n.grid){n.modalAlert=a,void 0===P&&(s.pager?(P=s.pager,s.toppager&&(c.cloneToTop=!0)):s.toppager&&(P=s.toppager));var v,w,y,x,j,S,q=1,D=["left","center","right"],R="<div class='"+O.call(n,"navButton","ui-pg-button "+T.call(n,"disabled"))+"'><span class='ui-separator'></span></div>",G=function(){Y(this,g)||b(this).addClass(f)},F=function(){b(this).removeClass(f)},k=function(){return Y(this,g)||(b.isFunction(c.addfunc)?c.addfunc.call(n):C.editGridRow.call(d,"new",L)),!1},_=function(e,t,r){if(!Y(this,g)){var i=s.selrow;i?b.isFunction(e)?e.call(n,i):C[t].call(d,i,r):a()}return!1},I=function(){return _.call(this,c.editfunc,"editGridRow",V)},N=function(){return _.call(this,c.viewfunc,"viewGridRow",X)},A=function(){var e;return Y(this,g)||(s.multiselect?0===(e=s.selarrrow).length&&(e=null):e=s.selrow,e?b.isFunction(c.delfunc)?c.delfunc.call(n,e):C.delGridRow.call(d,e,W):a()),!1},E=function(){return Y(this,g)||(b.isFunction(c.searchfunc)?c.searchfunc.call(n,U):C.searchGrid.call(d,U)),!1},M=function(){if(!Y(this,g)){b.isFunction(c.beforeRefresh)&&c.beforeRefresh.call(n),s.search=!1,s.resetsearch=!0;try{if("currentfilter"!==c.refreshstate){s.postData.filters="";try{b("#fbox_"+r).jqFilter("resetFilter")}catch(e){}b.isFunction(n.clearToolbar)&&n.clearToolbar(!1)}}catch(e){}switch(c.refreshstate){case"firstpage":d.trigger("reloadGrid",[b.extend({},c.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":d.trigger("reloadGrid",[b.extend({},c.reloadGridOptions||{},{current:!0})])}b.isFunction(c.afterRefresh)&&c.afterRefresh.call(n)}return!1},z=function(e,t,r){var i=b("<div class='"+m+"' tabindex='0' role='button'></div>"),a=c[e+"icon"],o=b.trim(c[e+"text"]);return i.append("<div class='ui-pg-div'><span class='"+(c.iconsOverText?ra("ui-pg-button-icon-over-text",p,a):ra(p,a))+"'></span>"+(o?"<span class='ui-pg-button-text"+(c.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+o+"</span>":"")+"</div>"),b(l).append(i),i.attr({title:c[e+"title"]||"",id:t||e+"_"+y}).click(r).hover(G,F),i};for(c.cloneToTop&&s.toppager&&(q=2),v=0;v<q;v++){if(l=b("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===s.direction?"right":"left")+";table-layout:auto;'></div>"),0===v?(y=i,(w=P)===s.toppager&&(y+="_top",q=1)):(w=s.toppager,y=i+"_top"),c.add&&z("add",L.id,k),c.edit&&z("edit",V.id,I),c.view&&z("view",X.id,N),c.del&&z("del",W.id,A),(c.add||c.edit||c.del||c.view)&&b(l).append(R),c.search&&(e=z("search",U.id,E),U.showOnLoad&&!0===U.showOnLoad&&b(e,l).click()),c.refresh&&z("refresh","",M),e=b(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",b("body").append("<div id='testpg2' class='"+O.call(n,"gBox","ui-jqgrid")+"' style='font-size:"+e+";visibility:hidden;' ></div>"),e=b(l).clone().appendTo("#testpg2").width(),b("#testpg2").remove(),b(w+"_"+c.position,w).append(l),c.hideEmptyPagerParts)for(x=0;x<D.length;x++)D[x]!==c.position&&(0===(S=b(w+"_"+D[x],w)).length||0===S[0].childNodes.length?S.hide():1===S[0].childNodes.length&&(j=S[0].firstChild,!b(j).is("table.ui-pg-table")||0!==j.rows&&0!==j.rows[0].cells.length||S.hide()));s._nvtd&&(e>s._nvtd[0]&&(b(w+"_"+c.position,w).width(e),s._nvtd[0]=e),s._nvtd[1]=e),n.nav=!0,l.on("keydown.jqGrid",o)}d.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(c,u){return"object"==typeof c&&(u=c,c=void 0),this.each(function(){var r=this,e=r.p;if(r.grid){var i=b.extend({caption:"newButton",title:"",onClickButton:null,position:"last",cursor:"pointer",iconsOverText:!1},C.getGridRes.call(b(r),"nav"),t.nav||{},e.navOptions||{},u||{}),a=i.id,o=T.call(r,"hover"),l=T.call(r,"disabled"),n=O.call(r,"navButton","ui-pg-button");if(void 0===c)if(e.pager){if(C.navButtonAdd.call(b(r),e.pager,i),!e.toppager)return;c=e.toppager,a&&(a+="_top")}else e.toppager&&(c=e.toppager);"string"==typeof c&&0!==c.indexOf("#")&&(c="#"+H(c));e=b(".navtable",c);var s=i.commonIconClass;if(0<e.length&&!(a&&0<e.find("#"+H(a)).length)){var d=b("<div tabindex='0' role='button'></div>");"NONE"===i.buttonicon.toString().toUpperCase()?b(d).addClass(n).append("<div class='ui-pg-div'>"+(i.caption?"<span class='ui-pg-button-text"+(i.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+i.caption+"</span>":"")+"</div>"):b(d).addClass(n).append("<div class='ui-pg-div'><span class='"+(i.iconsOverText?ra("ui-pg-button-icon-over-text",s,i.buttonicon):ra(s,i.buttonicon))+"'></span>"+(i.caption?"<span class='ui-pg-button-text"+(i.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+i.caption+"</span>":"")+"</div>"),a&&b(d).attr("id",a),"first"===i.position&&0<e.children("div.ui-pg-button").length?e.children("div.ui-pg-button").first().before(d):e.append(d),b(d,e).attr("title",i.title||"").click(function(e){return Y(this,l)||b.isFunction(i.onClickButton)&&i.onClickButton.call(r,i,e),!1}).hover(function(){Y(this,l)||b(this).addClass(o)},function(){b(this).removeClass(o)}),b(r).triggerHandler("jqGridResetFrozenHeights")}}})},navSeparatorAdd:function(r,i){return i=b.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},i||{}),this.each(function(){if(this.grid){var e=this.p,t=O.call(this,"navButton","ui-pg-button "+T.call(this,"disabled"));if(void 0===r)if(e.pager){if(C.navSeparatorAdd.call(b(this),e.pager,i),!e.toppager)return;r=e.toppager}else e.toppager&&(r=e.toppager);"string"==typeof r&&0!==r.indexOf("#")&&(r="#"+H(r)),0<(e=b(".navtable",r)).length&&(t="<div class='"+t+"'><span class='"+i.sepclass+"'></span>"+i.sepcontent+"</div>","first"===i.position?0===e.children("div.ui-pg-button").length?e.append(t):e.children("div.ui-pg-button").first().before(t):e.append(t))}})},GridToForm:function(o,l){return this.each(function(){var e,t,r,i;if(this.grid){var a=C.getRowData.call(b(this),o);if(a)for(e in a)if(a.hasOwnProperty(e))if((t=b("[name="+H(e)+"]",l)).is("input:radio")||t.is("input:checkbox"))for(r=0;r<t.length;r++)(i=b(t[r])).prop("checked",i.val()===String(a[e]));else t.val(Ra(a[e])?"":a[e])}})},FormToGrid:function(t,i,a,o){return this.each(function(){if(this.grid){a||(a="set"),o||(o="first");var e=b(i).serializeArray(),r={};b.each(e,function(e,t){r[t.name]=t.value}),"add"===a?C.addRowData.call(b(this),t,r,o):"set"===a&&C.setRowData.call(b(this),t,r)}})}}),t.extend({groupingSetup:function(){return this.each(function(){var e,r,i,a,o=(r=this.p).colModel,l=r.groupingView,n=function(){return""};if(null===l||"object"!=typeof l&&!b.isFunction(l))r.grouping=!1;else if(l.groupField.length){for(void 0===l.visibiltyOnNextGrouping&&(l.visibiltyOnNextGrouping=[]),l.lastvalues=[],l._locgr||(l.groups=[]),l.counters=[],e=0;e<l.groupField.length;e++)l.groupOrder[e]||(l.groupOrder[e]="asc"),l.groupText[e]||(l.groupText[e]="{0}"),"boolean"!=typeof l.groupColumnShow[e]&&(l.groupColumnShow[e]=!0),"boolean"!=typeof l.groupSummary[e]&&(l.groupSummary[e]=!1),l.groupSummaryPos[e]||(l.groupSummaryPos[e]="footer"),i=o[r.iColByName[l.groupField[e]]],!0===l.groupColumnShow[e]?(l.visibiltyOnNextGrouping[e]=!0,null!=i&&!0===i.hidden&&C.showCol.call(b(this),l.groupField[e])):(l.visibiltyOnNextGrouping[e]=b("#"+t.jqID(r.id+"_"+l.groupField[e])).is(":visible"),null!=i&&!0!==i.hidden&&C.hideCol.call(b(this),l.groupField[e]));for(l.summary=[],l.hideFirstGroupCol&&(l.formatDisplayField[0]=function(e){return e}),e=0,r=o.length;e<r;e++)i=o[e],l.hideFirstGroupCol&&!i.hidden&&l.groupField[0]===i.name&&(i.formatter=n),i.summaryType&&(a={nm:i.name,st:i.summaryType,v:"",sr:i.summaryRound,srt:i.summaryRoundType||"round"},i.summaryDivider&&(a.sd=i.summaryDivider,a.vd=""),l.summary.push(a))}else r.grouping=!1})},groupingPrepare:function(g,m){return this.each(function(){var e,t,r,i,a,o,l=this.p.groupingView,n=l.groups,s=l.counters,d=l.lastvalues,c=l.isInTheSameGroup,u=l.groupField.length,p=!1,h=C.groupingCalculations.handler;for(e=0;e<u;e++)if(i=l.groupField[e],t=l.displayField[e],a=g[i],null==(o=null==t?null:g[t])&&(o=a),void 0!==a){for(r=[],t=0;t<=e;t++)r.push(g[l.groupField[t]]);var f;for(t={idx:e,dataIndex:i,value:a,displayValue:o,startRow:m,cnt:1,keys:r,summary:[]},i={cnt:1,pos:n.length,summary:b.extend(!0,[],l.summary)},0===m?(n.push(t),d[e]=a,s[e]=i):"object"==typeof a||(b.isArray(c)&&b.isFunction(c[e])?c[e].call(this,d[e],a,e,l):d[e]===a)?p?(n.push(t),d[e]=a,s[e]=i):((i=s[e]).cnt+=1,n[i.pos].cnt=i.cnt):(n.push(t),d[e]=a,p=!0,s[e]=i),a=n[i.pos],r=0;r<i.summary.length;r++)o=i.summary[r],f=b.isArray(o.st)?o.st[t.idx]:o.st,b.isFunction(f)?o.v=f.call(this,o.v,o.nm,g,t):(o.v=h.call(b(this),f,o.v,o.nm,o.sr,o.srt,g),"avg"===f.toLowerCase()&&o.sd&&(o.vd=h.call(b(this),f,o.vd,o.sd,o.sr,o.srt,g)));for(a.summary=i.summary,t=i.pos-1;0<=t;t--)if(n[t].idx<n[i.pos].idx){n[i.pos].parentGroupIndex=t,n[i.pos].parentGroup=n[t];break}}}),this},getGroupHeaderIndex:function(e,r){var i=this[0].p,a=r?b(r).closest("tr.jqgroup"):b("#"+t.jqID(e)),o=parseInt(a.data("jqgrouplevel"),10);i=i.id+"ghead_"+o+"_";return isNaN(o)||!a.hasClass("jqgroup")||e.length<=i.length?-1:parseInt(e.substring(i.length),10)},groupingToggle:function(h,f){return this.each(function(){var e,r,i=this.p,a=i.groupingView,o=a.minusicon,l=a.plusicon,n=f?b(f).closest("tr.jqgroup"):b("#"+t.jqID(h)),s=!0,d=!1,c=[],u=function(e){var t,r=e.length;for(t=0;t<r;t++)c.push(e[t])},p=parseInt(n.data("jqgrouplevel"),10);for(i.frozenColumns&&0<n.length&&(r=n[0].rowIndex,n=(n=b(this.rows[r])).add(this.grid.fbRows[r])),e=n.find(">td>span.tree-wrap"),t.hasAllClasses(e,o)?(e.removeClass(o).addClass(l),d=!0):e.removeClass(l).addClass(o),n=n.next();n.length;n=n.next())if(n.hasClass("jqfoot")){if(e=parseInt(n.data("jqfootlevel"),10),d){if(e=parseInt(n.data("jqfootlevel"),10),(!a.showSummaryOnHide&&e===p||p<e)&&u(n),e<p)break}else if((e===p||a.showSummaryOnHide&&e===p+1)&&u(n),e<=p)break}else if(n.hasClass("jqgroup"))if(e=parseInt(n.data("jqgrouplevel"),10),d){if(e<=p)break;u(n)}else{if(e<=p)break;e===p+1&&(n.find(">td>span.tree-wrap").removeClass(o).addClass(l),u(n)),s=!1}else(d||s)&&u(n);b(c).css("display",d?"none":""),i.frozenColumns&&b(this).triggerHandler("jqGridResetFrozenHeights",[{header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!1,body:{resizeDiv:!0,resizedRows:{iRowStart:r,iRowEnd:n.length?n[0].rowIndex-1:-1}}}]),this.fixScrollOffsetAndhBoxPadding(),b(this).triggerHandler("jqGridGroupingClickGroup",[h,d]),b.isFunction(i.onClickGroup)&&i.onClickGroup.call(this,h,d)}),!1},groupingRender:function(p,h){function f(e,r,i,a,o){var l,n,s,d,c,u,p,h=q[e],f="",g=0,m=!0;if(0!==r&&0!==q[e].idx)for(l=e;0<=l;l--)if(q[l].idx===q[e].idx-r){h=q[l];break}for(e=h.cnt,c=void 0===o?a:0;c<R;c++){for(r="&#160;",l=D[c],n=0;n<h.summary.length;n++)if(s=h.summary[n],u=b.isArray(s.st)?s.st[i.idx]:s.st,p=b.isArray(l.summaryTpl)?l.summaryTpl[i.idx]:l.summaryTpl||"{0}",s.nm===l.name){"string"==typeof u&&"avg"===u.toLowerCase()&&(s.sd&&s.vd?s.v/=s.vd:s.v&&0<e&&(s.v/=e));try{s.groupCount=h.cnt,s.groupIndex=h.dataIndex,s.groupValue=h.value,d=v.formatter("",s.v,c,s)}catch(e){d=s.v}r=t.format(p,d),l.summaryFormat&&(r=l.summaryFormat.call(v,i,r,d,l,s));break}s=n=!1,void 0!==o&&m&&!l.hidden&&(r=o,m=!1,1<a&&(n=!0,g=a-1),s=l.align,l.align="rtl"===w.direction?"right":"left",x.iconColumnName=l.name),0<g&&!l.hidden&&"&#160;"===r?(s&&(l.align=s),g--):(f+="<td role='gridcell' "+v.formatCol(c,1,"")+(n?"colspan='"+a+"'":"")+">"+r+"</td>",s&&(l.align=s))}return f}var g="",v=this[0],w=v.p,m=0,y=[],x=w.groupingView,j=b.makeArray(x.groupSummary),S=x.groupField.length,q=x.groups,D=w.colModel,R=D.length,G=w.page,F=C.getGuiStyles.call(v,"gridRow","jqgroup ui-row-"+w.direction),k=C.getGuiStyles.call(v,"gridRow","jqfoot ui-row-"+w.direction);return b.each(D,function(e,t){var r;for(r=0;r<S;r++)if(x.groupField[r]===t.name){y[r]=e;break}}),j.reverse(),b.each(q,function(e,r){var i,a,o,l,n,s=w.id+"ghead_"+r.idx,d=s+"_"+e,c=b.isFunction(x.groupCollapse)?x.groupCollapse.call(v,{group:r,rowid:d}):x.groupCollapse;o=0,l=S-1===r.idx;var u=null!=r.parentGroup&&r.parentGroup.collapsed;if(n="<span style='cursor:pointer;margin-"+("rtl"===w.direction?"right:":"left:")+12*r.idx+"px;' class='"+x.commonIconClass+" "+(c?x.plusicon:x.minusicon)+" tree-wrap' onclick=\"jQuery('#"+t.jqID(w.id).replace("\\","\\\\")+"').jqGrid('groupingToggle','"+d+"', this);return false;\"></span>",x._locgr&&!(r.startRow+r.cnt>(G-1)*h&&r.startRow<G*h))return!0;u&&(c=!0),void 0!==c&&(r.collapsed=c),m++;try{b.isArray(x.formatDisplayField)&&b.isFunction(x.formatDisplayField[r.idx])?(r.displayValue=x.formatDisplayField[r.idx].call(v,r.displayValue,r.value,D[y[r.idx]],r.idx,x),i=r.displayValue):i=v.formatter(d,r.displayValue,y[r.idx],r.value)}catch(e){i=r.displayValue}if(g+="<tr id='"+d+"' data-jqgrouplevel='"+r.idx+"' "+(c&&u?"style='display:none;' ":"")+"role='row' class='"+F+" "+s+"'>","string"!=typeof(s=b.isFunction(x.groupText[r.idx])?x.groupText[r.idx].call(v,i,r.cnt,r.summary):t.template(x.groupText[r.idx],i,r.cnt,r.summary))&&"number"!=typeof s&&(s=i),"header"===x.groupSummaryPos[r.idx]?(i=1,"cb"!==D[0].name&&"cb"!==D[1].name||i++,"subgrid"!==D[0].name&&"subgrid"!==D[1].name||i++,g+=f(e,0,r,i,n+"<span class='cell-wrapper'>"+s+"</span>")):g+="<td role='gridcell' style='padding-left:"+12*r.idx+"px;' colspan='"+R+"'>"+n+s+"</td>",g+="</tr>",l){for(l=q[e+1],i=r.startRow,n=void 0!==l?l.startRow:q[e].startRow+q[e].cnt,x._locgr&&((o=(G-1)*h)>r.startRow&&(i=o));i<n&&p[i-o];i++)g+=p[i-o].join("");if("header"!==x.groupSummaryPos[r.idx]){if(void 0!==l){for(a=0;a<x.groupField.length&&l.dataIndex!==x.groupField[a];a++);m=x.groupField.length-a}for(o=0;o<m;o++)j[o]&&(g+="<tr data-jqfootlevel='"+(r.idx-o)+(c&&(0<r.idx-o||!x.showSummaryOnHide)?"' style='display:none;'":"'")+" role='row' class='"+k+"'>",g+=f(e,o,q[r.idx-o],0),g+="</tr>");m=a}}}),this.off("jqGridShowHideCol.groupingRender").on("jqGridShowHideCol.groupingRender",function(){var e,t,r,i=w.iColByName[x.iconColumnName];if(0<=b.inArray("header",x.groupSummaryPos)){for(e=0;e<D.length;e++)if(!D[e].hidden){r=e;break}if(void 0!==r&&i!==r){for(e=0;e<v.rows.length;e++)t=v.rows[e],b(t).hasClass("jqgroup")&&(b(t.cells[r]).html(t.cells[i].innerHTML),b(t.cells[i]).html("&nbsp;"));x.iconColumnName=D[r].name}}}),g},groupingGroupBy:function(o,l){return this.each(function(){var e,r,i=this.p,a=i.groupingView;for("string"==typeof o&&(o=[o]),i.grouping=!0,a._locgr=!1,void 0===a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]),e=0;e<a.groupField.length;e++)r=i.colModel[i.iColByName[a.groupField[e]]],!a.groupColumnShow[e]&&a.visibiltyOnNextGrouping[e]&&null!=r&&!0===r.hidden&&C.showCol.call(b(this),a.groupField[e]);for(e=0;e<o.length;e++)a.visibiltyOnNextGrouping[e]=b(i.idSel+"_"+t.jqID(o[e])).is(":visible");i.groupingView=b.extend(i.groupingView,l||{}),a.groupField=o,b(this).trigger("reloadGrid")})},groupingRemove:function(i){return this.each(function(){var e=this.p,t=this.tBodies[0],r=e.groupingView;if(void 0===i&&(i=!0),!(e.grouping=!1)===i){for(e=0;e<r.groupField.length;e++)!r.groupColumnShow[e]&&r.visibiltyOnNextGrouping[e]&&C.showCol.call(b(this),r.groupField);b("tr.jqgroup, tr.jqfoot",t).remove(),b("tr.jqgrow",t).filter(":hidden").show()}else b(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,r,i,a,o){var l={sum:function(){return parseFloat(t||0)+parseFloat(o[r]||0)},min:function(){return""===t?parseFloat(o[r]||0):Math.min(parseFloat(t),parseFloat(o[r]||0))},max:function(){return""===t?parseFloat(o[r]||0):Math.max(parseFloat(t),parseFloat(o[r]||0))},count:function(){return""===t&&(t=0),o.hasOwnProperty(r)?t+1:0},avg:function(){return l.sum()}};if(!l[e])throw"jqGrid Grouping No such method: "+e;return e=l[e](),null!=i&&("fixed"===a?e=e.toFixed(i):(i=Math.pow(10,i),e=Math.round(e*i)/i)),e}}}),b.jgrid.extend({jqGridImport:function(a){return a=b.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},a||{}),this.each(function(){var e,n=this,r=function(e,r){var i,a,o=b(r.xmlGrid.config,e)[0],l=b(r.xmlGrid.data,e)[0];if(Ka.xml2json){for(a in o=Ka.xml2json(o," "),o=b.parseJSON(o))o.hasOwnProperty(a)&&(i=o[a]);void 0!==i&&(l?(l=o.grid.datatype,o.grid.datatype="xmlstring",o.grid.datastr=e,b(n).jqGrid(i).jqGrid("setGridParam",{datatype:l})):b(n).jqGrid(i))}else(null!=t.defaults&&b.isFunction(t.defaults.fatalError)?t.defaults.fatalError:alert)("xml2json or parse are not present")},i=function(e,t){if(e&&"string"==typeof e){var r,i,a=(r=b.parseJSON(e))[t.jsonGrid.config];(r=r[t.jsonGrid.data])?(i=a.datatype,a.datatype="jsonstring",a.datastr=r,b(n).jqGrid(a).jqGrid("setGridParam",{datatype:i})):b(n).jqGrid(a)}};switch(a.imptype){case"xml":b.ajax(b.extend({url:a.impurl,type:a.mtype,data:a.impData,dataType:"xml",context:a,complete:function(e){!(e.status<300||304===e.status)||0===e.status&&4===e.readyState||(r(e.responseXML,this),b(n).triggerHandler("jqGridImportComplete",[e,this]),b.isFunction(this.importComplete)&&this.importComplete(e))}},a.ajaxOptions));break;case"xmlstring":a.impstring&&"string"==typeof a.impstring&&(e=b.parseXML(a.impstring))&&(r(e,a),b(n).triggerHandler("jqGridImportComplete",[e,a]),b.isFunction(a.importComplete)&&a.importComplete(e),a.impstring=null);break;case"json":b.ajax(b.extend({url:a.impurl,type:a.mtype,data:a.impData,dataType:"json",context:a,complete:function(e){try{!(e.status<300||304===e.status)||0===e.status&&4===e.readyState||(i(e.responseText,this),b(n).triggerHandler("jqGridImportComplete",[e,this]),b.isFunction(this.importComplete)&&this.importComplete(e))}catch(e){}}},a.ajaxOptions));break;case"jsonstring":a.impstring&&"string"==typeof a.impstring&&(i(a.impstring,a),b(n).triggerHandler("jqGridImportComplete",[a.impstring,a]),b.isFunction(a.importComplete)&&a.importComplete(a.impstring),a.impstring=null)}})},jqGridExport:function(r){r=b.extend({exptype:"xmlstring",root:"grid",ident:"\t"},r||{});var i=null;return this.each(function(){if(this.grid){var e,t=b.extend(!0,{},b(this).jqGrid("getGridParam"));if(t.rownumbers&&(t.colNames.splice(0,1),t.colModel.splice(0,1)),t.multiselect&&(t.colNames.splice(0,1),t.colModel.splice(0,1)),t.subGrid&&(t.colNames.splice(0,1),t.colModel.splice(0,1)),t.knv=null,t.treeGrid)for(e in t.treeReader)t.treeReader.hasOwnProperty(e)&&(t.colNames.splice(t.colNames.length-1),t.colModel.splice(t.colModel.length-1));switch(r.exptype){case"xmlstring":i="<"+r.root+">"+Ka.json2xml(t,r.ident)+"</"+r.root+">";break;case"jsonstring":i="{"+Ka.toJson(t,r.root,r.ident,!1)+"}",void 0!==t.postData.filters&&(i=(i=i.replace(/filters":"/,'filters":')).replace(/\}\]\}"/,"}]}"))}}}),i},excelExport:function(t){return t=b.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){var e;this.grid&&"remote"===t.exptype&&((e=b.extend({},this.p.postData,t.exportOptions))[t.oper]=t.tag,e=jQuery.param(e),e=-1!==t.url.indexOf("?")?t.url+"&"+e:t.url+"?"+e,window.location=e)})}});var bb=function(e){var r=b.makeArray(arguments).slice(1);return r.unshift(""),r.unshift("Inline"),r.unshift(e),t.feedback.apply(this,r)};t.inlineEdit=t.inlineEdit||{},t.extend({editRow:function(g,e,r,i,a,o,l,n,s,d){var m={},c=b.makeArray(arguments).slice(1);return"object"===b.type(c[0])?m=c[0]:(void 0!==e&&(m.keys=e),b.isFunction(r)&&(m.oneditfunc=r),b.isFunction(i)&&(m.successfunc=i),void 0!==a&&(m.url=a),null!=o&&(m.extraparam=o),b.isFunction(l)&&(m.aftersavefunc=l),b.isFunction(n)&&(m.errorfunc=n),b.isFunction(s)&&(m.afterrestorefunc=s),b.isFunction(d)&&(m.beforeEditRow=d)),this.each(function(){var c=this,o=b(c),u=c.p,p=0,h=null,f={},e=u.colModel,r=u.prmNames;if(c.grid){var l=b.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,mtype:"POST",focusField:!0},t.inlineEdit,u.inlineEditing||{},m),n=o.jqGrid("getInd",g,!0),i=l.focusField,a="object"==typeof i&&null!=i?b(i.target||i).closest("tr.jqgrow>td")[0]:null;if(!1!==n&&(l.extraparam[r.oper]===r.addoper||bb.call(c,l,"beforeEditRow",l,g))&&"0"===(b(n).attr("editable")||"0")&&!b(n).hasClass("not-editable-row")){if(null!=(r=t.detectRowEditing.call(c,g))&&"cellEditing"===r.mode){r=r.savedRow;var s=c.rows[r.id],d=T.call(c,"select");o.jqGrid("restoreCell",r.id,r.ic),b(s.cells[r.ic]).removeClass("edit-cell "+d),b(s).addClass(d).attr({"aria-selected":"true",tabindex:"0"})}t.enumEditableCells.call(c,n,b(n).hasClass("jqgrid-new-row")?"add":"edit",function(e){var r,i=e.cm,a=b(e.dataElement),o=e.dataWidth,l=i.name,n=i.edittype,s=e.iCol,d=i.editoptions||{};if("hidden"!==e.editable){try{r=b.unformat.call(this,e.td,{rowId:g,colModel:i},s)}catch(e){r="textarea"===n?a.text():a.html()}f[l]=r,a.html(""),i=b.extend({},d,{id:g+"_"+l,name:l,rowId:g,mode:e.mode,cm:i,iCol:s}),("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r=""),r=t.createEl.call(c,n,i,r,!0,b.extend({},t.ajaxOptions,u.ajaxSelectOptions||{})),b(r).addClass("editable"),a.append(r),o&&b(r).width(e.dataWidth),t.bindEv.call(c,r,i),"select"===n&&!0===d.multiple&&void 0===d.dataUrl&&t.msie&&b(r).width(b(r).width()),null===h&&(h=s),p++}}),0<p&&(f.id=g,u.savedRow.push(f),b(n).attr("editable","1"),i&&("number"==typeof i&&parseInt(i,10)<=e.length?h=i:"string"==typeof i?h=u.iColByName[i]:null!=a&&(h=a.cellIndex),setTimeout(function(){var t=o.jqGrid("getNumberOfFrozenColumns"),e=function(e){return u.frozenColumns&&0<t&&h<t?c.grid.fbRows[n.rowIndex].cells[e]:n.cells[e]},r=function(e){return b(e).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},i=function(){return r(u.frozenColumns&&0<t?c.grid.fbRows[n.rowIndex]:n).first()},a=r(e(h));0<a.length?a.first().focus():"number"==typeof l.defaultFocusField||"string"==typeof l.defaultFocusField?(0===(a=r(e("number"==typeof l.defaultFocusField?l.defaultFocusField:u.iColByName[l.defaultFocusField]))).length&&(a=i()),a.first().focus()):i().focus()},0)),!0===l.keys&&(e=b(n),u.frozenColumns&&(e=e.add(c.grid.fbRows[n.rowIndex])),e.on("keydown",function(e){return 27===e.keyCode?(o.jqGrid("restoreRow",g,l.afterrestorefunc),!1):13===e.keyCode?"TEXTAREA"===e.target.tagName||(o.jqGrid("saveRow",g,l),!1):void 0})),Da.call(c,l.oneditfunc,"jqGridInlineEditRow",g,l))}}})},saveRow:function(c,e,r,i,a,o,l,n){var s,d=b.makeArray(arguments).slice(1),u={},p=this[0],h=b(p),f=null!=p?p.p:null,g=t.info_dialog,m=b.isFunction,v=null!=t.defaults&&m(t.defaults.fatalError)?t.defaults.fatalError:alert;if(p.grid&&null!=f){"object"===b.type(d[0])?u=d[0]:(m(e)&&(u.successfunc=e),void 0!==r&&(u.url=r),void 0!==i&&(u.extraparam=i),m(a)&&(u.aftersavefunc=a),m(o)&&(u.errorfunc=o),m(l)&&(u.afterrestorefunc=l),m(n)&&(u.beforeSaveRow=n));d=function(e){return h.jqGrid("getGridRes",e)},u=b.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:d("defaults.savetext")||"Saving..."},t.inlineEdit,f.inlineEditing||{},u);var w,y,x,C,j,S={},q={},D={},R=h.jqGrid("getInd",c,!0),G=b(R),F=f.prmNames,k=d("errors.errcap"),_=d("edit.bClose");if(!1!==R&&(s=u.extraparam[F.oper]===F.addoper?"add":"edit",bb.call(p,u,"beforeSaveRow",u,c,s)&&(d=G.attr("editable"),u.url=u.url||f.editurl,C="clientArray"!==u.url,"1"===d&&(t.enumEditableCells.call(p,R,G.hasClass("jqgrid-new-row")?"add":"edit",function(e){var r=e.cm,i=r.formatter,a=r.editoptions||{},o=r.formatoptions||{},l={},n=(b.jgrid.detectRowEditing.call(p,c)||{}).savedRow,s=t.getEditedValue.call(p,b(e.dataElement),r,l,e.editable);if("select"===r.edittype&&"select"!==r.formatter&&(q[r.name]=l.text),null!=(x=t.checkValues.call(p,s,e.iCol,void 0,void 0,b.extend(e,{oldValue:null!=n?n[r.name]:null,newValue:s,oldRowData:n})))&&!1===x[0]){j=!0;try{var d=b(e.td).offset();g.call(p,k,x[1],_,{left:d.left,top:d.top+b(e.td).outerHeight()})}catch(e){v(x[1])}return!1}"date"===i&&!0!==o.sendFormatted&&(s=b.unformat.date.call(p,s,r)),C&&!0===a.NullIfEmpty&&""===s&&(s="null"),S[r.name]=s}),!j))))if(d=c,F=f.prmNames,y=!1===f.keyName?F.id:f.keyName,S&&(S[F.oper]=F.editoper,void 0===S[y]||""===S[y]?S[y]=c:R.id!==f.idPrefix+S[y]&&(R=t.stripPref(f.idPrefix,c),void 0!==f._index[R]&&(f._index[S[y]]=f._index[R],delete f._index[R]),c=f.idPrefix+S[y],G.attr("id",c),f.selrow===d&&(f.selrow=c),b.isArray(f.selarrrow)&&(0<=(R=b.inArray(d,f.selarrrow))&&(f.selarrrow[R]=c)),f.multiselect&&(R="jqg_"+f.id+"_"+c,G.find("input.cbox").attr("id",R).attr("name",R))),S=b.extend({},S,f.inlineData||{},u.extraparam)),C)h.jqGrid("progressBar",{method:"show",loadtype:u.saveui,htmlcontent:u.savetext}),(D=b.extend({},S,D))[y]=t.stripPref(f.idPrefix,D[y]),f.autoEncodeOnEdit&&b.each(D,function(e,r){m(r)||(D[e]=t.oldEncodePostedData(r))}),b.ajax(b.extend({url:m(u.url)?u.url.call(p,D[y],s,D,u):u.url,data:t.serializeFeedback.call(p,m(u.serializeSaveData)?u.serializeSaveData:f.serializeRowData,"jqGridInlineSerializeSaveData",D),type:m(u.mtype)?u.mtype.call(p,s,u,D[y],D):u.mtype,complete:function(e,r){var i,a;if(h.jqGrid("progressBar",{method:"hide",loadtype:u.saveui}),(e.status<300||304===e.status)&&(0!==e.status||4!==e.readyState))if(null!=(a=h.triggerHandler("jqGridInlineSuccessSaveRow",[e,c,u]))&&!0!==a||(a=[!0,S]),a[0]&&m(u.successfunc)&&(a=u.successfunc.call(p,e)),b.isArray(a)?(i=a[0],S=a[1]||S):i=a,!0===i){for(f.autoEncodeOnEdit&&b.each(S,function(e,r){S[e]=t.oldDecodePostedData(r)}),S=b.extend({},S,q),h.jqGrid("setRowData",c,S),G.attr("editable","0"),i=0;i<f.savedRow.length;i++)if(String(f.savedRow[i].id)===String(c)){w=i;break}0<=w&&f.savedRow.splice(w,1),Da.call(p,u.aftersavefunc,"jqGridInlineAfterSaveRow",c,e,S,u),G.removeClass("jqgrid-new-row").off("keydown")}else Da.call(p,u.errorfunc,"jqGridInlineErrorSaveRow",c,e,r,null,u),!0===u.restoreAfterError&&h.jqGrid("restoreRow",c,u.afterrestorefunc)},error:function(t,e,r){if(h.triggerHandler("jqGridInlineErrorSaveRow",[c,t,e,r,u]),m(u.errorfunc))u.errorfunc.call(p,c,t,e,r);else{t=t.responseText||t.statusText;try{g.call(p,k,'<div class="'+T.call(p,"error")+'">'+t+"</div>",_,{buttonalign:"right"})}catch(e){v(t)}}!0===u.restoreAfterError&&h.jqGrid("restoreRow",c,u.afterrestorefunc)}},t.ajaxOptions,f.ajaxRowOptions,u.ajaxSaveOptions||{}));else{for(S=b.extend({},S,q),y=h.jqGrid("setRowData",c,S),G.attr("editable","0"),s=0;s<f.savedRow.length;s++)if(String(f.savedRow[s].id)===String(d)){w=s;break}0<=w&&f.savedRow.splice(w,1),Da.call(p,u.aftersavefunc,"jqGridInlineAfterSaveRow",c,y,S,u),G.removeClass("jqgrid-new-row").off("keydown")}}},restoreRow:function(d,e){var r=b.makeArray(arguments).slice(1),c={};return"object"===b.type(r[0])?c=r[0]:b.isFunction(e)&&(c.afterrestorefunc=e),this.each(function(){var e,r=this,i=b(r),a=r.p,o=-1,l={};if(r.grid){var n=b.extend(!0,{},t.inlineEdit,a.inlineEditing||{},c),s=i.jqGrid("getInd",d,!0);if(!1!==s&&bb.call(r,n,"beforeCancelRow",n,d)){for(e=0;e<a.savedRow.length;e++)if(String(a.savedRow[e].id)===String(d)){o=e;break}if(0<=o){if(b.isFunction(b.fn.datepicker))try{b("input.hasDatepicker","#"+t.jqID(s.id)).datepicker("hide")}catch(e){}b.each(a.colModel,function(){var e=this.name;a.savedRow[o].hasOwnProperty(e)&&(l[e]=a.savedRow[o][e],!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&!0===this.formatoptions.sendFormatted||(l[e]=b.unformat.date.call(r,l[e],this)))}),i.jqGrid("setRowData",d,l),b(s).attr("editable","0").off("keydown"),a.savedRow.splice(o,1),b("#"+t.jqID(d),r).hasClass("jqgrid-new-row")&&setTimeout(function(){i.jqGrid("delRowData",d),i.jqGrid("showAddEditButtons",!1)},0)}Da.call(r,n.afterrestorefunc,"jqGridInlineAfterRestoreRow",d)}}})},addRow:function(o){return this.each(function(){if(this.grid){var r=this,e=b(r),i=r.p,a=b.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},t.inlineEdit,i.inlineEditing||{},o||{});bb.call(r,a,"beforeAddRow",a.addRowParams)&&(a.rowID=b.isFunction(a.rowID)?a.rowID.call(r,a):null!=a.rowID?a.rowID:t.randId(),!0===a.useDefValues&&b(i.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var e=this.editoptions.defaultValue;a.initdata[this.name]=b.isFunction(e)?e.call(r):e}}),a.rowID=i.idPrefix+a.rowID,e.jqGrid("addRowData",a.rowID,a.initdata,a.position),b("#"+t.jqID(a.rowID),r).addClass("jqgrid-new-row"),a.useFormatter?b("#"+t.jqID(a.rowID)+" .ui-inline-edit",r).click():(i=i.prmNames,a.addRowParams.extraparam[i.oper]=i.addoper,e.jqGrid("editRow",a.rowID,a.addRowParams),e.jqGrid("setSelection",a.rowID)))}})},inlineNav:function(u,p){return"object"==typeof u&&(p=u,u=void 0),this.each(function(){var o=this,l=b(o),n=o.p;if(this.grid&&null!=n){var e,r=u===n.toppager?n.idSel+"_top":n.idSel,i=u===n.toppager?n.id+"_top":n.id,s=T.call(o,"disabled"),d=b.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},l.jqGrid("getGridRes","nav"),t.nav||{},n.navOptions||{},t.inlineNav||{},n.inlineNavOptions||{},p||{});if(void 0===u)if(n.pager){if(l.jqGrid("inlineNav",n.pager,d),!n.toppager)return;u=n.toppager,r=n.idSel+"_top",i=n.id+"_top"}else n.toppager&&(u=n.toppager,r=n.idSel+"_top",i=n.id+"_top");if(void 0!==u&&!((e=b(u)).length<=0)){var a,c;if(e.find(".navtable").length<=0&&l.jqGrid("navGrid",u,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1}),(n._inlinenav=!0)===d.addParams.useFormatter)for(e=n.colModel,a=0;a<e.length;a++)if(e[a].formatter&&"actions"===e[a].formatter){e[a].formatoptions&&(c={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},e=b.extend(c,e[a].formatoptions),d.addParams.addRowParams={keys:e.keys,oneditfunc:e.onEdit,successfunc:e.onSuccess,url:e.url,extraparam:e.extraparam,aftersavefunc:e.afterSave,errorfunc:e.onError,afterrestorefunc:e.afterRestore});break}d.add&&l.jqGrid("navButtonAdd",u,{caption:d.addtext,title:d.addtitle,commonIconClass:d.commonIconClass,buttonicon:d.addicon,iconsOverText:d.iconsOverText,id:i+"_iladd",onClickButton:function(){Y(this,s)||l.jqGrid("addRow",d.addParams)}}),d.edit&&l.jqGrid("navButtonAdd",u,{caption:d.edittext,title:d.edittitle,commonIconClass:d.commonIconClass,buttonicon:d.editicon,iconsOverText:d.iconsOverText,id:i+"_iledit",onClickButton:function(){if(!Y(this,s)){var e=n.selrow;e?l.jqGrid("editRow",e,d.editParams):o.modalAlert()}}}),d.save&&(l.jqGrid("navButtonAdd",u,{caption:d.savetext,title:d.savetitle,commonIconClass:d.commonIconClass,buttonicon:d.saveicon,iconsOverText:d.iconsOverText,id:i+"_ilsave",onClickButton:function(){if(!Y(this,s)){var e=n.savedRow[0].id;if(e){var r=n.prmNames,i=r.oper,a=d.editParams;b("#"+t.jqID(e),o).hasClass("jqgrid-new-row")?(d.addParams.addRowParams.extraparam[i]=r.addoper,a=d.addParams.addRowParams):(d.editParams.extraparam||(d.editParams.extraparam={}),d.editParams.extraparam[i]=r.editoper),l.jqGrid("saveRow",e,a)}else o.modalAlert()}}}),b(r+"_ilsave").addClass(s)),d.cancel&&(l.jqGrid("navButtonAdd",u,{caption:d.canceltext,title:d.canceltitle,commonIconClass:d.commonIconClass,buttonicon:d.cancelicon,iconsOverText:d.iconsOverText,id:i+"_ilcancel",onClickButton:function(){if(!Y(this,s)){var e=n.savedRow[0].id,r=d.editParams;e?(b("#"+t.jqID(e),o).hasClass("jqgrid-new-row")&&(r=d.addParams.addRowParams),l.jqGrid("restoreRow",e,r)):o.modalAlert()}}}),b(r+"_ilcancel").addClass(s)),!0===d.restoreAfterSelect&&l.on("jqGridSelectRow",function(e,t){if(0<n.savedRow.length&&!0===n._inlinenav){var r=n.savedRow[0].id;t!==r&&"number"!=typeof r&&l.jqGrid("restoreRow",r,d.editParams)}}),l.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){l.jqGrid("showAddEditButtons",!1)}),l.on("jqGridInlineEditRow",function(e,t){l.jqGrid("showAddEditButtons",!0,t)})}}})},showAddEditButtons:function(a){return this.each(function(){if(this.grid){var e=(i=this.p).idSel,t=T.call(this,"disabled"),r=e+"_ilsave,"+e+"_ilcancel"+(i.toppager?","+e+"_top_ilsave,"+e+"_top_ilcancel":""),i=e+"_iladd,"+e+"_iledit"+(i.toppager?","+e+"_top_iladd,"+e+"_top_iledit":"");b(a?i:r).addClass(t),b(a?r:i).removeClass(t)}})}});var ga=null!=b.ui?b.ui.multiselect:null,sb=function(r){if(null!=this.grid&&null!=this.grid.p){var i,e,t,a,o,l=this,n=this.grid.p,s=this.gh,d=this.selectedList,c=d.find("li"),u=Array(n.colModel.length),p=c.length-1,h=function(e,t,r){var i,a=d.find("li");for(void 0===t&&(t=r?a.length-1:0);r?0<=t:t<a.length;r?t--:t++)if((i=b(a[t]).data("optionLink"))&&e.call(a[t],parseInt(i.val(),10),t))return t};o=function(e){if(u[e]===u[r])return b(this).after(c[p]),m(),!0};var f=function(e){if(u[e]===u[r])return b(this).before(c[p]),m(),!0},g=function(e){if(u[e]===u[r]&&void 0!==u[e])return s[u[e]].startColumnName=n.colModel[e].name,!0},m=function(){0<=(e=b.inArray(n.colModel[r].name,l.newColOrder))&&l.newColOrder.splice(e,1),c=d.find("li"),i=0,h(function(e,t){if(e===r){for(p=t;0<=i&&!n.colModel[i].hidden&&n.colModel[i].hidedlg&&u[i]===u[r];)i++;return l.newColOrder.splice(i,0,n.colModel[r].name),!0}(i=b.inArray(n.colModel[e].name,l.newColOrder,i))<0&&(i=b.inArray(n.colModel[e].name,l.newColOrder)),i++})};if(s)for(t=0;t<s.length;t++)for(a=s[t],i=0;i<a.numberOfColumns;i++)u[n.iColByName[a.startColumnName]+i]=t;if(m(),s&&void 0!==s[u[r]]){for(a=s[u[r]],e=0;e<a.numberOfColumns;e++)if(i=n.iColByName[a.startColumnName]+e,!n.colModel[i].hidden&&!n.colModel[i].hidedlg){h(o,p-1,!0),h(f,p+1),h(g);break}}else!s||(c=d.find("li"),(e=h(function(e){if(e===r)return!0}))+1>=c.length||e<0||!(o=b(c[e+1]).data("optionLink")))||void 0!==(t=u[parseInt(o.val(),10)])&&(o=b(c[e-1]).data("optionLink"))&&u[parseInt(o.val(),10)]===t&&(o=h(function(e){if(u[e]!==t)return!0},e+1),b(c[o>=c.length?c.length-1:o-1]).after(c[p]),m())}};if(t.msie&&8===t.msiever()&&(b.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"===e.style.display}),t._multiselect=!1,ga){if(ga.prototype._setSelected){var Db=ga.prototype._setSelected;ga.prototype._setSelected=function(e,t){var r=Db.call(this,e,t),i=this.element,a=parseInt(e.data("optionLink").val(),10);return t&&this.selectedList&&(sb.call(this,a),this.selectedList.find("li").each(function(){b(this).data("optionLink")&&b(this).data("optionLink").remove().appendTo(i)})),r}}ga.prototype.destroy&&(ga.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===b.Widget?b.widget.prototype.destroy.apply(this,arguments):b.Widget.prototype.destroy.apply(this,arguments)}),t._multiselect=!0}t.extend({sortableColumns:function(t){return this.each(function(){function r(){l.disableClick=!0}var o=this,l=o.p,e={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+(e=H(l.id))+"_cb,#jqgh_"+e+"_rn,#jqgh_"+e+"_subgrid),:hidden)",placeholder:{element:function(e){return b(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},start:function(){o.grid.hDiv.scrollLeft=o.grid.bDiv.scrollLeft},update:function(e,t){var r=b(">th",b(t.item).parent()),i=l.id+"_",a=[];r.each(function(){var e=b(">div",this).get(0).id.replace(/^jqgh_/,"").replace(i,"");void 0!==(e=l.iColByName[e])&&a.push(e)}),b(o).jqGrid("remapColumns",a,!0,!0),b.isFunction(l.sortable.update)&&l.sortable.update(a),setTimeout(function(){l.disableClick=!1},50)}};if(l.sortable.options?b.extend(e,l.sortable.options):b.isFunction(l.sortable)&&(l.sortable={update:l.sortable}),e.start){var i=e.start;e.start=function(e,t){r(),i.call(this,e,t)}}else e.start=r;l.sortable.exclude&&(e.items+=":not("+l.sortable.exclude+")"),null!=(e=(e=t.sortable(e)).data("sortable")||e.data("uiSortable")||e.data("ui-sortable"))&&(e.floating=!0)})},columnChooser:function(i){function r(e,t){e&&("string"==typeof e?b.fn[e]&&b.fn[e].apply(t,b.makeArray(arguments).slice(2)):b.isFunction(e)&&e.apply(t,b.makeArray(arguments).slice(2)))}var a,o,e,l,n=this,s=n[0],d=s.p,c=d.colModel;e=c.length;var u=d.colNames,p=function(e){return ga&&ga.prototype&&e.data(ga.prototype.widgetFullName||ga.prototype.widgetName)||e.data("ui-multiselect")||e.data("multiselect")};if(!b("#colchooser_"+H(d.id)).length){if(a=b('<div id="colchooser_'+d.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),o=b("select",a),i=b.extend({width:400,height:240,classname:null,done:function(e){e&&n.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(e){var t={};return t[e.bSubmit]=function(){e.apply_perm(),e.cleanup(!1)},t[e.bCancel]=function(){e.cleanup(!0)},b.extend(!0,{buttons:t,close:function(){e.cleanup(!0)},modal:e.modal||!1,resizable:e.resizable||!0,width:e.width+70,resize:function(){var e=p(o),t=e.container.closest(".ui-dialog-content");0<t.length&&"object"==typeof t[0].style?t[0].style.width="":t.css("width",""),e.selectedList.height(Math.max(e.selectedContainer.height()-e.selectedActions.outerHeight()-1,1)),e.availableList.height(Math.max(e.availableContainer.height()-e.availableActions.outerHeight()-1,1))}},e.dialog_opts||{})},apply_perm:function(){var e,t=Array(d.colModel.length),r={notSkipFrozen:void 0!==i.notSkipFrozen&&i.notSkipFrozen,skipSetGridWidth:!0,skipSetGroupHeaders:!0};for(e=0;e<d.colModel.length;e++)t[e]=d.iColByName[l.newColOrder[e]];if(b("option",o).each(function(){b(this).is(":selected")?n.jqGrid("showCol",c[this.value].name,r):n.jqGrid("hideCol",c[this.value].name,r)}),i.done&&i.done.call(n,t),d.groupHeader&&("object"==typeof d.groupHeader||b.isFunction(d.groupHeader)))if(n.jqGrid("destroyGroupHeader",!1),d.groupHeader.groupHeaders=l.gh,null!=d.pivotOptions&&null!=d.pivotOptions.colHeaders&&1<d.pivotOptions.colHeaders.length)for(t=d.pivotOptions.colHeaders,e=0;e<t.length;e++)t[e]&&t[e].groupHeaders.length&&n.jqGrid("setGroupHeaders",t[e]);else n.jqGrid("setGroupHeaders",d.groupHeader);n.jqGrid("setGridWidth",d.autowidth||void 0!==d.widthOrg&&"auto"!==d.widthOrg&&"100%"!==d.widthOrg?d.width:d.tblwidth,d.shrinkToFit)},cleanup:function(e){r(i.dlog,a,"destroy"),r(i.msel,o,"destroy"),a.remove(),e&&i.done&&i.done.call(n)},msel_opts:{}},n.jqGrid("getGridRes","col"),t.col,i||{}),b.ui&&ga&&ga.defaults){if(!t._multiselect)return void(null!=t.defaults&&b.isFunction(t.defaults.fatalError)?t.defaults.fatalError:alert)("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");i.msel_opts=b.extend(ga.defaults,i.msel_opts)}i.caption&&a.attr("title",i.caption),i.classname&&(a.addClass(i.classname),o.addClass(i.classname)),i.width&&(b(">div",a).css({width:i.width,margin:"0 auto"}),o.css("width",i.width)),i.height&&(b(">div",a).css("height",i.height),o.css("height",i.height-10)),o.empty();var h,f,g,m,v=null!=d.groupHeader?d.groupHeader.groupHeaders:0,w={};if(v)for(h=0;h<v.length;h++)for(m=v[h],f=0;f<m.numberOfColumns;f++)g=d.iColByName[m.startColumnName]+f,w[g]=b.isFunction(i.buildItemText)?i.buildItemText.call(n[0],{iCol:g,cm:c[g],cmName:c[g].name,colName:u[g],groupTitleText:m.titleText}):b.jgrid.stripHtml(m.titleText)+": "+b.jgrid.stripHtml(""===u[g]?c[g].name:u[g]);for(g=0;g<e;g++)void 0===w[g]&&(w[g]=b.isFunction(i.buildItemText)?i.buildItemText.call(n[0],{iCol:g,cm:c[g],cmName:c[g].name,colName:u[g],groupTitleText:null}):b.jgrid.stripHtml(u[g]));b.each(c,function(e){this.hidedlg||o.append("<option value='"+e+"'"+(d.headertitles||this.headerTitle?" title='"+t.stripHtml("string"==typeof this.headerTitle?this.headerTitle:w[e])+"'":"")+(this.hidden?"":" selected='selected'")+">"+w[e]+"</option>")}),e=b.isFunction(i.dlog_opts)?i.dlog_opts.call(n,i):i.dlog_opts,r(i.dlog,a,e),e=b.isFunction(i.msel_opts)?i.msel_opts.call(n,i):i.msel_opts,r(i.msel,o,e),(e=b("#colchooser_"+H(d.id))).css({margin:"auto"}),e.find(">div").css({width:"100%",height:"100%",margin:"auto"}),(l=p(o))&&(l.grid=s,null!=d.groupHeader&&(l.gh=b.extend(!0,[],d.groupHeader.groupHeaders)),l.newColOrder=b.map(c,function(e){return e.name}),l.container.css({width:"100%",height:"100%",margin:"auto"}),l.selectedContainer.css({width:100*l.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),l.availableContainer.css({width:100-100*l.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),l.selectedList.css("height","auto"),l.availableList.css("height","auto"),e=Math.max(l.selectedList.height(),l.availableList.height()),e=Math.min(e,b(window).height()),l.selectedList.css("height",e),l.availableList.css("height",e),null!=l.options&&l.options.sortable&&l.selectedList.on("sortupdate",function(e,t){v&&sb.call(l,parseInt(t.item.data("optionLink").val(),10)),t.item.css({width:"",height:""}),b.isFunction(i.sortUpdate)&&i.sortUpdate.call(s,e,t)}),b.isFunction(i.init)&&i.init.call(s,l))}},sortableRows:function(l){return this.each(function(){var i=this,a=i.grid,o=i.p;a&&!o.treeGrid&&b.fn.sortable&&((l=b.extend({cursor:"move",axis:"y",items:">tbody>.jqgrow"},l||{})).start&&b.isFunction(l.start)?(l._start_=l.start,delete l.start):l._start_=!1,l.update&&b.isFunction(l.update)?(l._update_=l.update,delete l.update):l._update_=!1,l.start=function(e,t){if(b(t.item).css("border-width","0"),b("td",t.item).each(function(e){this.style.width=a.cols[e].style.width}),o.subGrid){var r=b(t.item).attr("id");try{b(i).jqGrid("collapseSubGridRow",r)}catch(e){}}l._start_&&l._start_.apply(this,[e,t])},l.update=function(e,t){b(t.item).css("border-width",""),!0===o.rownumbers&&b("td.jqgrid-rownum",i.rows).each(function(e){b(this).html(e+1+(parseInt(o.page,10)-1)*parseInt(o.rowNum,10))}),l._update_&&l._update_.apply(this,[e,t])},b(i).sortable(l))})},gridDnD:function(i){return this.each(function(){function e(){var e=b.data(c,"dnd");b("tr.jqgrow:not(.ui-draggable)",c).draggable(b.isFunction(e.drag)?e.drag.call(b(c),e):e.drag)}var t,r,c=this;if(c.grid&&!c.p.treeGrid&&b.fn.draggable&&b.fn.droppable)if(void 0===b("#jqgrid_dnd")[0]&&b("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"==typeof i&&"updateDnD"===i&&!0===c.p.jqgdnd)e();else if((i=b.extend({drag:function(i){return b.extend({start:function(e,t){var r;if(c.p.subGrid){r=b(t.helper).attr("id");try{b(c).jqGrid("collapseSubGridRow",r)}catch(e){}}for(r=0;r<b.data(c,"dnd").connectWith.length;r++)0===b(b.data(c,"dnd").connectWith[r]).jqGrid("getGridParam","reccount")&&b(b.data(c,"dnd").connectWith[r]).jqGrid("addRowData","jqg_empty_row",{});t.helper.addClass("ui-state-highlight"),b("td",t.helper).each(function(e){this.style.width=c.grid.headers[e].width+"px"}),i.onstart&&b.isFunction(i.onstart)&&i.onstart.call(b(c),e,t)},stop:function(e,t){var r;for(t.helper.dropped&&!i.dragcopy&&(void 0===(r=b(t.helper).attr("id"))&&(r=b(this).attr("id")),b(c).jqGrid("delRowData",r)),r=0;r<b.data(c,"dnd").connectWith.length;r++)b(b.data(c,"dnd").connectWith[r]).jqGrid("delRowData","jqg_empty_row");i.onstop&&b.isFunction(i.onstop)&&i.onstop.call(b(c),e,t)}},i.drag_opts||{})},drop:function(d){return b.extend({accept:function(e){return b(e).hasClass("jqgrow")?0<(e=b(e).closest("table.ui-jqgrid-btable")).length&&void 0!==b.data(e[0],"dnd")&&(e=b.data(e[0],"dnd").connectWith,-1!==b.inArray("#"+H(this.id),e)):e},drop:function(e,t){if(b(t.draggable).hasClass("jqgrow")){var r,i=b(t.draggable).attr("id");i=t.draggable.parent().parent().jqGrid("getRowData",i);if(!d.dropbyname){var a,o,l=0,n={},s=b("#"+H(this.id)).jqGrid("getGridParam","colModel");try{for(o in i)i.hasOwnProperty(o)&&("cb"!==(a=s[l].name)&&"rn"!==a&&"subgrid"!==a&&i.hasOwnProperty(o)&&s[l]&&(n[a]=i[o]),l++);i=n}catch(e){}}if(t.helper.dropped=!0,d.beforedrop&&b.isFunction(d.beforedrop)&&(null!=(a=d.beforedrop.call(this,e,t,i,b("#"+H(c.p.id)),b(this)))&&"object"==typeof a&&(i=a)),t.helper.dropped)d.autoid&&(b.isFunction(d.autoid)?r=d.autoid.call(this,i):(r=Math.ceil(1e3*Math.random()),r=d.autoidprefix+r)),b("#"+H(this.id)).jqGrid("addRowData",r,i,d.droppos),i[c.p.localReader.id]=r;d.ondrop&&b.isFunction(d.ondrop)&&d.ondrop.call(this,e,t,i)}}},d.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},i||{})).connectWith)for(i.connectWith=i.connectWith.split(","),i.connectWith=b.map(i.connectWith,function(e){return b.trim(e)}),b.data(c,"dnd",i),0===c.p.reccount||c.p.jqgdnd||e(),c.p.jqgdnd=!0,t=0;t<i.connectWith.length;t++)r=i.connectWith[t],b(r).droppable(b.isFunction(i.drop)?i.drop.call(b(c),i):i.drop)})},gridResize:function(d){return this.each(function(){var r,i=this,a=i.grid,o=i.p,l=o.gView+">.ui-jqgrid-bdiv",n=!1,s=o.height;if(a&&b.fn.resizable){if((d=b.extend({},d||{})).alsoResize?(d._alsoResize_=d.alsoResize,delete d.alsoResize):d._alsoResize_=!1,d.stop&&b.isFunction(d.stop)?(d._stop_=d.stop,delete d.stop):d._stop_=!1,d.stop=function(e,t){b(i).jqGrid("setGridWidth",t.size.width,d.shrinkToFit),b(o.gView+">.ui-jqgrid-titlebar").css("width",""),n?(b(r).each(function(){b(this).css("height","")}),"auto"!==s&&"100%"!==s||b(a.bDiv).css("height",s)):b(i).jqGrid("setGridParam",{height:b(l).height()}),i.fixScrollOffsetAndhBoxPadding&&i.fixScrollOffsetAndhBoxPadding(),d._stop_&&d._stop_.call(i,e,t)},r=l,"auto"!==s&&"100%"!==s||void 0!==d.handles||(d.handles="e,w"),d.handles){var e=b.map(String(d.handles).split(","),function(e){return b.trim(e)});2===e.length&&("e"===e[0]&&"w"===e[1]||"e"===e[1]&&"w"===e[1])&&(r=o.gView+">div:not(.frozen-div)",n=!0,o.pager&&(r+=","+o.pager))}d.alsoResize=d._alsoResize_?r+","+d._alsoResize_:r,delete d._alsoResize_,b(o.gBox).resizable(d)}})}}),P.prototype.calc=function(e,t,r,i,a){if(void 0!==e)switch(this.result=this.result||0,e=parseFloat(e),this.aggregator){case"sum":this.result+=e;break;case"count":this.result++;break;case"avg":this.finilized?(this.count=this.count||0,this.result=(this.result*this.count+e)/(this.count+1)):(this.result+=e,this.count=this.count||0),this.count++;break;case"min":this.result=Math.min(this.result,e);break;case"max":this.result=Math.max(this.result,e);break;default:b.isFunction(this.aggregator)&&(this.result=this.aggregator.call(this.context,{previousResult:this.result,value:e,fieldName:t,item:r,iItem:i,items:a}))}},P.prototype.getResult=function(e,t,r){(void 0!==this.result||r)&&(r&&void 0!==this.result&&(this.count=this.result=0),void 0===this.result||this.finilized||"avg"!==this.aggregator||(this.result/=this.count,this.finilized=!0),e[t]=this.result)},K.prototype.compareVectorsEx=function(e,t){var r,i,a=this.fieldLength;for(r=0;r<a;r++)if(0!==(i=this.fieldCompare[r](e[r],t[r])))return{index:r,result:i};return{index:-1,result:0}},K.prototype.getIndexOfDifferences=function(e,t){return null===t||null===e?0:this.compareVectorsEx(e,t).index},K.prototype.compareVectors=function(e,t){var r=this.compareVectorsEx(e,t);return 0<(0<=r.index?this.fieldSortDirection[r.index]:1)?r.result:-r.result},K.prototype.getItem=function(e){return this.items[e]},K.prototype.getIndexLength=function(){return this.items.length},K.prototype.getIndexesOfSourceData=function(e){return this.indexesOfSourceData[e]},K.prototype.createDataIndex=function(e){var t,r,i,a,o,l,n=e.length,s=this.fieldLength,d=this.fieldNames,c=this.indexesOfSourceData,u=this.items;for(t=0;t<n;t++){for(o=e[t],r=Array(s),a=0;a<s;a++)void 0!==(i=o[d[a]])&&("string"==typeof i&&this.trimByCollect&&(i=b.trim(i)),r[a]=i);if(o=0,(l=u.length-1)<0)u.push(r),c.push([t]);else if(0===(i=this.compareVectors(r,u[l])))c[l].push(t);else if(1===i||this.skipSort)u.push(r),c.push([t]);else if(1===(i=this.compareVectors(u[0],r)))u.unshift(r),c.unshift([t]);else if(0===i)c[0].push(t);else for(;;){if(l-o<2){u.splice(l,0,r),c.splice(l,0,[t]);break}if(a=Math.floor((o+l)/2),0===(i=this.compareVectors(u[a],r))){c[a].push(t);break}1===i?l=a:o=a}}},t.extend({pivotSetup:function(s,r){var e,i,a,d,o,l,n,c,u,p,h,f=this[0],g=b.isArray,m={},v={groupField:[],groupSummary:[],groupSummaryPos:[]},w={grouping:!0,groupingView:v},y=b.extend({totals:!1,useColSpanStyle:!1,trimByCollect:!0,skipSortByX:!1,skipSortByY:!1,caseSensitive:!1,footerTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1,defaultFormatting:!0,data:s},r||{}),x=s.length,C=y.xDimension,j=y.yDimension,S=y.aggregates,q=(x=y.totalText||y.totals||y.rowTotals||y.totalHeader,g(C)?C.length:0);n=g(j)?j.length:0;var D,R,G,F,k,_,O,I,N,T,A,E=g(S)?S.length:0,M=n-(1===E?1:0),z=[],B=[],H=[],V=(g=[],["pivotInfos"]),L=Array(E),W=Array(n),U=function(e,r,i,a,o){var l,n;switch(e){case 1:l=j[a].totalText||"{0} {1} {2}",n="y"+o+"t"+a;break;case 2:l=y.totalText||"{0}",n="t";break;default:l=1<E?r.label||"{0}":A.getItem(o)[a],n="y"+o}return delete(e=b.extend({},r,{name:n+(1<E?"a"+i:""),label:b.isFunction(l)?l.call(f,2===e?{aggregate:r,iAggregate:i,pivotOptions:y}:{yIndex:A.getItem(o),aggregate:r,iAggregate:i,yLevel:a,pivotOptions:y}):t.template.apply(f,2===e?[l,r.aggregator,r.member,i]:[l,r.aggregator,r.member,A.getItem(o)[a],a])})).member,delete e.aggregator,e};c=function(e,t,r){var i,a;for(i=0;i<E;i++)void 0===(a=S[i]).template&&void 0===a.formatter&&y.defaultFormatting&&(a.template="count"===a.aggregator?"integer":"number"),H.push(U(e,a,i,t,r))},D=function(e,r,i){var a,o,l,n;for(a=M-1;r<=a;a--)if(B[a]){for(o=0;o<=a;o++)(N=z[o].groupHeaders)[N.length-1].numberOfColumns+=E;for(l=(d=j[a]).totalHeader,n=d.headerOnTop,o=a+1;o<=M-1;o++)z[o].groupHeaders.push({titleText:n&&o===a+1||!n&&o===M-1?b.isFunction(l)?l.call(f,i,a):t.template.call(f,l||"",i[a],a):"",startColumnName:"y"+(e-1)+"t"+a+(1===E?"":"a0"),numberOfColumns:E})}};var Y=function(e){return(e=new P("count"===S[e].aggregator?"sum":S[e].aggregator,f,r)).groupInfo={iRows:[],rows:[],ys:[],iYs:[]},e},X=function(){var e,t;for(e=M-1;0<=e;e--)if(B[e])for(null==W[e]&&(W[e]=Array(E)),t=0;t<E;t++)W[e][t]=Y(t)},$=function(e,t,r,i){var a,o,l,n=A.getIndexOfDifferences(t,r);if(null!==r)for(n=Math.max(n,0),a=M-1;n<=a;a--)o="y"+e+"t"+a+(1<E?"a"+i:""),B[a]&&void 0===O[o]&&((l=W[a][i]).getResult(O,o),O.pivotInfos[o]={colType:1,iA:i,a:S[i],level:a,iRows:l.groupInfo.iRows,rows:l.groupInfo.rows,ys:l.groupInfo.ys,iYs:l.groupInfo.iYs},t!==r&&(W[a][i]=Y(i)))},Q=function(e,t,r,i,a,o,l){var n;if(e!==t)for(t=M-1;0<=t;t--)B[t]&&((n=W[t][i]).calc(a[r.member],r.member,a,o,s),n=n.groupInfo,b.inArray(l,n.iYs)<0&&(n.iYs.push(l),n.ys.push(e)),b.inArray(o,n.iRows)<0&&(n.iRows.push(o),n.rows.push(a)))};if(0===q||0===E)throw"xDimension or aggregates options are not set!";for(T=(i=function(e,t,r){return e=new K(y.trimByCollect,y.caseSensitive,t,e),b.isFunction(r)&&(e.compareVectorsEx=r),e.createDataIndex(s),e})(C,y.skipSortByX,y.compareVectorsByX),A=i(j,y.skipSortByY,y.compareVectorsByY),r.xIndex=T,r.yIndex=A,i=0;i<q;i++)o={name:"x"+i,label:null!=(a=C[i]).label?b.isFunction(a.label)?a.label.call(f,a,i,y):a.label:a.dataName,frozen:y.frozenStaticCols},i<q-1&&!a.skipGrouping&&!a.additionalProperty&&(v.groupField.push(o.name),v.groupSummary.push(y.groupSummary),v.groupSummaryPos.push(y.groupSummaryPos)),delete(o=b.extend(o,a)).dataName,delete o.footerText,a.additionalProperty?V.push(o.name):(H.push(o),w.sortname=o.name);for(q<2&&(w.grouping=!1),v.hideFirstGroupCol=!0,i=0;i<n;i++)d=j[i],B.push(!!(d.totals||d.rowTotals||d.totalText||d.totalHeader));for(I=A.getItem(0),c(0,n-1,0),v=A.getIndexLength(),o=1;o<v;o++){for(G=A.getItem(o),i=A.getIndexOfDifferences(G,I),a=M-1;i<=a;a--)B[a]&&c(1,a,o-1);I=G,c(0,n-1,o)}for(i=M-1;0<=i;i--)B[i]&&c(1,i,v-1);for(x&&c(2),I=A.getItem(0),a=0;a<M;a++)z.push({useColSpanStyle:y.useColSpanStyle,groupHeaders:[{titleText:I[a],startColumnName:1===E?"y0":"y0a0",numberOfColumns:E}]});for(o=1;o<v;o++){for(G=A.getItem(o),D(o,i=A.getIndexOfDifferences(G,I),I),a=M-1;i<=a;a--)z[a].groupHeaders.push({titleText:G[a],startColumnName:"y"+o+(1===E?"":"a0"),numberOfColumns:E});for(a=0;a<i;a++)(N=z[a].groupHeaders)[N.length-1].numberOfColumns+=E;I=G}if(D(v,0,I),x)for(i=0;i<M;i++)z[i].groupHeaders.push({titleText:i<M-1?"":y.totalHeader||"",startColumnName:"t"+(1===E?"":"a0"),numberOfColumns:E});for(D=T.getIndexLength(),n=0;n<D;n++){for(a=T.getItem(n),O={pivotInfos:c={iX:n,x:a}},i=0;i<q;i++)O["x"+i]=a[i];if(R=T.getIndexesOfSourceData(n),x)for(a=0;a<E;a++)L[a]=Y(a);for(I=null,X(),o=0;o<v;o++){for(G=A.getItem(o),F=A.getIndexesOfSourceData(o),a=0;a<E;a++){for(null!==I&&$(o-1,G,I,a),k=[],i=0;i<F.length;i++)l=F[i],0<=b.inArray(l,R)&&k.push(l);if(0<k.length){for(u=Array(k.length),p=new P((_=S[a]).aggregator,f,r),l=0;l<k.length;l++)i=k[l],e=s[i],u[l]=e,p.calc(e[_.member],_.member,e,i,s),x&&((h=L[a]).calc(e[_.member],_.member,e,i,s),h=h.groupInfo,b.inArray(i,h.iYs)<0&&(h.iYs.push(o),h.ys.push(G)),b.inArray(i,h.iRows)<0&&(h.iRows.push(i),h.rows.push(e))),Q(G,I,_,a,e,i,o);e="y"+o+(1===E?"":"a"+a),p.getResult(O,e),c[e]={colType:0,iY:o,y:G,iA:a,a:_,iRows:k,rows:u}}}I=G}if(null!==I)for(a=0;a<E;a++)$(v-1,I,I,a);if(x)for(a=0;a<E;a++)e="t"+(1===E?"":"a"+a),(h=L[a]).getResult(O,e),h=h.groupInfo,c[e]={colType:2,iA:a,a:S[a],iRows:h.iRows,rows:h.rows,iYs:h.iYs,ys:h.ys};g.push(O)}if(y.footerTotals||y.colTotals){for(x=g.length,i=0;i<q;i++)m["x"+i]=C[i].footerText||"";for(i=q;i<H.length;i++){for(e=H[i].name,p=new P(y.footerAggregator||"sum",f,r),l=0;l<x;l++)O=g[l],p.calc(O[e],e,O,l,g);p.getResult(m,e)}}return r.colHeaders=z,{colModel:H,additionalProperties:V,options:r,rows:g,groupOptions:w,groupHeaders:z,summary:m}},jqPivot:function(c,u,p,i){return this.each(function(){function r(){var e,r,i=d.pivotSetup.call(s,c,u),a=i.groupHeaders,o=i.summary,l=0;for(e in o)o.hasOwnProperty(e)&&l++;if(o=0<l,l=i.groupOptions.groupingView,e=t.from.call(n,i.rows),u.skipSortByX)for(r=0;r<l.groupField.length;r++)e.orderBy(l.groupField[r],null!=p&&p.groupingView&&null!=p.groupingView.groupOrder&&"desc"===p.groupingView.groupOrder[r]?"d":"a","text","");if(u.data=c,d.call(s,b.extend(!0,{datastr:b.extend(e.select(),o?{userdata:i.summary}:{}),datatype:"jsonstring",footerrow:o,userDataOnFooter:o,colModel:i.colModel,additionalProperties:i.additionalProperties,pivotOptions:i.options,viewrecords:!0,sortname:u.xDimension[0].dataName},i.groupOptions,p||{})),a.length)for(r=0;r<a.length;r++)a[r]&&a[r].groupHeaders.length&&d.setGroupHeaders.call(s,a[r]);u.frozenStaticCols&&d.setFrozenColumns.call(s)}var n=this,s=b(n),d=b.fn.jqGrid;"string"==typeof c?b.ajax(b.extend({url:c,dataType:"json",success:function(e){c=t.getAccessor(e,i&&i.reader?i.reader:"rows"),r()}},i||{})):r()})}});var tb=function(){var e=b.makeArray(arguments);return e[0]="subGrid"+e[0].charAt(0).toUpperCase()+e[0].substring(1),e.unshift(""),e.unshift(""),e.unshift(this.p),t.feedback.apply(this,e)},lb=function(t,r){return this.each(function(){if(this.grid&&null!=t&&!0===this.p.subGrid){var e=b(this).jqGrid("getInd",t,!0);b(e).find(">td."+r).trigger("click")}})};t.extend({setSubGrid:function(){return this.each(function(){var e=this.p,r=e.subGridModel[0];if(e.subGridOptions=b.extend({expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},e.subGridOptions||{}),e.colNames.unshift(""),e.colModel.unshift({name:"subgrid",width:t.cell_width?e.subGridWidth+e.cellLayout:e.subGridWidth,labelClasses:"jqgh_subgrid",sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0,frozen:!0}),r)for(r.align=b.extend([],r.align||[]),e=0;e<r.name.length;e++)r.align[e]=r.align[e]||"left"})},addSubGridCell:function(e,r,i,a){var o=this[0],l=o.p.subGridOptions;return i=!b.isFunction(l.hasSubgrid)||l.hasSubgrid.call(o,{rowid:i,iRow:r,iCol:e,data:a}),null==o||null==o.p||null==l?"":"<td role='gridcell' class='"+C.getGuiStyles.call(this,"subgrid.tdStart",i?"ui-sgcollapsed sgcollapsed":"")+"' "+o.formatCol(e,r)+">"+(i?"<div class='"+C.getGuiStyles.call(this,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+C.getGuiStyles.call(this,"subgrid.button","sgbutton")+"'><span class='"+t.mergeCssClasses(l.commonIconClass,l.plusicon)+"'></span></a></div>":"&nbsp;")+"</td>"},addSubGrid:function(x,o){return this.each(function(){var e,r,n=this,c=n.p,u=c.subGridModel[0],s=function(e,t){return C.getGuiStyles.call(n,"subgrid."+e,t||"")},d=s("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+c.direction),p=s("rowSubTable","ui-subtblcell"),h=s("row","ui-subgrid ui-row-"+c.direction),f=s("tdWithIcon","subgrid-cell"),g=s("tdData","subgrid-data"),m=function(e,t,r){r=u.align[r],t=b("<td"+(r?" style='text-align:"+r+";'":"")+"></td>").html(t),e.append(t)},v=function(e,i){var a=c.xmlReader.subgrid;b(a.root+" "+a.row,e).each(function(){var e,t,r=b("<tr class='"+p+"'></tr>");if(!0===a.repeatitems)b(a.cell,this).each(function(e){m(r,b(this).text()||"&#160;",e)});else if(e=u.mapping||u.name)for(t=0;t<e.length;t++)m(r,b(e[t],this).text()||"&#160;",t);i.append(r)})},w=function(e,r){var i,a,o,l,n,s=c.jsonReader.subgrid,d=t.getAccessor(e,s.root);if(null!=d)for(a=0;a<d.length;a++){if(n=d[a],i=b("<tr class='"+p+"'></tr>"),!0===s.repeatitems)for(s.cell&&(n=n[s.cell]),o=0;o<n.length;o++)m(i,n[o]||"&#160;",o);else if((l=u.mapping||u.name).length)for(o=0;o<l.length;o++)m(i,n[l[o]]||"&#160;",o);r.append(i)}},y=function(e,t,r){var i,a;i=s("legacyTable","ui-jqgrid-legacy-subgrid"+(!0===c.altRows&&b(n).jqGrid("isBootstrapGuiStyle")?" table-striped":""));var o=b("<table"+(i?" style='width:1px' role='presentation' class='"+i+"'":"")+"><thead></thead><tbody></tbody></table>"),l=b("<tr></tr>");for(n.grid.endReq.call(n),a=0;a<u.name.length;a++)i=b("<th class='"+d+"'></th>").html(u.name[a]).width(u.width[a]),l.append(i);return l.appendTo(o[0].tHead),r(e,b(o[0].tBodies[0])),b("#"+H(c.id+"_"+t)).append(o),!1},i=function(){var e=b(this).parent("tr")[0],r=e.nextSibling,i=e.id,a=c.id+"_"+i,o=function(e){return t.mergeCssClasses(c.subGridOptions.commonIconClass,c.subGridOptions[e])},l=1;if(b.each(c.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||l++}),b(this).hasClass("sgcollapsed")){if(!0===c.subGridOptions.reloadOnExpand||!1===c.subGridOptions.reloadOnExpand&&!b(r).hasClass("ui-subgrid")){if(r=1<=x?"<td colspan='"+x+"'>&#160;</td>":"",!tb.call(n,"beforeExpand",a,i))return;b(e).after("<tr role='row' class='"+h+"'>"+r+"<td class='"+f+"'><span class='"+o("openicon")+"'></span></td><td colspan='"+parseInt(c.colNames.length-l,10)+"' class='"+g+"'><div id='"+a+"' class='tablediv'></div></td></tr>"),b(n).triggerHandler("jqGridSubGridRowExpanded",[a,i]),b.isFunction(c.subGridRowExpanded)?c.subGridRowExpanded.call(n,a,i):function(e){var r,i,a=b(e).attr("id"),o={nd_:(new Date).getTime()};if(o[c.prmNames.subgridid]=a,!u)return;if(u.params)for(i=0;i<u.params.length;i++)void 0!==(r=c.iColByName[u.params[i]])&&(o[c.colModel[r].name]=b(e.cells[r]).text().replace(/\&#160\;/gi,""));if(!n.grid.hDiv.loading)switch(n.grid.beginReq.call(n),c.subgridtype||(c.subgridtype=c.datatype),b.isFunction(c.subgridtype)?c.subgridtype.call(n,o):c.subgridtype=c.subgridtype.toLowerCase(),c.subgridtype){case"xml":case"json":b.ajax(b.extend({type:c.mtype,url:b.isFunction(c.subGridUrl)?c.subGridUrl.call(n,o):c.subGridUrl,dataType:c.subgridtype,context:a,data:t.serializeFeedback.call(n,c.serializeSubGridData,"jqGridSerializeSubGridData",o),success:function(e){y(e,this,"xml"===c.subgridtype?v:w)},error:function(e,t,r){var i=void 0===c.loadSubgridError?c.loadError:c.loadSubgridError;n.grid.endReq.call(n),b.isFunction(i)&&i.call(n,e,t,r),c.subGridOptions.noEmptySubgridOnError||y(null,this,"xml"===c.subgridtype?v:w)}},t.ajaxOptions,c.ajaxSubgridOptions||{}))}}(e)}else b(r).show();b(this).html("<div class='"+C.getGuiStyles.call(n,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+C.getGuiStyles.call(n,"subgrid.button","sgbutton")+"'><span class='"+o("minusicon")+"'></span></a></div>").removeClass("sgcollapsed").addClass("sgexpanded"),c.subGridOptions.selectOnExpand&&b(n).jqGrid("setSelection",i)}else if(b(this).hasClass("sgexpanded")){if(!tb.call(n,"beforeCollapse",a,i))return;!0===c.subGridOptions.reloadOnExpand?b(r).remove(".ui-subgrid"):b(r).hasClass("ui-subgrid")&&b(r).hide(),b(this).html("<div class='"+C.getGuiStyles.call(n,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+C.getGuiStyles.call(n,"subgrid.button","sgbutton")+"'><span class='"+o("plusicon")+"'></span></a></div>").removeClass("sgexpanded").addClass("sgcollapsed"),c.subGridOptions.selectOnCollapse&&b(n).jqGrid("setSelection",i)}return!1},a=1;if(n.grid){for(e=n.rows.length,void 0!==o&&0<o&&(e=(a=o)+1);a<e;)r=n.rows[a],b(r).hasClass("jqgrow")&&((r=b(r.cells[x])).hasClass("ui-sgcollapsed")&&(c.scroll&&r.off("click"),r.on("click",i))),a++;!0===c.subGridOptions.expandOnLoad&&b(n.rows).filter(".jqgrow").each(function(e,t){b(t.cells[0]).click()}),n.subGridXml=function(e,t){return y(e,t,v)},n.subGridJson=function(e,t){return y(e,t,w)}}})},expandSubGridRow:function(e){return lb.call(this,e,"sgcollapsed")},collapseSubGridRow:function(e){return lb.call(this,e,"sgexpanded")},toggleSubGridRow:function(e){return lb.call(this,e,"ui-sgcollapsed")}}),window.tableToGrid=function(e,c){b(e).each(function(){var e,t,r,a,i=b(this),o=[],l=[],n=[],s=[],d=[];if(!this.grid){for(i.width("99%"),e=i.width(),t=b("tr td:first-child input[type=checkbox]:first",i),r=b("tr td:first-child input[type=radio]:first",i),r=!(t=0<t.length)&&0<r.length,a=t||r,b("th",i).each(function(){0===o.length&&a?(o.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),l.push("__selection__")):(o.push({name:b(this).attr("id")||b.trim(b.jgrid.stripHtml(b(this).html())).split(" ").join("_"),index:b(this).attr("id")||b.trim(b.jgrid.stripHtml(b(this).html())).split(" ").join("_"),width:b(this).width()||150}),l.push(b(this).html()))}),b("tbody > tr",i).each(function(){var r={},i=0;b("td",b(this)).each(function(){if(0===i&&a){var e=b("input",b(this)),t=e.attr("value");s.push(t||n.length),e.is(":checked")&&d.push(t),r[o[i].name]=e.attr("value")}else r[o[i].name]=b(this).html();i++}),0<i&&n.push(r)}),i.empty(),i.jqGrid(b.extend({datatype:"local",width:e,colNames:l,colModel:o,multiselect:t},c||{})),e=0;e<n.length;e++)r=null,0<s.length&&(r=s[e])&&r.replace&&(r=encodeURIComponent(r).replace(/[.\-%]/g,"_")),null===r&&(r=b.jgrid.randId()),i.jqGrid("addRowData",r,n[e]);for(e=0;e<d.length;e++)i.jqGrid("setSelection",d[e])}})};var Ea=function(){var e=b.makeArray(arguments);return e[0]="treeGrid"+e[0].charAt(0).toUpperCase()+e[0].substring(1),e.unshift(""),e.unshift(""),e.unshift(this.p),t.feedback.apply(this,e)};t.extend({setTreeNode:function(){return this.each(function(){var o=b(this),l=this.p;if(this.grid&&l.treeGrid){var n=l.treeReader.expanded_field,s=l.treeReader.leaf_field;o.off("jqGridBeforeSelectRow.setTreeNode"),o.on("jqGridBeforeSelectRow.setTreeNode",function(e,r,t){if(null!=t){var i=(t=(e=b(t.target)).closest("tr.jqgrow>td")).parent(),a=function(){var e=l.data[l._index[Aa(l.idPrefix,r)]],t=e[n]?"collapse":"expand";e[s]||(C[t+"Row"].call(o,e,i),C[t+"Node"].call(o,e,i))};return e.is("div.treeclick")?a():l.ExpandColClick&&0<t.length&&0<e.closest("span.cell-wrapper",t).length&&a(),!0}})}})},setTreeGrid:function(){return this.each(function(){var e,t,r,i=this.p,a=[],o=["leaf_field","expanded_field","loaded"];if(i.treeGrid){for(t in i.treedatatype||b.extend(this.p,{treedatatype:i.datatype}),i.subGrid=!1,i.altRows=!1,i.pgbuttons=!1,i.pginput=!1,i.gridview=!0,null===i.rowTotal&&(i.rowNum=i.maxRowNum),i.rowList=[],i.treeIcons.plus="rtl"===i.direction?i.treeIcons.plusRtl:i.treeIcons.plusLtr,"nested"===i.treeGridModel?i.treeReader=b.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},i.treeReader):"adjacency"===i.treeGridModel&&(i.treeReader=b.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},i.treeReader)),i.colModel)if(i.colModel.hasOwnProperty(t))for(r in e=i.colModel[t].name,i.treeReader)i.treeReader.hasOwnProperty(r)&&i.treeReader[r]===e&&a.push(e);b.each(i.treeReader,function(e){var t=String(this);t&&-1===b.inArray(t,a)&&(0<=b.inArray(e,o)?i.additionalProperties.push({name:t,search:!1,convert:function(e){return!0===e||"true"===String(e).toLowerCase()||"1"===String(e)||e}}):i.additionalProperties.push(t))})}})},expandRow:function(o){this.each(function(){var t=b(this),r=this.p;if(this.grid&&r.treeGrid){var i=r.treeReader.expanded_field,e=o[r.localReader.id];if(Ea.call(this,"beforeExpandRow",{rowid:e,item:o})){var a=C.getNodeChildren.call(t,o);b(a).each(function(){var e=r.idPrefix+pa(this,r.localReader.id);b(C.getGridRowById.call(t,e)).css("display",""),this[i]&&C.expandRow.call(t,this)}),Ea.call(this,"afterExpandRow",{rowid:e,item:o})}}})},collapseRow:function(o){this.each(function(){var t=b(this),r=this.p;if(this.grid&&r.treeGrid){var i=r.treeReader.expanded_field,e=o[r.localReader.id];if(Ea.call(this,"beforeCollapseRow",{rowid:e,item:o})){var a=C.getNodeChildren.call(t,o);b(a).each(function(){var e=r.idPrefix+pa(this,r.localReader.id);b(C.getGridRowById.call(t,e)).css("display","none"),this[i]&&C.collapseRow.call(t,this)}),Ea.call(this,"afterCollapseRow",{rowid:e,item:o})}}})},getRootNodes:function(){var i=[];return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var t=e.treeReader.level_field;b(e.data).each(function(){parseInt(this[t],10)===parseInt(e.tree_root_level,10)&&i.push(this)});break;case"adjacency":var r=e.treeReader.parent_id_field;b(e.data).each(function(){null!==this[r]&&"null"!==String(this[r]).toLowerCase()||i.push(this)})}}),i},getNodeDepth:function(t){var r=null;return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":r=parseInt(t[e.treeReader.level_field],10)-parseInt(e.tree_root_level,10);break;case"adjacency":r=C.getNodeAncestors.call(b(this),t).length}}),r},getNodeParent:function(e){if(!(t=this[0])||!t.grid||null==t.p||!t.p.treeGrid||null==e)return null;var t,r=(t=t.p).treeReader,i=e[r.parent_id_field];if("nested"===t.treeGridModel){var a=null,o=r.left_field,l=r.right_field,n=r.level_field,s=parseInt(e[o],10),d=parseInt(e[l],10),c=parseInt(e[n],10);return b(t.data).each(function(){if(parseInt(this[n],10)===c-1&&parseInt(this[o],10)<s&&parseInt(this[l],10)>d)return a=this,!1}),a}return null===i||"null"===i?null:void 0!==(e=t._index[i])?t.data[e]:null},getNodeChildren:function(d){var c=[];return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var t=e.treeReader.left_field,r=e.treeReader.right_field,i=e.treeReader.level_field,a=parseInt(d[t],10),o=parseInt(d[r],10),l=parseInt(d[i],10);b(e.data).each(function(){parseInt(this[i],10)===l+1&&parseInt(this[t],10)>a&&parseInt(this[r],10)<o&&c.push(this)});break;case"adjacency":var n=e.treeReader.parent_id_field,s=e.localReader.id;b(e.data).each(function(){String(this[n])===String(d[s])&&c.push(this)})}}),c},getFullTreeNode:function(c){var u=[];return this.each(function(){var t,e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var r=e.treeReader.left_field,i=e.treeReader.right_field,a=e.treeReader.level_field,o=parseInt(c[r],10),l=parseInt(c[i],10),n=parseInt(c[a],10);b(e.data).each(function(){parseInt(this[a],10)>=n&&parseInt(this[r],10)>=o&&parseInt(this[r],10)<=l&&u.push(this)});break;case"adjacency":if(c){u.push(c);var s=e.treeReader.parent_id_field,d=e.localReader.id;b(e.data).each(function(){var e;for(t=u.length,e=0;e<t;e++)if(String(u[e][d])===String(this[s])){u.push(this);break}})}}}),u},getNodeAncestors:function(i){var a=[];return this.each(function(){var e=b(this),t=C.getNodeParent;if(this.grid&&this.p.treeGrid)for(var r=t.call(e,i);r;)a.push(r),r=t.call(e,r)}),a},isVisibleNode:function(i){var a=!0;return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid){var t=C.getNodeAncestors.call(b(this),i),r=e.treeReader.expanded_field;b(t).each(function(){if(!(a=a&&this[r]))return!1})}}),a},isNodeLoaded:function(r){var i;return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid){var t=e.treeReader.leaf_field;e=e.treeReader.loaded;i=void 0!==r&&(void 0!==r[e]?r[e]:!!(r[t]||0<C.getNodeChildren.call(b(this),r).length))}}),i},expandNode:function(c){return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid){var t=e.treeReader.expanded_field,r=e.treeReader.parent_id_field,i=e.treeReader.loaded,a=e.treeReader.level_field,o=e.treeReader.left_field,l=e.treeReader.right_field;if(!c[t]){var n=pa(c,e.localReader.id);if(Ea.call(this,"beforeExpandNode",{rowid:n,item:c})){var s=b("#"+e.idPrefix+H(n),this.grid.bDiv)[0],d=e._index[n];"local"===e.treedatatype||C.isNodeLoaded.call(b(this),e.data[d])?(c[t]=!0,b("div.treeclick",s).removeClass(e.treeIcons.plus+" tree-plus").addClass(e.treeIcons.commonIconClass).addClass(e.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(c[t]=!0,b("div.treeclick",s).removeClass(e.treeIcons.plus+" tree-plus").addClass(e.treeIcons.commonIconClass).addClass(e.treeIcons.minus+" tree-minus"),e.treeANode=s.rowIndex,e.datatype=e.treedatatype,C.setGridParam.call(b(this),{postData:"nested"===e.treeGridModel?{nodeid:n,n_level:c[a],n_left:c[o],n_right:c[l]}:{nodeid:n,n_level:c[a],parentid:c[r]}}),b(this).trigger("reloadGrid"),c[i]=!0,C.setGridParam.call(b(this),{postData:"nested"===e.treeGridModel?{nodeid:"",n_level:"",n_left:"",n_right:""}:{nodeid:"",n_level:"",parentid:""}})),Ea.call(this,"afterExpandNode",{rowid:n,item:c})}}}})},collapseNode:function(i){return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid){var t=e.treeReader.expanded_field;if(i[t]){var r=pa(i,e.localReader.id);Ea.call(this,"beforeCollapseNode",{rowid:r,item:i})&&(i[t]=!1,b("#"+e.idPrefix+H(r),this.grid.bDiv).find("div.treeclick").removeClass(e.treeIcons.minus+" tree-minus").addClass(e.treeIcons.commonIconClass).addClass(e.treeIcons.plus+" tree-plus"),(!0===e.unloadNodeOnCollapse||b.isFunction(e.unloadNodeOnCollapse)&&e.unloadNodeOnCollapse.call(this,i))&&(i[e.treeReader.loaded]=!1,b(this).jqGrid("delTreeNode",r,!0)),Ea.call(this,"afterCollapseNode",{rowid:r,item:i}))}}})},SortTree:function(d,c,u,p){return this.each(function(){var r=this,i=r.p,a=b(r);if(r.grid&&i.treeGrid){var e,o,l,n=[];e=C.getRootNodes.call(a),(e=t.from.call(r,e)).orderBy(d,c,u,p);var s=e.select();for(e=0,o=s.length;e<o;e++)l=s[e],n.push(l),C.collectChildrenSortTree.call(a,n,l,d,c,u,p);b.each(n,function(e){var t=pa(this,i.localReader.id);b(r.rows[e]).after(a.find(">tbody>tr#"+H(t)))})}})},collectChildrenSortTree:function(l,n,s,d,c,u){return this.each(function(){var e=b(this);if(this.grid&&this.p.treeGrid){var r,i,a;r=C.getNodeChildren.call(e,n),(r=t.from.call(this,r)).orderBy(s,d,c,u);var o=r.select();for(r=0,i=o.length;r<i;r++)a=o[r],l.push(a),C.collectChildrenSortTree.call(e,l,a,s,d,c,u)}})},setTreeRow:function(e,t){var r=!1;return this.each(function(){this.grid&&this.p.treeGrid&&(r=C.setRowData.call(b(this),e,t))}),r},delTreeNode:function(u,p){return this.each(function(){var e,r,i,a,o=this.p;i=o.localReader.id;var l,n=b(this),s=o.treeReader.left_field,d=o.treeReader.right_field;if(this.grid&&o.treeGrid&&void 0!==(l=o._index[u])){r=(e=parseInt(o.data[l][d],10))-parseInt(o.data[l][s],10)+1;var c=C.getFullTreeNode.call(n,o.data[l]);if(0<c.length)for(l=0;l<c.length;l++)p&&u===c[l][i]||C.delRowData.call(n,c[l][i]);if("nested"===o.treeGridModel){if((i=t.from.call(this,o.data).greater(s,e,{stype:"integer"}).select()).length)for(a in i)i.hasOwnProperty(a)&&(i[a][s]=parseInt(i[a][s],10)-r);if((i=t.from.call(this,o.data).greater(d,e,{stype:"integer"}).select()).length)for(a in i)i.hasOwnProperty(a)&&(i[a][d]=parseInt(i[a][d],10)-r)}}})},addChildNode:function(e,r,i,a){var o=b(this),l=o[0],n=l.p,s=C.getInd;if(i){var d,c,u,p,h;d=0;var f,g,m=r,v=n.treeReader.expanded_field;g=n.treeReader.leaf_field;var w=n.treeReader.level_field,y=n.treeReader.parent_id_field,x=n.treeReader.left_field,j=n.treeReader.right_field,S=n.treeReader.loaded;if(void 0===a&&(a=!1),null==e){if(0<=(h=n.data.length-1))for(;0<=h;)d=Math.max(d,parseInt(n.data[h][n.localReader.id],10)),h--;e=d+1}var q,D=s.call(o,r);if(f=!1,null==r||""===r)m=r=null,d="last",p=n.tree_root_level,h=n.data.length+1;else{d="after",c=n._index[r],r=(u=n.data[c])[n.localReader.id],h=s.call(o,r),p=parseInt(u[w],10)+1;var R,G,F,k=C.getFullTreeNode.call(o,u);if(k.length)for(R=0;R<k.length;R++)F=k[R][n.localReader.id],h<(G=s.call(o,F))&&(h=G,m=F);h++,u[g]&&(f=!0,u[v]=!0,b(l.rows[D]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(n.treeIcons.leaf+" tree-leaf").addClass(n.treeIcons.commonIconClass).addClass(n.treeIcons.minus+" tree-minus"),n.data[c][g]=!1,u[S]=!0)}if(s=h+1,void 0===i[v]&&(i[v]=!1),void 0===i[S]&&(i[S]=!1),i[w]=p,void 0===i[g]&&(i[g]=!0),"adjacency"===n.treeGridModel&&(i[y]=r),"nested"===n.treeGridModel)if(null!==r){if(g=parseInt(u[j],10),(w=(n=(n=t.from.call(l,n.data)).greaterOrEquals(j,g,{stype:"integer"})).select()).length)for(q in w)w.hasOwnProperty(q)&&(w[q][x]=w[q][x]>g?parseInt(w[q][x],10)+2:w[q][x],w[q][j]=w[q][j]>=g?parseInt(w[q][j],10)+2:w[q][j]);i[x]=g,i[j]=g+1}else{if(g=parseInt(C.getCol.call(o,j,!1,"max"),10),(w=t.from.call(l,n.data).greater(x,g,{stype:"integer"}).select()).length)for(q in w)w.hasOwnProperty(q)&&(w[q][x]=parseInt(w[q][x],10)+2);if((w=t.from.call(l,n.data).greater(j,g,{stype:"integer"}).select()).length)for(q in w)w.hasOwnProperty(q)&&(w[q][j]=parseInt(w[q][j],10)+2);i[x]=g+1,i[j]=g+2}(null===r||C.isNodeLoaded.call(o,u)||f)&&(C.addRowData.call(o,e,i,d,m),C.setTreeNode.call(o,h,s)),u&&!u[v]&&a&&b(l.rows[D]).find("div.treeclick").click()}}});var cb="mousedown",Sa="mousemove",Ta="mouseup",ub=function(e){var t=e.originalEvent.targetTouches;return t?{x:(t=t[0]).pageX,y:t.pageY}:{x:e.pageX,y:e.pageY}},Ua={drag:function(e){var t=(a=e.data).e,r=a.dnr,i=a.ar,a=a.dnrAr;return e=ub(e),"move"===r.k?t.css({left:r.X+e.x-r.pX,top:r.Y+e.y-r.pY}):(t.css({width:Math.max(e.x-r.pX+r.W,0),height:Math.max(e.y-r.pY+r.H,0)}),a&&i.css({width:Math.max(e.x-a.pX+a.W,0),height:Math.max(e.y-a.pY+a.H,0)})),!1},stop:function(){b(document).off(Sa,Ua.drag).off(Ta,Ua.stop)}},vb=function(e,t,r,n){return e.each(function(){(t=t?b(t,e):e).on(cb,{e:e,k:r},function(e){var t,r,i=e.data,a={},o=function(e,t){return parseInt(e.css(t),10)||!1},l=ub(e);if(!b(e.target).hasClass("ui-jqdialog-titlebar-close")&&!b(e.target).parent().hasClass("ui-jqdialog-titlebar-close")){if(e=i.e,r=!!n&&b(n),"relative"!==e.css("position"))try{e.position(a)}catch(e){}if(t={X:a.left||o(e,"left")||0,Y:a.top||o(e,"top")||0,W:o(e,"width")||e[0].scrollWidth||0,H:o(e,"height")||e[0].scrollHeight||0,pX:l.x,pY:l.y,k:i.k},a=!(!r||"move"===i.k)&&{X:a.left||o(r,"left")||0,Y:a.top||o(r,"top")||0,W:r[0].offsetWidth||o(r,"width")||0,H:r[0].offsetHeight||o(r,"height")||0,pX:l.x,pY:l.y,k:i.k},0<(i=e.find("input.hasDatepicker")).length)try{i.datepicker("hide")}catch(e){}return e={e:e,dnr:t,ar:r,dnrAr:a},b(document).on(Sa,e,Ua.drag),b(document).on(Ta,e,Ua.stop),!1}})})};window.PointerEvent?(cb+=".jqGrid pointerdown.jqGrid",Sa+=".jqGrid pointermove.jqGrid",Ta+=".jqGrid pointerup.jqGrid"):window.MSPointerEvent?(cb+=".jqGrid mspointerdown.jqGrid",Sa+=".jqGrid mspointermove.jqGrid",Ta+=".jqGrid mspointerup"):(cb+=".jqGrid touchstart.jqGrid",Sa+=".jqGrid touchmove.jqGrid",Ta+=".jqGrid touchend.jqGrid"),b.jqDnR=Ua,b.fn.jqDrag=function(e){return vb(this,e,"move")},b.fn.jqResize=function(e,t){return vb(this,e,"resize",t)};var Va=0,ya,Ga=[],mb=function(e){try{b(":input:visible",e.w).first().focus()}catch(e){}},Eb=function(e){var t=ya[Ga[Ga.length-1]],r=!b(e.target).parents(".jqmID"+t.s)[0],i=b(e.target).offset(),a=void 0!==e.pageX?e.pageX:i.left,o=void 0!==e.pageY?e.pageY:i.top;i=function(){var r=!1;return b(".jqmID"+t.s).each(function(){var e=b(this),t=e.offset();if(t.top<=o&&o<=t.top+e.height()&&t.left<=a&&a<=t.left+e.width())return!(r=!0)}),r};return!("mousedown"===e.type||!i())||("mousedown"===e.type&&r&&(i()&&(r=!1),r&&!b(e.target).is(":input")&&mb(t)),!r)},wb=function(e){b(document)[e]("keypress keydown mousedown",Eb)},xb=function(e,t,r){return e.each(function(){var e=this._jqm;b(t).each(function(){this[r]||(this[r]=[],b(this).click(function(){var e,t,r,i=["jqmShow","jqmHide"];for(e=0;e<i.length;e++)for(r in this[t=i[e]])this[t].hasOwnProperty(r)&&ya[this[t][r]]&&ya[this[t][r]].w[t](this);return!1})),this[r].push(e)})})};b.fn.jqm=function(e){var t={overlay:50,closeoverlay:!1,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,ajaxText:"",target:!1,modal:!1,toTop:!1,onShow:!1,onHide:!1,onLoad:!1};return this.each(function(){if(this._jqm)return ya[this._jqm].c=b.extend({},ya[this._jqm].c,e),ya[this._jqm].c;Va++,this._jqm=Va,ya[Va]={c:b.extend(t,b.jqm.params,e),a:!1,w:b(this).addClass("jqmID"+Va),s:Va},t.trigger&&b(this).jqmAddTrigger(t.trigger)})},b.fn.jqmAddClose=function(e){return xb(this,e,"jqmHide")},b.fn.jqmAddTrigger=function(e){return xb(this,e,"jqmShow")},b.fn.jqmShow=function(e){return this.each(function(){b.jqm.open(this._jqm,e)})},b.fn.jqmHide=function(e){return this.each(function(){b.jqm.close(this._jqm,e)})},b.jqm={hash:{},open:function(e,t){var r,i,a=ya[e],o=a.c;r=a.w.parent().offset();var l,n="."+o.closeClass;return i=0<(i=parseInt(a.w.css("z-index"),10))?i:3e3,r=b("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":i-1,opacity:o.overlay/100}),a.a||(a.t=t,a.a=!0,a.w.css("z-index",i),b(a.w[0].ownerDocument).data("ui-dialog-overlays")&&a.w.addClass("ui-dialog"),o.modal?(Ga[0]||setTimeout(function(){wb("bind")},1),Ga.push(e)):0<o.overlay?o.closeoverlay&&a.w.jqmAddClose(r):r=!1,a.o=!!r&&r.addClass(o.overlayClass).prependTo("body"),o.ajax?(r=o.target||a.w,i=o.ajax,r="string"==typeof r?b(r,a.w):b(r),i="@"===i.substr(0,1)?b(t).attr(i.substring(1)):i,r.html(o.ajaxText).load(i,function(){o.onLoad&&o.onLoad.call(this,a),n&&a.w.jqmAddClose(b(n,a.w)),mb(a)})):n&&a.w.jqmAddClose(b(n,a.w)),o.toTop&&a.o&&(r=a.w.parent().offset(),i=parseFloat(a.w.css("left")||0),l=parseFloat(a.w.css("top")||0),a.w.before('<span id="jqmP'+a.w[0]._jqm+'"></span>').insertAfter(a.o),a.w.css({top:r.top+l,left:r.left+i})),o.onShow?o.onShow(a):a.w.show(),mb(a)),!1},close:function(e){return(e=ya[e]).a&&(e.a=!1,Ga[0]&&(Ga.pop(),Ga[0]||wb("unbind")),e.c.toTop&&e.o&&b("#jqmP"+e.w[0]._jqm).after(e.w).remove(),e.c.onHide?e.c.onHide(e):(e.w.hide(),e.o&&e.o.remove())),!1},params:{}},ya=b.jqm.hash,b.fmatter=b.fmatter||{};var V=b.fmatter,Wa=function(e,t){var r=e.formatoptions||{};return r.hasOwnProperty(t)?r[t]:(e.editoptions||{})[t]},ta=function(e){return String(e).replace(/\'/g,"&#39;")},db=function(e){var r,i=!1!==(a=e.colModel||e.cm).title?" title='"+ta(e.colName||a.name)+"'":"";e=Wa(a,"checkedClass"),r=Wa(a,"uncheckedClass");var a,o="string"==typeof(l=Wa(a,"value"))&&l.split(":")[0]||"Yes",l="string"==typeof l&&l.split(":")[1]||"No",n=function(e){return"<i class='"+ta(e)+"'"+i+"></i>"};return void 0===(a=Wa(a,"disabled"))&&(a=t.formatter.checkbox.disabled),!0===a&&C.isInCommonIconClass.call(this,"fa")?(a=n(e=e||"fa fa-check-square-o fa-lg"),r=n(r||"fa fa-square-o fa-lg")):!0===a&&C.isInCommonIconClass.call(this,"glyphicon")?(a=n(e=e||"glyphicon glyphicon-check"),r=n(r||"glyphicon glyphicon-unchecked")):(a="<input type='checkbox' checked='checked'"+(i+=!(e="")===a?" disabled='disabled'":"")+" />",r="<input type='checkbox'"+i+" />"),{checkedClasses:e,checked:a,unchecked:r,yes:o,no:l}},yb={1:1,x:1,true:1,yes:1,on:1},Fb={0:1,false:1,no:1,off:1};b.extend(!0,t,{formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s\-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:!0,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"},cmTemplate:{integerStr:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:"eq ne lt le gt ge".split(" ")}},integer:{formatter:"integer",align:"right",sorttype:"integer",convertOnSave:function(e){return e=e.newValue,isNaN(e)?e:parseInt(e,10)},searchoptions:{sopt:"eq ne lt le gt ge".split(" ")}},numberStr:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:"eq ne lt le gt ge".split(" ")}},number:{formatter:"number",align:"right",sorttype:"number",convertOnSave:function(e){return e=e.newValue,isNaN(e)?e:parseFloat(e)},searchoptions:{sopt:"eq ne lt le gt ge".split(" ")}},booleanCheckbox:{align:"center",formatter:"checkbox",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(e){var t=e.newValue;e=db.call(this,e);var r=String(t).toLowerCase();return yb[r]||r===e.yes.toLowerCase()?t=!0:(Fb[r]||r===e.no.toLowerCase())&&(t=!1),t},stype:"select",searchoptions:{sopt:["eq","ne"],value:"true:Yes;false:No",noFilterText:"Any"}},actions:function(){return{formatter:"actions",width:(null!=this.p&&(C.isInCommonIconClass.call(this,"fa")||C.isInCommonIconClass.call(this,"glyphicon"))?b(this).jqGrid("isBootstrapGuiStyle")?45:39:40)+(t.cellWidth()?5:0),align:"center",label:"",autoResizable:!1,frozen:!0,fixed:!0,hidedlg:!0,resizable:!1,sortable:!1,search:!1,editable:!1,viewable:!1}}}}),t.cmTemplate.booleanCheckboxFa=t.cmTemplate.booleanCheckbox,b.extend(V,{isObject:function(e){return e&&("object"==typeof e||b.isFunction(e))||!1},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isValue:function(e){return this.isObject(e)||"string"==typeof e||this.isNumber(e)||"boolean"==typeof e},isEmpty:function(e){return("string"==typeof e||!this.isValue(e))&&(!this.isValue(e)||""===(e=b.trim(e).replace(/&nbsp;/gi,"").replace(/&#160;/gi,"")))},NumberFormat:function(e,t){if((l=V.isNumber)(e)||(e*=1),l(e)){var r=e<0,i=String(e),a=t.decimalSeparator||".";if(l(t.decimalPlaces)){var o=t.decimalPlaces,l=(i=Math.pow(10,o),(i=String(Math.round(e*i)/i)).lastIndexOf("."));if(0<o)for(l<0?l=(i+=a).length-1:"."!==a&&(i=i.replace(".",a));i.length-1-l<o;)i+="0"}if(t.thousandsSeparator){o=t.thousandsSeparator,l=-1<(l=i.lastIndexOf(a))?l:i.length,a=void 0===t.decimalSeparator?"":i.substring(l);var n,s=-1;for(n=l;0<n;n--)0==++s%3&&n!==l&&(!r||1<n)&&(a=o+a),a=i.charAt(n-1)+a;i=a}return i}return e}});var M=function(e,t,r,i,a){var o=t;r=b.extend({},ia.call(b(this),"formatter"),r);try{o=b.fn.fmatter[e].call(this,t,r,i,a)}catch(e){}return o};b.fn.fmatter=M,M.getCellBuilder=function(e,t,r){return e=null!=b.fn.fmatter[e]?b.fn.fmatter[e].getCellBuilder:null,b.isFunction(e)?e.call(this,b.extend({},ia.call(b(this),"formatter"),t),r):null},M.defaultFormat=function(e,t){return V.isValue(e)&&""!==e?e:t.defaultValue||"&#160;"};var za=M.defaultFormat,zb=function(e,t,r){return(void 0===e||V.isEmpty(e))&&(e=Wa(r,"defaultValue")),e=String(e).toLowerCase(),yb[e]||e===t.yes.toLowerCase()?t.checked:t.unchecked};M.email=function(e,t){return V.isEmpty(e)?za(e,t):"<a href='mailto:"+ta(e)+"'>"+e+"</a>"},M.checkbox=function(e,t){var r=db.call(this,t);return zb(e,r,t.colModel)},M.checkbox.getCellBuilder=function(e){var t,r=e.colModel;return e.colName=e.colName||this.p.colNames[e.pos],t=db.call(this,e),function(e){return zb(e,t,r)}},M.checkbox.unformat=function(e,r,i){return e=db.call(this,r),i=b(i),(e.checkedClasses?t.hasAllClasses(i.children("i"),e.checkedClasses):i.children("input").is(":checked"))?e.yes:e.no},M.checkboxFontAwesome4=M.checkbox,M.checkboxFontAwesome4.getCellBuilder=M.checkbox.getCellBuilder,M.checkboxFontAwesome4.unformat=M.checkbox.unformat,M.link=function(e,t){var r=t.colModel,i="",a={target:t.target};return null!=r&&(a=b.extend({},a,r.formatoptions||{})),a.target&&(i="target="+a.target),V.isEmpty(e)?za(e,a):"<a "+i+" href='"+ta(e)+"'>"+e+"</a>"},M.showlink=function(t,r,i){var e,a,o=this,l=r.colModel,n={baseLinkUrl:r.baseLinkUrl,showAction:r.showAction,addParam:r.addParam||"",target:r.target,idName:r.idName,hrefDefaultValue:"#"},s="",d=function(e){return b.isFunction(e)?e.call(o,{cellValue:t,rowid:r.rowId,rowData:i,options:n}):e||""};return null!=l&&(n=b.extend({},n,l.formatoptions||{})),n.target&&(s="target="+d(n.target)),l=d(n.baseLinkUrl)+d(n.showAction),e=n.idName?encodeURIComponent(d(n.idName))+"="+encodeURIComponent(d(n.rowId)||r.rowId):"","object"==typeof(a=d(n.addParam))&&null!==a&&(a=(""!==e?"&":"")+b.param(a)),""===(l+=e||a?"?"+e+a:"")&&(l=d(n.hrefDefaultValue)),"string"==typeof t||V.isNumber(t)||b.isFunction(n.cellValue)?"<a "+s+" href='"+ta(l)+"'>"+(b.isFunction(n.cellValue)?d(n.cellValue):t)+"</a>":za(t,n)},M.showlink.getCellBuilder=function(e){var d={baseLinkUrl:e.baseLinkUrl,showAction:e.showAction,addParam:e.addParam||"",target:e.target,idName:e.idName,hrefDefaultValue:"#"};return null!=(e=e.colModel)&&(d=b.extend({},d,e.formatoptions||{})),function(t,e,r){var i,a,o=this,l=e.rowId,n="",s=function(e){return b.isFunction(e)?e.call(o,{cellValue:t,rowid:l,rowData:r,options:d}):e||""};return d.target&&(n="target="+s(d.target)),i=s(d.baseLinkUrl)+s(d.showAction),e=d.idName?encodeURIComponent(s(d.idName))+"="+encodeURIComponent(s(l)||e.rowId):"","object"==typeof(a=s(d.addParam))&&null!==a&&(a=(""!==e?"&":"")+b.param(a)),""===(i+=e||a?"?"+e+a:"")&&(i=s(d.hrefDefaultValue)),"string"==typeof t||V.isNumber(t)||b.isFunction(d.cellValue)?"<a "+n+" href='"+ta(i)+"'>"+(b.isFunction(d.cellValue)?s(d.cellValue):t)+"</a>":za(t,d)}},M.showlink.pageFinalization=function(r){var e,t,i=b(this),a=this.p,o=a.colModel[r],l=this.rows,n=l.length,s=function(e){var t=b(this).closest(".jqgrow");if(0<t.length)return o.formatoptions.onClick.call(i[0],{iCol:r,iRow:t[0].rowIndex,rowid:t.attr("id"),cm:o,cmName:o.name,cellValue:b(this).text(),a:this,event:e})};if(null!=o.formatoptions&&b.isFunction(o.formatoptions.onClick))for(e=0;e<n;e++)t=l[e],b(t).hasClass("jqgrow")&&(t=t.cells[r],o.autoResizable&&null!=t&&b(t.firstChild).hasClass(a.autoResizing.wrapperClassName)&&(t=t.firstChild),null!=t)&&b(t.firstChild).on("click",s)};var eb=function(e,t){return e=t.prefix?t.prefix+e:e,t.suffix?e+t.suffix:e},nb=function(e,t,r){var i=t.colModel;return t=b.extend({},t[r]),null!=i&&(t=b.extend({},t,i.formatoptions||{})),V.isEmpty(e)?eb(t.defaultValue,t):eb(V.NumberFormat(e,t),t)};M.integer=function(e,t){return nb(e,t,"integer")},M.number=function(e,t){return nb(e,t,"number")},M.currency=function(e,t){return nb(e,t,"currency")};var ob=function(e,t){var r=e.colModel,i=b.extend({},e[t]);null!=r&&(i=b.extend({},i,r.formatoptions||{}));var a=V.NumberFormat,o=i.defaultValue?eb(i.defaultValue,i):"";return function(e){return V.isEmpty(e)?o:eb(a(e,i),i)}};M.integer.getCellBuilder=function(e){return ob(e,"integer")},M.number.getCellBuilder=function(e){return ob(e,"number")},M.currency.getCellBuilder=function(e){return ob(e,"currency")},M.date=function(e,r,i,a){return i=r.colModel,r=b.extend({},r.date),null!=i&&(r=b.extend({},r,i.formatoptions||{})),r.reformatAfterEdit||"edit"!==a?V.isEmpty(e)?za(e,r):t.parseDate.call(this,r.srcformat,e,r.newformat,r):za(e,r)},M.date.getCellBuilder=function(e,r){var i=b.extend({},e.date);null!=e.colModel&&(i=b.extend({},i,e.colModel.formatoptions||{}));var a=t.parseDate,o=i.srcformat,l=i.newformat;return i.reformatAfterEdit||"edit"!==r?function(e){return V.isEmpty(e)?za(e,i):a.call(this,o,e,l,i)}:function(e){return za(e,i)}},M.select=function(e,t){var r,i=[],a=t.colModel,o=(a=b.extend({},a.editoptions||{},a.formatoptions||{})).value,l=a.separator||":",n=a.delimiter||";";if(o){var s=!0===a.multiple,d=[],c=function(e,t){if(0<t)return e};if(s&&(d=b.map(String(e).split(","),function(e){return b.trim(e)})),"string"==typeof o){var u,p,h=o.split(n);for(u=0;u<h.length;u++)if(2<(n=h[u].split(l)).length&&(n[1]=b.map(n,c).join(l)),p=b.trim(n[0]),a.defaultValue===p&&(r=n[1]),s)-1<b.inArray(p,d)&&i.push(n[1]);else if(p===b.trim(e)){i=[n[1]];break}}else V.isObject(o)&&(r=o[a.defaultValue],i=s?b.map(d,function(e){return o[e]}):[void 0===o[e]?"":o[e]])}return""!==(e=i.join(", "))?e:void 0!==a.defaultValue?r:za(e,a)},M.select.getCellBuilder=function(e){e=e.colModel;var a=M.defaultFormat,o=b.extend({},e.editoptions||{},e.formatoptions||{}),t=o.value;e=o.separator||":";var l,r,i=o.delimiter||";",n=void 0!==o.defaultValue,s=!0===o.multiple,d={},c=function(e,t){if(0<t)return e};if("string"==typeof t)for(r=(i=(t=t.split(i)).length)-1;0<=r;r--)2<(i=t[r].split(e)).length&&(i[1]=b.map(i,c).join(e)),d[b.trim(i[0])]=i[1];else{if(!V.isObject(t))return function(e){return e?String(e):a(e,o)};d=t}return n&&(l=d[o.defaultValue]),s?function(e){var t,r=[],i=b.map(String(e).split(","),function(e){return b.trim(e)});for(t=0;t<i.length;t++)e=i[t],d.hasOwnProperty(e)&&r.push(d[e]);return""!==(e=r.join(", "))?e:n?l:a(e,o)}:function(e){var t=d[String(e)];return""!==t&&void 0!==t?t:n?l:a(e,o)}},M.rowactions=function(e,r){var i,a,o=b(this).closest("tr.jqgrow"),l=o.attr("id"),n=b(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),s=b("#"+t.jqID(n)),d=(n=s[0]).p;i=function(){var e=o[0],t=s.closest(".ui-jqgrid")[0];return null!=e.getBoundingClientRect&&null!=t.getBoundingClientRect?e.getBoundingClientRect().top+o.outerHeight()-t.getBoundingClientRect().top:o.offset().top+o.outerHeight()-b(t).offset().top};var c=d.colModel[t.getCellIndex(this)];c=b.extend(!0,{extraparam:{}},t.actionsNav||{},d.actionsNavOptions||{},c.formatoptions||{});switch(void 0!==d.editOptions&&(c.editOptions=b.extend(!0,c.editOptions||{},d.editOptions)),void 0!==d.delOptions&&(c.delOptions=d.delOptions),o.hasClass("jqgrid-new-row")&&(c.extraparam[d.prmNames.oper]=d.prmNames.addoper),a={keys:c.keys,oneditfunc:c.onEdit,successfunc:c.onSuccess,url:c.url,extraparam:c.extraparam,aftersavefunc:c.afterSave,errorfunc:c.onError,afterrestorefunc:c.afterRestore,restoreAfterError:c.restoreAfterError,mtype:c.mtype},!d.multiselect&&l!==d.selrow||d.multiselect&&b.inArray(l,d.selarrrow)<0?s.jqGrid("setSelection",l,!0,e):t.fullBoolFeedback.call(n,"onSelectRow","jqGridSelectRow",l,!0,e),r){case"edit":s.jqGrid("editRow",l,a);break;case"save":s.jqGrid("saveRow",l,a);break;case"cancel":s.jqGrid("restoreRow",l,c.afterRestore);break;case"del":c.delOptions=c.delOptions||{},void 0===c.delOptions.top&&(c.delOptions.top=i()),s.jqGrid("delGridRow",l,c.delOptions);break;case"formedit":c.editOptions=c.editOptions||{},void 0===c.editOptions.top&&(c.editOptions.top=i(),c.editOptions.recreateForm=!0),s.jqGrid("editGridRow",l,c.editOptions);break;default:if(null!=c.custom&&0<c.custom.length)for(i=c.custom.length,d=0;d<i;d++)(a=c.custom[d]).action===r&&b.isFunction(a.onClick)&&a.onClick.call(n,{rowid:l,event:e,action:r,options:a})}return e.stopPropagation&&e.stopPropagation(),!1},M.actions=function(e,r,i,a){e=r.rowId;var o="",l=this.p,n=b(this),s={},d=ia.call(n,"edit")||{},c=(l=b.extend({editbutton:!0,delbutton:!0,editformbutton:!1,commonIconClass:"ui-icon",editicon:"ui-icon-pencil",delicon:"ui-icon-trash",saveicon:"ui-icon-disk",cancelicon:"ui-icon-cancel",savetitle:d.bSubmit||"",canceltitle:d.bCancel||""},ia.call(n,"nav")||{},t.nav||{},l.navOptions||{},ia.call(n,"actionsNav")||{},t.actionsNav||{},l.actionsNavOptions||{},r.colModel.formatoptions||{}),d="onmouseover=\"jQuery(this).addClass('"+(d=n.jqGrid("getGuiStyles","states.hover"))+"');\" onmouseout=\"jQuery(this).removeClass('"+d+"');\"",[{action:"edit",actionName:"formedit",display:l.editformbutton},{action:"edit",display:!l.editformbutton&&l.editbutton},{action:"del",idPrefix:"Delete",display:l.delbutton},{action:"save",display:l.editformbutton||l.editbutton,hidden:!0},{action:"cancel",display:l.editformbutton||l.editbutton,hidden:!0}]),u=null!=l.custom?l.custom.length-1:-1;if(void 0===e||V.isEmpty(e))return"";if(b.isFunction(l.isDisplayButtons))try{s=l.isDisplayButtons.call(this,r,i,a)||{}}catch(e){}for(;0<=u;)c["first"===(r=l.custom[u--]).position?"unshift":"push"](r);for(r=0,u=c.length;r<u;r++)if(!1!==(i=b.extend({},c[r],s[c[r].action]||{})).display){a=i.action;var p=i.actionName||a,h=void 0!==i.idPrefix?i.idPrefix:a.charAt(0).toUpperCase()+a.substring(1);o+=i="<div title='"+ta(l[a+"title"])+(i.hidden?"' style='display:none;":"")+"' class='"+ta(n.jqGrid("getGuiStyles","actionsButton","ui-pg-div ui-inline-"+a))+"' "+(null!==h?"id='j"+ta(h+"Button_"+e):"")+"' onclick=\"return jQuery.fn.fmatter.rowactions.call(this,event,'"+p+"');\" "+(i.noHovering?"":d)+"><span class='"+ta(t.mergeCssClasses(l.commonIconClass,l[a+"icon"]))+"'></span></div>"}return"<div class='"+ta(n.jqGrid("getGuiStyles","actionsDiv","ui-jqgrid-actions"))+"'>"+o+"</div>"},M.actions.pageFinalization=function(o){var l=b(this),n=this.p,s=n.colModel,d=s[o],r=function(e,t){var r,i,a=0;for(r=s.length,i=0;i<r&&!0===s[i].frozen;i++)a=i;null!=(r=l.jqGrid("getGridRowById",t))&&null!=r.cells&&(o=n.iColByName[d.name],i=b(r.cells[o]).children(".ui-jqgrid-actions"),d.frozen&&n.frozenColumns&&o<=a&&(i=i.add(b(l[0].grid.fbRows[r.rowIndex].cells[o]).children(".ui-jqgrid-actions"))),e?(i.find(">.ui-inline-edit,>.ui-inline-del").show(),i.find(">.ui-inline-save,>.ui-inline-cancel").hide()):(i.find(">.ui-inline-edit,>.ui-inline-del").hide(),i.find(">.ui-inline-save,>.ui-inline-cancel").show()))},e=function(e,t){return r(!0,t),!1},t=function(e,t){return r(!1,t),!1};null!=d.formatoptions&&d.formatoptions.editformbutton||(l.off("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",e),l.on("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",e),l.off("jqGridInlineEditRow.jqGridFormatter",t),l.on("jqGridInlineEditRow.jqGridFormatter",t))},b.unformat=function(e,r,i,a){var o,l=(p=r.colModel).formatter,n=this.p,s=p.formatoptions||{},d=p.unformat||M[l]&&M[l].unformat;if(e instanceof jQuery&&0<e.length&&(e=e[0]),n.treeGrid&&null!=e&&b(e.firstChild).hasClass("tree-wrap")&&(b(e.lastChild).hasClass("cell-wrapper")||b(e.lastChild).hasClass("cell-wrapperleaf"))&&(e=e.lastChild),p.autoResizable&&null!=e&&b(e.firstChild).hasClass(n.autoResizing.wrapperClassName)&&(e=e.firstChild),void 0!==d&&b.isFunction(d))o=d.call(this,b(e).text(),r,e);else if(void 0!==l&&"string"==typeof l){var c=b(this),u=function(e,t){return void 0!==s[t]?s[t]:ia.call(c,"formatter."+e+"."+t)},p=function(e,t){var r=u(e,"thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return t.replace(new RegExp(r,"g"),"")};switch(l){case"integer":o=p("integer",b(e).text());break;case"number":o=p("number",b(e).text()).replace(u("number","decimalSeparator"),".");break;case"currency":o=b(e).text(),r=u("currency","prefix"),i=u("currency","suffix"),r&&r.length&&(o=o.substr(r.length)),i&&i.length&&(o=o.substr(0,o.length-i.length)),o=p("number",o).replace(u("number","decimalSeparator"),".");break;case"checkbox":o=M.checkbox.unformat(e,r,e);break;case"select":o=b.unformat.select(e,r,i,a);break;case"actions":return"";default:o=b(e).text()}}return void 0!==o?o:!0===a?b(e).text():t.htmlDecode(b(e).html())},b.unformat.select=function(e,t,r,i){if(r=[],e=b(e).text(),t=t.colModel,!0===i)return e;i=void 0===(t=b.extend({},t.editoptions||{},t.formatoptions||{})).separator?":":t.separator;var a=void 0===t.delimiter?";":t.delimiter;if(t.value){var o=t.value,l=[],n=function(e,t){if(0<t)return e};if((t=!0===t.multiple)&&(l=e.split(","),l=b.map(l,function(e){return b.trim(e)})),"string"==typeof o){var s,d=o.split(a),c=0;for(s=0;s<d.length;s++)if(2<(a=d[s].split(i)).length&&(a[1]=b.map(a,n).join(i)),t)-1<b.inArray(b.trim(a[1]),l)&&(r[c]=a[0],c++);else if(b.trim(a[1])===b.trim(e)){r[0]=a[0];break}}else(V.isObject(o)||b.isArray(o))&&(t||(l[0]=e),r=b.map(l,function(r){var i;if(b.each(o,function(e,t){if(t===r)return i=e,!1}),void 0!==i)return i}));return r.join(", ")}return e||""},b.unformat.date=function(e,r){var i=b.extend(!0,{},ia.call(b(this),"formatter.date"),t.formatter.date||{},r.formatoptions||{});return V.isEmpty(e)?"":t.parseDate.call(this,i.newformat,e,i.srcformat,i)}});